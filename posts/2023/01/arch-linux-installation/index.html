<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>一份写给新手的 Arch Linux 安装教程（2025.10） | Rosa Thomas 的博客</title><meta name=keywords content><meta name=description content="0 前言
Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。"><meta name=author content="我"><link rel=canonical href=https://rosa-thomas.me/posts/2023/01/arch-linux-installation/><link crossorigin=anonymous href=/assets/css/stylesheet.a5781257de4197b8e3d54346acdf1dd55a9ba4cb91dcace192fc1baf228c08b5.css integrity="sha256-pXgSV95Bl7jj1UNGrN8d1VqbpMuR3KzhkvwbryKMCLU=" rel="preload stylesheet" as=style><link rel=icon href=https://rosa-thomas.me/images/cherry.png><link rel=icon type=image/png sizes=16x16 href=https://rosa-thomas.me/images/cherry.png><link rel=icon type=image/png sizes=32x32 href=https://rosa-thomas.me/images/cherry.png><link rel=apple-touch-icon href=https://rosa-thomas.me/images/cherry.png><link rel=mask-icon href=https://rosa-thomas.me/images/cherry.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://rosa-thomas.me/posts/2023/01/arch-linux-installation/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><meta property="og:url" content="https://rosa-thomas.me/posts/2023/01/arch-linux-installation/"><meta property="og:site_name" content="Rosa Thomas 的博客"><meta property="og:title" content="一份写给新手的 Arch Linux 安装教程（2025.10）"><meta property="og:description" content="0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-19T23:38:00+08:00"><meta property="article:modified_time" content="2023-01-19T23:38:00+08:00"><meta property="og:image" content="https://rosa-thomas.me/images/cherry.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rosa-thomas.me/images/cherry.png"><meta name=twitter:title content="一份写给新手的 Arch Linux 安装教程（2025.10）"><meta name=twitter:description content="0 前言
Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://rosa-thomas.me/posts/"},{"@type":"ListItem","position":2,"name":"一份写给新手的 Arch Linux 安装教程（2025.10）","item":"https://rosa-thomas.me/posts/2023/01/arch-linux-installation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"一份写给新手的 Arch Linux 安装教程（2025.10）","name":"一份写给新手的 Arch Linux 安装教程（2025.10）","description":"0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。\n","keywords":[],"articleBody":"0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。\n本文详细地介绍了在一台 x86-64 架构的计算机中安装 Arch Linux 的过程，尽可能遵循官方安装指南。本文共介绍三种安装方式，它们分别是：\n清空磁盘并安装 Arch Linux， 在虚拟机中安装 Arch Linux， Arch Linux 和 Windows 双系统安装。 为节省篇幅，本文主要介绍第一种方式，即清空磁盘并安装 Arch Linux。后两种方式的安装过程与第一种大致相同，其差异将在专门文章中详细说明。\n在动手操作之前，建议您阅读文章安装 Arch Linux 之前需要知道的事情，以便对该操作系统有初步的了解。\n尽管本文力图做到准确、全面和及时更新，但不能保证没有错误、疏漏和过时之处。本文的目的不是替代官方安装指南，而是通过把文档式的语言转化成教程式的语言，以降低新手安装 Arch Linux 的难度，便于 Arch Linux 乃至自由软件在简体中文世界的传播。为了获取更加可靠的信息，笔者建议您阅读每节后的“建议阅读”小节，那里提供了原始信息。\n1 安装要求 请确保您满足以下要求。\n1.1 硬件 计算机：一台 x86-64 架构的计算机，至少 512 MiB 内存，2 GiB 硬盘空间，可连接到互联网；本文建议至少 4 GiB 内存，100 GiB 硬盘空间，以满足日常使用需求。 安装介质：一个 U 盘，至少 2 GiB 剩余空间。 1.2 数据备份 备份计算机中的重要数据（至少包括软件列表和配置、个人文件、收藏夹和书签）； 备份安装介质（U 盘）中的全部文件。 1.3 知识和技能 了解 Linux 基础知识（最好安装过新手友好的发行版，例如 Ubuntu、Linux Mint 或 Deepin）； 有动手能力和意愿； 有英语读写能力，了解获取信息和寻求帮助的途径，以便遇到问题时查阅资料或在社区提问。 提示\n如果您想了解更多知识，欢迎阅读文章安装 Arch Linux 之前需要知道的事情。\n建议阅读 官方安装指南描述了安装 Arch Linux 的硬件要求。 Arch Linux 中文社区编译的简体中文版安装指南可作为官方安装指南的补充。 提问的智慧帮助您更有效地在社区提问。 Arch Linux 中文社区交流群指引介绍了加入 Arch Linux 中文社区交流群的方法以及群组规则。 2 获取安装映像 安装映像是一个 .iso 文件，将其写入到安装介质（如 U 盘）上，便可作为 live 系统启动。live 系统无需被安装到硬盘上即可在计算机上启动，一般用于安装操作系统（到硬盘上）或抢救操作系统。要了解 Arch Linux 提供的 live 系统中包含的软件包列表，请查看 pkglist.x86_64.txt。\n要获取安装映像，请前往下载页面，选择一种方式，下载文件 archlinux-\u003c映像发布日期\u003e-x86_64.iso。该文件每月（通常是 1 日）更新一次，请确保您下载的是最新的版本。\nhttps://archlinux.org/download/\n建议的下载方式有以下两种：\n通过 BitTorrent 下载； 从镜像站下载。 2.1 通过 BitTorrent 下载 如果您要通过 BitTorrent 下载，请点击下载页面中的链接 Torrent for \u003c映像发布日期\u003e，下载种子文件，然后用支持 BitTorrent 协议的下载工具打开该种子文件，并开始下载映像。\n注意\n本文中的种子文件下载链接可能不是最新的，请前往下载页面获取最新的链接。\n2.2 从镜像站下载 如果您要从镜像站下载，请在下载页面中选择一个合适的镜像站，选择的首要标准是地理距离。\n如果您在中国内地，建议选择以下镜像站之一。\n北京外国语大学开源软件镜像站 上海交通大学开源软件镜像站 清华大学开源软件镜像站 中国科学技术大学开源软件镜像 如果您在境外，建议选择离您最近的镜像站，或前往官方镜像站 pkgbuild.com。\n点击镜像站链接后，出现与下面类似的文件列表。\n../ arch/ 01-Oct-2025 16:11 - archlinux-2025.10.01-x86_64.iso 01-Oct-2025 16:11 1519419392 archlinux-2025.10.01-x86_64.iso.sig 01-Oct-2025 16:11 141 archlinux-2025.10.01-x86_64.iso.torrent 01-Oct-2025 16:11 81826 archlinux-bootstrap-2025.10.01-x86_64.tar.zst 01-Oct-2025 16:11 144688823 archlinux-bootstrap-2025.10.01-x86_64.tar.zst.sig 01-Oct-2025 16:11 141 archlinux-bootstrap-x86_64.tar.zst 01-Oct-2025 16:11 144688823 archlinux-bootstrap-x86_64.tar.zst.sig 01-Oct-2025 16:11 141 archlinux-x86_64.iso 01-Oct-2025 16:11 1519419392 archlinux-x86_64.iso.sig 01-Oct-2025 16:11 141 b2sums.txt 01-Oct-2025 16:11 654 sha256sums.txt 01-Oct-2025 16:11 398 其中，文件 archlinux-2025.10.01-x86_64.iso 即为我们需要的安装映像，点击文件名即可开始下载。\n3 验证映像 为确保映像文件在下载过程中没有损坏，需要计算下载文件的 SHA256 校验和，并与下载页面中给出的校验和比对。\n请在 Windows 系统中，打开映像所在的文件夹，鼠标移动到文件夹空白处，按下 Shift+右键，再点击“在此处打开 PowerShell 窗口”。在打开的 PowerShell 窗口中，输入以下命令，并按下 Enter 以执行命令。\n注意\n命令中的 #，表示从该字符到行末的所有文字均为注释，注释不是命令的一部分。\ncertutil -hashfile .\\archlinux-2024.11.01-x86_64.iso SHA256 # 请将“2024.11.01”替换为您下载的映像文件名中的日期。 这个命令使用了 Windows 系统自带的 certutil 程序的 -hashfile 选项，以计算工作文件夹（.\\）中的文件 archlinux-2024.11.01-x86_64.iso 的 SHA256 校验和。其输出是这样的：\n请在下载页面中找到“Checksums and signatures（校验和与签名）”部分，查看其中的 SHA256 校验和。如果该值与上述命令输出的校验和相同，说明映像没有损坏；如果不同，说明映像损坏，请重新下载。\n提示\n2024 年 11 月 ISO 映像的 SHA256 校验和是\n86bde4fa571579120190a0946d54cd2b3a8bf834ef5c95ed6f26fbb59104ea1d archlinux-2025.10.01-x86_64.iso 参考资料 certutil 程序介绍 4 准备安装介质 警告\n继续操作将清空 U 盘中全部数据，请提前作好备份。\nVentoy 是一个制作可启动 U 盘的开源软件。使用 Ventoy，无需反复格式化 U 盘，只需将映像复制到 U 盘中即可启动。请按以下步骤，利用 Ventoy 制作安装介质。\n首先，前往 Ventoy 下载页面，下载 ventoy-1.0.99-windows.zip，并核验 SHA256 校验值。\n提示\n在 Ventoy 下载页面中直接点击文件名将会跳转到 GitHub，而 GitHub 在中国内地连接不稳定。如果无法下载，请通过以下镜像站或云存储服务器下载。\nGitHub Gitee 南京大学开源镜像站 山东大学镜像站 蓝奏云 123 云盘（提取码：vtoy） 百度网盘（提取码：vtoy） 其次，解压缩下载的 .zip 文件，并运行 Ventoy2Disk.exe。\n然后，把您的 U 盘插入计算机，在 Ventoy 程序窗口中选择您的 U 盘，并点击“安装”。\n最后，把安装映像复制到 U 盘中即可。\n参考资料 Ventoy 使用说明 5 启动到 live 环境 准备工作完成之后，可以启动到 live 环境了。\n请找到您电脑的启动快捷键，插入 U 盘，重启电脑，反复按该按键，直到出现启动列表，随后选择您的 U 盘。在弹出的 Ventoy 界面中，选择您刚刚下载的镜像名称项，再选择 Boot in normal mode。在随后弹出的 GRUB 引导界面中，选择第一项 Arch Linux install medium (x86_64, UEFI)\n耐心等待 live 系统启动，如果输出以下字符，说明 live 环境启动成功。\nArch Linux 6.x.x-arch1-1 (tty1) archiso login: root (automatic login) To install Arch Linux follow the installation guide: https://wiki.archlinux.org/title/Installation_guide ... 从现在开始，安装过程将在终端中进行。请做好准备，耐心而谨慎地键入命令。只要您按照指导一步步完成，就能走到最后的终点。\n7 设置终端键盘布局和字体 7.1 Linux 命令简介 在安装之前需要先介绍一下 Linux 命令的语法。最简单的 Linux 命令由命令、选项和参数组成。一个命令就像一个祈使句，由谓语、状语和宾语组成，只不过语序有所变化，而且选项要前面用“-”标注。我们以祈使句“快速地吃米饭”举一个例子。在这个句子中，谓语是“吃”，状语是“快速地”，宾语是“米饭”。把这个句子写成命令的形式就是这样的\n吃 -快速地 米饭 我们列个表格以便展示二者的对应关系：\n命令 -选项 参数 谓语 -状语 宾语 吃 -快速地 米饭 请记住下列语法，更多的知识请参阅鸟哥私房菜。\n命令 -选项 参数 7.2 设置终端键盘布局 默认键盘布局是美式键盘，您可以使用以下命令列出可用的键盘布局。\nroot@archiso ~ # ls /usr/share/kbd/keymaps/**/*.map.gz ls 可能是 Linux 中最常用的命令。关于 Linux 常用命令的学习，请参阅鸟哥私房菜。\n您可以使用 loadkeys 命令 设置键盘布局。例如，如下命令将键盘布局设置为 Dvorak 布局。\nroot@archiso ~ # loadkeys dvorak 7.3 设置终端字体 如果您的屏幕分辨率较高，您会发现终端显示字体较小。这时需要设置终端字体，把字号调大。我们使用 setfont 命令 设置。这个命令没有选项，只需要输入命令和参数，如\nsetfont 字体名 分辨率为 1080p 的屏幕，建议选择字体 ter-122b，分辨率更高的屏幕，可以在 ter-124b，ter-128b，ter-132b 中选择一个，例如\nroot@archiso ~ # setfont ter-132b 建议您记住刚刚选择的字体，配置系统时会用到。\n8 验证启动模式 本文开始时提到，您的电脑必须在 UEFI 模式下启动，现在验证您的启动模式。\n请输入如下命令（注意：使用Tab键可以自动补全）\nroot@archiso ~ # cat /sys/firmware/efi/fw_platform_size 如果返回 64，那么系统以 UEFI 模式启动，并且有 64 位 UEFI。如果返回 32，那么系统以 UEFI 模式启动，但是只能使用 GRUB 作为引导加载程序。如果这个文件不存在，系统可能以 BIOS 模式启动。\n处于 BIOS 启动模式的读者，可以自行进入 BIOS 页面更改启动模式。如果无法更改，说明您的电脑过于老旧，本文无法指导您继续安装。请您参考其他教程，例如\n9 连接到互联网 Arch Linux 镜像只提供一个基本的安装环境，软件包仍需要连接互联网后下载。连接互联网有多种方式，包括\n有线连接 WiFi 连接 手机 USB 网络共享（仅限 Android 手机） 笔者建议读者优先使用有线连接和手机 USB 网络共享的方式连接互联网。\n连接互联网的步骤如下：\n检查确保网络接口已经启用。 root@archiso ~ # ip link 您应该在输出中看到 enp0s3 或 wlan0 之类的字样，这就是您的网络接口名称，例如\n2: enp0s3: mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000 ... 尖括号内的 UP，表示接口已经启用。如果没有出现 UP，使用如下命令启用该接口 。\nroot@archiso ~ # ip link set \u003c网络接口名称\u003e up # 请将“\u003c网络接口名称\u003e”替换成您的网络接口名称，如“enp0s3”或“wlan0” 使用无线连接的读者，使用 rfkill 命令确认无线网卡没有被屏蔽。 root@archiso ~ # rfkill ID TYPE DEVICE SOFT HARD 0 bluetooth hci0 unblocked unblocked 1 wlan phy0 unblocked unblocked 如果无线网卡被硬件屏蔽，请使用硬件开关启用它；如果被软件屏蔽，请输入如下命令启用它。\nroot@archiso ~ # rfkill unblock wlan 选择有线连接的读者，只需要将网线插到电脑相应接口即可连接。选择手机 USB 网络共享的读者，将手机和电脑用数据线连接，然后在手机通知栏中选择“USB 网络共享”即可连接。以下详细介绍连接 WiFi 的方法。 请使用 iwctl 命令 连接互联网，如下 root@archiso ~ # iwctl NetworkConfigurationEnabled: disabled StateDirectory: /var/lib/iwd Version: 2.x [iwd]# 如果您看到上述输出，说明您已经进入了 iwd 程序环境。这时读者可能会觉得陌生，因为通常的命令下达后会直接输出结果，并返回命令提示符，等待下一个命令的输入。而这个命令不同，下达之后进入了程序环境，用户只能与该程序交互，这一点请初学者牢记。关于程序工作环境的更多例子，请参阅鸟哥私房菜。若想退出 iwd 程序环境，只需要输入 quit 即可。\n请继续输入命令\n[iwd]# device list Devices ------------------------------------------------------ Name Address Powered Adapter Mode ------------------------------------------------------ wlan0 xx:xx:xx:xx:xx:xx on phy0 station 请记住上述输出的设备名称（在 Name 下面），这里以 wlan0 为例，请将 wlan0 替换成您的设备名称。\n继续输入命令\n[iwd]# station wlan0 scan # 扫描网络，请将 wlan0 换成您的设备名称 [iwd]# station wlan0 get-networks # 输出扫描结果，请将 wlan0 换成您的设备名称 Available Networks ------------------------------------ Network name Security Signal ------------------------------------ mySSID psk **** 请记住您的网络名称（在 Network name 下面），这里以 mySSID 为例，请将 mySSID 换成您的网络名称。\n继续输入命令\n[iwd]# station wlan0 connect \"mySSID\" # 连接网络，请将 wlan0 换成您的设备名称，mySSID 换成您的网络名称 Type the network passphrase for mySSID psk. Passphrase: ******** # 输入密码 [iwd]# quit # 退出 iwd 程序环境 这时您应该已经连接上互联网了，请使用 ping 命令测试网络（使用 Ctrl+C 中止命令）。 root@archiso ~ # ping archlinux.org PING archlinux.org (95.217.163.246) 56(84) bytes of data. 64 bytes from archlinux.org (95.217.163.246): icmp_seq=1 ttl=47 time=201 ms 64 bytes from archlinux.org (95.217.163.246): icmp_seq=2 ttl=47 time=218 ms 64 bytes from archlinux.org (95.217.163.246): icmp_seq=3 ttl=47 time=194 ms ^C # 使用 Ctrl+C 中止命令 --- archlinux.org ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2001 ms rtt min/avg/max/mdev = 194.013/204.384/217.666/9.873 ms 如果出现上述结果，说明网络连接成功。如果无法连接 WiFi，请按照 ArchWiki 检查互联网连接。由于驱动不匹配，有些电脑可能无法连接 WiFi，只能使用有线连接或手机 USB 网络共享。\n若要排查网络连接问题，请先确保你满足了以下要求。 你的网络接口可见并已启用。否则请检查设备驱动－请查阅 网络配置/以太网 - Arch Linux 中文维基 或 网络配置/无线网络配置 - Arch Linux 中文维基 页面。 你已连接到网络。网线已接好或者已经连接到无线局域网。 你的网络接口拥有一个 IP 地址。 你的路由表设置正确。 你可以 ping 通一个本地 IP 地址（例如你的默认网关）。 你可以 ping 通一个公网 IP 地址（例如 9.9.9.9，即 Quad9 的 DNS 服务器）。 检查是否能解析域名（例如 archlinux.org）。 10 更新系统时间 在互联网连接之后，systemd-timesyncd 服务将自动校准系统时间。请输入如下命令确定时间的准确性。设置时间的目的之一是便于安装软件包时验证签名。\nroot@archiso ~ # timedatectl 时间可能以 UTC 时区显示，比北京时间慢 8 小时。这是正常现象，无需调整。\n如果时间不准确，请使用 date 命令手动设置时间。\nroot@archiso ~ # date MMDDhhmmYY # 如 date 1231080023 可以将时间设定为 2023 年 12 月 31 日 08:00 11 磁盘分区 注意\n从未进行过磁盘分区操作的读者请先在虚拟机内练习 请您务必提前备份好重要资料 请您确保知晓命令的含义，并正确输入命令，否则有可能造成数据丢失 11.1 全新安装 Arch Linux 的磁盘分区 注意\n继续操作将清除硬盘内全部数据。如果您想保留数据和已有的 Windows 系统，请看第 11.2 节。\n磁盘分区表\n挂载点 分区 分区类型 建议大小 备注 /mnt/boot /dev/sda1 或/dev/nvme0n1p1 EFI System 512 MiB ESP 分区 /mnt /dev/sda2 或/dev/nvme0n1p2 Linux x86-64 root 100 GiB（至少 50 GiB） Arch Linux 的根分区 /mnt/home /dev/sda3 或/dev/nvme0n1p3 Linux home 剩余磁盘空间 Arch Linux 的 home 分区 首先使用 lsblk 或 fdisk -l 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如\nroot@archiso ~ # lsblk ---- NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 688.2M 1 loop /run/archiso/airootfs # loop0 可以忽略 sda 8:0 0 931.5G 0 disk # sda 是要安装 Arch Linux 的硬盘，请记住设备名 ├─sda1 8:1 0 512M 0 part └─sda2 8:2 0 931G 0 part sdb 8:16 1 59.8G 0 disk # sdb 是 U 盘，请忽略 ├─sdb1 8:17 1 59.7G 0 part │ └ventoy 254:0 0 861.3M 1 dm /run/archiso/bootmnt └─sdb2 8:18 1 32M 0 part 在上面的例子中，以 rom、loop、airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。找到要进行分区的设备之后，请记住设备名（本文以 /dev/sda 为例，您的硬盘也可能是 /dev/nvme0n1）。\n我们使用的分区工具是 fdisk ，首先让我们通过查看帮助，学习一下 fdisk 的用法。\nroot@archiso ~ # fdisk /dev/sda # 输入 fdisk 设备名，进入 fdisk 操作环境 Welcome to fdisk (util-linux 2.x). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. # 执行写入命令（w）之前，硬盘不会被改动 Command (m for help): m # 输入 m 获取帮助 Help: … Generic d delete a partition # 输入 d 删除分区 n add a new partition # 输入 n 创建分区 p print the partition table # 输入 p 打印分区表 t change a partition type # 输入 t 改变分区类型 … Save \u0026 Exit w write table to disk and exit # 输入 w 写入并退出（写入后不可撤销，请谨慎使用） q quit without saving changes # 输入 q 不保存退出 … Create a new label g create a new empty GPT partition table # 输入 g 创建 GPT 分区表 … 现在请输入 Ctrl+C，退出 fdisk 操作环境。\n我们现在正式进行磁盘分区。首先需要创建 GPT 分区表；随后依次创建分区，并修改分区类型；最后保存并退出。请参考以下分区过程，按照您的分区方案进行分区。\nroot@archiso ~ # fdisk /dev/sda # 请将 sda 更换为您的设备名，如 nvme0n1 Welcome to fdisk (util-linux 2.x). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Command (m for help): g # 输入 g 创建新的 GPT 分区表（请勿遗忘此步，否则您的硬盘将是 MBR 格式） Created a new GPT disklabel (GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx). Command (m for help): n # 输入 n 创建新的分区，这个分区将是 EFI 分区 Partition number (1-128, default 1): # 分区编号保持默认，直接按 Enter First sector (2048-125829086, default 2048): # 第一个扇区，保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-125829086, default 125827071): +512M # 创建 512MiB 大小的分区 Created a new partition 1 of type 'Linux filesystem' and of size 512 MiB. Partition #1 contains a vfat signature. Do you want to remove the signature? [Y]es/[N]o: Y # 清除已有的签名，如果是全新的硬盘，则没有此步 The signature will be removed by a write command. Command (m for help): t # 输入 t 改变分区类型，请勿遗忘此步 Selected partition 1 Partition type or alias (type L to list all): 1 # 输入 1 代表 EFI 类型 Changed type of partition 'Linux filesystem' to 'EFI System'. Command (m for help): n # 创建第二个分区，用作根分区 Partition number (2-128, default 2): # 保持默认 First sector (1050624-125829086, default 1050624): # 保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (1050624-125829086, default 125827071): +100G # 创建 100 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小 Created a new partition 2 of type 'Linux filesystem' and of size 100 GiB. Partition #2 contains a ntfs signature. Do you want to remove the signature? [Y]es/[N]o: Y The signature will be removed by a write command. Command (m for help): t # 输入 t 改变分区类型，请勿遗忘此步 Partition number (1-2, default 2): # 保持默认 Partition type or alias (type L to list all): 23 # 输入 23 代表 Linux root (x86-64) 类型 Changed type of partition 'Linux filesystem' to 'Linux root (x86-64)'. Command (m for help): n # 创建第三个分区，用作 home 分区 Partition number (3-128, default 3): # 保持默认 First sector (42993664-125829086, default 42993664): # 保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (42993664-125829086, default 125827071): #保持默认，将剩余空间全部分给 home 分区 Created a new partition 3 of type 'Linux filesystem' and of size 39.5 GiB. Command (m for help): t # 输入 t 改变分区类型 Partition number (1-3, default 3): Partition type or alias (type L to list all): 42 # 输入 42 代表 Linux home 类型 Changed type of partition 'Linux filesystem' to 'Linux home'. Command (m for help): p # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出 Disk /dev/sda: 60 GiB, 64424509440 bytes, 125829120 sectors Disk model: xxx Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 4096 bytes I/O size (minimum/optimal): 4096 bytes / 4096 bytes Disklabel type: gpt Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx Device Start End Sectors Size Type /dev/sda1 2048 1050623 1048576 512M EFI System /dev/sda2 1050624 42993663 41943040 100G Linux root (x86-64) /dev/sda3 42993664 125827071 82833408 39.5G Linux home Filesystem/RAID signature on partition 1 will be wiped. Filesystem/RAID signature on partition 2 will be wiped. Command (m for help): w # 输入 w 写入分区表，该操作不可恢复 The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. 12 分区格式化 创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4、btrfs、xfs 等。建议第一次安装的读者使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。\n12.1 全新安装 Arch Linux 的分区格式化 注意\n如果您希望 Arch Linux 与 Windows 系统共存，请直接跳到下一小节。\n使用 mkfs.fat 将您的 EFI 分区格式化为 FAT32 文件系统。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。\nroot@archiso ~ # mkfs.fat -F 32 /dev/sda1 使用 mkfs.ext4 将您的根分区格式化为 ext4 文件系统。请将 /dev/sda2 更换为您的 root 分区名，可能是 /dev/nvme0n1p2。\nroot@archiso ~ # mkfs.ext4 /dev/sda2 使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 /dev/sda3 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。\nroot@archiso ~ # mkfs.ext4 /dev/sda3 13 挂载分区 13.1 全新安装 Arch Linux 的挂载分区 首先，使用 mount 将根分区挂载在 /mnt 目录下。本文假定您的根分区是 /dev/sda2，您的根分区也可能是 /dev/nvme0n1p2，请根据实际情况作替换。\nroot@archiso ~ # mount /dev/sda2 /mnt 随后，使用 mount --mkdir 创建 /mnt/boot 目录，并将 EFI 分区挂载在 /mnt/boot 目录下。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。\nroot@archiso ~ # mount --mkdir /dev/sda1 /mnt/boot 此处，也可以使用 /mnt/efi 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。\n最后，挂载 home 分区。请将 /dev/sda5 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。\nroot@archiso ~ # mount --mkdir /dev/sda3 /mnt/home 14 建立交换文件 交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读。\n交换文件的大小是个众说纷纭的问题。笔者参考 RedHat 文档，推荐的交换文件大小见下表。笔者使用的公式是\n您可以根据您的实际情况选择交换文件的大小。如果需要休眠功能，建议交换文件接近内存大小 ，可以使用笔者的推荐大小。如果您不需要休眠功能，请适当减少交换文件大小。\n内存大小 推荐的交换文件大小（使用休眠功能） 推荐的交换文件大小（不使用休眠功能） 2 GiB 4096 MiB 4 GiB 5793 MiB 8 GiB 16 GiB 32 GiB 64 GiB 4096 MiB\n5793 MiB\n8192 MiB\n11585 MiB\n16384 MiB\n23170 MiB\n4096 MiB\n5793 MiB\n8192 MiB\n8192 MiB\n4096 MiB\n0 MiB\n建立交换文件的具体操作方法如下 。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （=8192 MiB）大小的交换文件。\nroot@archiso ~ # dd if=/dev/zero of=/mnt/swapfile bs=1M count=8192 status=progress 如果您需要创建其他大小的交换文件，请将 count= 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。\n然后，修改权限。\nroot@archiso ~ # chmod 0600 /mnt/swapfile 最后，格式化并启用交换文件。\nroot@archiso ~ # mkswap -U clear /mnt/swapfile root@archiso ~ # swapon /mnt/swapfile 15 选择软件仓库镜像 Linux 中的软件仓库就像手机操作系统中的应用商店，Linux 的软件包是通过软件仓库进行分发的。软件仓库镜像是软件仓库的复制品，同一个软件仓库可以在世界各地建立软件仓库镜像，以便于不同地区的用户下载。因此选择一个合适的软件仓库镜像对于您更新软件包数据库和下载软件包的速度有很大影响。\n15.1 使用 reflector Arch Linux 提供了一个筛选软件仓库镜像的便利工具 reflector。我们使用该工具选择软件仓库镜像。首先使用 reflector 自带的帮助学习一下该软件的用法。当您遇到陌生的命令时，使用 –help 选项查看用法是一个好主意。\nroot@archiso ~ # reflector --help 请仔细阅读屏幕上打印出的内容，自学是使用 Arch Linux 的必要过程。如果您看不懂，可以参考以下总结。\n用法： reflector -选项1 -选项2 … 选项： --save \u003c文件路径\u003e 把镜像列表保存到给定的路径 --sort {age,rate,country,score,delay} 以给定条件给镜像排序。 age：服务器最后同步时间； rate：下载速度； country：国家名； score：“镜像状态”中的得分； delay：“镜像状态”中的延迟 --delay n 只返回同步延迟在 n 小时之内的镜像 -a n 只返回 n 小时内同步的镜像 -c \u003c国家\u003e -p \u003c协议\u003e 笔者推荐使用如下命令选择镜像。此命令将为您选出位于平均同步延迟在 3 小时以内的，位于中国内地的 HTTPS 镜像，并根据速度排序。指定 --completion-percent 95（默认为 100）的目的是防止忽略可用的镜像。\nroot@archiso ~ # reflector -p https -c China --delay 3 --completion-percent 95 --sort rate --save /etc/pacman.d/mirrorlist 上述命令使用了并不稳定的测速功能，如果大量报错，也可以根据得分排序。\nroot@archiso ~ # reflector -p https -c China --delay 3 --completion-percent 95 --sort score --save /etc/pacman.d/mirrorlist 如果您在境外，请使用 reflector --list-countries 查看您所在的国家名，然后自行替换选项 -c 后面的内容。如果国家名包含空格，请使用两字母的国家代号，或者用引号将国家名包裹起来。\n15.2 手动编辑文件 您也可以手动编辑 /etc/pacman.d/mirrorlist。国内知名的软件仓库镜像站有清华（TUNA）和中科大（USTC），但是笔者不推荐将它们放在第一位。因为使用者过多，服务器负载过大，影响下载速度。根据下列文章，笔者推荐北外（BFSU）镜像。该镜像由清华 TUNA 协会维护，质量速度俱佳。此外，上交（SJTUG）镜像也是不错的选择。\nroot@archiso ~ # nano /etc/pacman.d/mirrorlist 文件 /etc/pacman.d/mirrorlist ----------------------------- # 以下为文件内容 Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch 如果您在国外，可以选择 pkgbuild 镜像。\n文件 /etc/pacman.d/mirrorlist ----------------------------- # 以下为文件内容 Server = https://geo.mirror.pkgbuild.com/$repo/os/$arch 随后按下 Ctrl+O 保存，Ctrl+X 退出。\n16 安装基础包 终于到了安装环节。我们使用 pacstrap 安装（元）软件包 base、linux和linux-firmware，它们分别是 Arch Linux 基础元软件包，linux 内核和常规硬件的固件。此外，如果您使用较新（2019 年及以后生产）的笔记本电脑，则需要安装软件包 sof-firmware，否则可能没有声音。\nArch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核 ，但是对于新手，只推荐使用 linux 内核。\nroot@archiso ~ # pacstrap -K /mnt base linux linux-firmware 此命令需要一段时间执行。执行完毕后请检查输出，不应出现任何错误（ERROR）。如果出现，请先尝试重新执行命令。如果反复报错，可以寻求他人的帮助。\n如果报告“验证软件包错误”，可以尝试以下方法，然后重新安装。\nroot@archiso ~ # pacman-key --init # 初始化密钥环 root@archiso ~ # pacman-key --populate root@archiso ~ # pacman -Sy archlinux-keyring # 更新 archlinux-keyring 17 fstab fstab 是一个系统文件，决定了系统启动时如何自动挂载分区。没有 fstab，系统将找不到根分区，从而无法启动。fstab 有一定的格式，我们用一个例子说明该文件的格式。\n/etc/fstab ---- # UUID=0a3407de-014b-458b-b5c1-848e92a327a3 / ext4 noatime 0 1 UUID=f9fe0b69-a280-415d-a03a-a32752370dee none swap defaults 0 0 UUID=b411dc99-f0a0-4c87-9e05-184977be8539 /home ext4 noatime 0 2 第一栏：设备，描述了要被挂载的块设备，推荐使用 UUID 方式，也可以使用分区标签（label）。 第二栏：文件夹，即挂载文件夹。 第三栏：类型，即文件系统类型。 第四栏：选项，即挂载选项。 第五栏：dump，用于 dump 功能决定文件系统是否需要备份，一般填 0。 第六栏：fsck，是否在启动过程中检查文件系统，对于 ext4 格式的根分区，应该填 1，其余填 0。\nArch Linux 提供了自动生成 fstab 的工具，我们利用它直接生成。\nroot@archiso ~ # genfstab -U /mnt \u003e\u003e /mnt/etc/fstab 其中 genfstab -U /mnt 是以 UUID 的描述方式生成 fstab。\u003e\u003e 的意思是，将输出附加到指定文件之后。\n生成完成后，记得使用 cat 命令打印文件内容，仔细检查一遍。\nroot@archiso ~ # cat /mnt/etc/fstab 18 chroot 我们使用 arch-chroot 脚本，切换到新安装的系统，以后的操作就可以在新安装的系统中完成了。\nroot@archiso ~ # arch-chroot /mnt 19 时区 我们设置时区的软链接。在中国内地的读者请使用上海时区，在其他地区的读者可以在输入“/usr/share/zoneinfo/”之后按下 Tab 查看可选的时区。\n[root@archiso ~]# ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 然后，设置硬件时间。\n[root@archiso ~]# hwclock --systohc 20 本地化 我们将设置 locale、终端键盘布局和字体。locale 决定了系统的语言和格式，包括终端显示哪种语言，数字、时间和货币以哪国的格式显示等等。\n20.1 设置 locale 首先使用包管理器 pacman 安装两个软件包。使用 pacman 安装软件包需要利用 -S (–sync) 选项，这个选项的意思是“同步的数据库”。\n[root@archiso ~]# pacman -S vim terminus-font vim 是著名的文本编辑器，而 terminus-font 是终端字体。我们输入以下命令，利用 vim 编辑 /etc/locale.gen。\n[root@archiso ~]# vim /etc/locale.gen vim 的功能十分强大，在这里只解释用到的功能，其他功能在下一篇文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。 输入 /，进入搜索功能，输入 en_US.UTF-8，我们找到了以下一行。\n#en_US.UTF-8 UTF-8 按下 Enter，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。\nen_US.UTF-8 UTF-8 再一次输入 /，进入搜索功能，输入 zh_CN.UTF-8，按下 Enter。按方向左键，再输入 x，将“#”删除。\nzh_CN.UTF-8 UTF-8 随后输入 :，进入命令模式，输入 wq，按下 Enter，保存并退出 vim 软件环境。\n接下来，输入如下命令，生成 locale。\n[root@archiso ~]# locale-gen 我们再使用 vim 创建并编辑 locale.conf，设置 locale。\n[root@archiso ~]# vim /etc/locale.conf 这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下 i，进入插入模式。请输入如下字符。\nLANG=en_US.UTF-8 然后按 Esc，退出插入模式。再输入 :，进入命令模式，输入wq，按下 Enter，保存并退出 vim 软件环境。\n20.2 设置终端键盘布局和字体 我们创建并编辑 vconsole.conf，设置终端的默认字体。我们已经在安装开始时设置过终端字体，但是重启之后设置将失效。为了让设置永久生效，我们需要把设置写在文件中。请输入如下命令。\n[root@archiso ~]# vim /etc/vconsole.conf 请用相同的方法输入如下字符。请在“KEYMAP=”后面输入您在第 7 节设置终端键盘布局时选择的键盘布局（这一行可以不设置），在“FONT=”后面输入您在第 7 节设置终端字体时选择的字体，保存并退出。\n/etc/vconsole.conf ---- FONT=ter-132b 21 网络配置 请编辑 /etc/hostname 文件，设置主机名。这将成为您计算机的名字。这篇文章为设置主机名提供了一些建议。\n[root@archiso ~]# vim /etc/hostname /etc/hostname ---- 我的主机名 然后，请安装一个网络管理器，笔者推荐使用 NetworkManager。\n[root@archiso ~]# pacman -S networkmanager NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在使用 systemd 设置 NetworkManager 开机自动启动。\n[root@archiso ~]# systemctl enable NetworkManager.service 22 root 密码 root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码。\n请设置 root 密码。\n[root@archiso ~]# passwd New password: # 注：输入密码后不会显示“*”，这是正常现象 Retype new password: passwd: password updated successfully 23 引导加载程序 为了启动 Arch Linux，建议使用一个引导加载程序，笔者推荐使用的引导加载程序是 GRUB。\n再次声明，本教程只针对 UEFI 启动模式的计算机，如果您的计算机使用 BIOS 启动模式，请参阅此教程。\n关于 Arch Linux 启动的过程，参见 ArchWiki。\n23.1 微码 根据您的 CPU 生产厂商，安装相应的微码。\n请先查看您的 CPU 型号。\n[root@archiso ~]# cat /proc/cpuinfo | grep \"model name\" 如果是 Intel CPU，请安装软件包 intel-ucode。\n[root@archiso ~]# pacman -S intel-ucode 如果是 AMD CPU，请安装软件包 amd-ucode。\n[root@archiso ~]# pacman -S amd-ucode 23.2 安装引导加载程序（针对全新安装 Arch Linux） 首先，安装必要的软件包。\n[root@archiso ~]# pacman -S grub efibootmgr 然后，安装 GRUB 到计算机。\n[root@archiso ~]# grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB 如果您在挂载分区时，将 esp 分区挂载到了 /efi 或者 /boot/efi，请在 –efi-directory 选项中作相应变动。如果您完全按照本教程操作，则不用作改变。\n如果输出 Installation finished. No error reported.，则说明安装成功，否则请立即检查错误。\n最后，生成 GRUB 配置，其中 -o 选项将配置输出到指定的文件中。\n[root@archiso ~]# grub-mkconfig -o /boot/grub/grub.cfg 24 重新启动计算机 首先，退出 chroot 环境。\n[root@archiso ~]# exit 然后，关闭交换文件。\nroot@archiso ~ # swapoff /mnt/swapfile 随后，取消挂载 /mnt。\nroot@archiso ~ # umount -R /mnt 最后，重新启动计算机。\nroot@archiso ~ # reboot 25 安装后的工作 至此，一个基本的 Arch Linux 系统已经安装完毕，现在您可以通过终端控制系统。笔者将在下一篇文章中介绍安装后的配置，包括普通账户的创建、显卡驱动和图形界面的安装，敬请阅读。\n","wordCount":"10885","inLanguage":"zh","image":"https://rosa-thomas.me/images/cherry.png","datePublished":"2023-01-19T23:38:00+08:00","dateModified":"2023-01-19T23:38:00+08:00","author":{"@type":"Person","name":"我"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rosa-thomas.me/posts/2023/01/arch-linux-installation/"},"publisher":{"@type":"Organization","name":"Rosa Thomas 的博客","logo":{"@type":"ImageObject","url":"https://rosa-thomas.me/images/cherry.png"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rosa-thomas.me/ accesskey=h title="Rosa Thomas 的博客 (Alt + H)">Rosa Thomas 的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://rosa-thomas.me/archives/ title=归档><span>归档</span></a></li><li><a href=https://rosa-thomas.me/tags/ title=Tags><span>标签</span></a></li><li><a href=https://rosa-thomas.me/search/ title=搜索><span>搜索</span></a></li><li><a href=https://rosa-thomas.me/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rosa-thomas.me/>主页</a>&nbsp;»&nbsp;<a href=https://rosa-thomas.me/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">一份写给新手的 Arch Linux 安装教程（2025.10）</h1><div class=post-meta><span title='2023-01-19 23:38:00 +0800 CST'>2023-01-19</span>&nbsp;·&nbsp;<span>22 分钟</span>&nbsp;·&nbsp;<span>10885 字</span>&nbsp;·&nbsp;<span>我</span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#0-前言>0 前言</a></li><li><a href=#1-安装要求>1 安装要求</a><ul><li><a href=#11-硬件>1.1 硬件</a></li><li><a href=#12-数据备份>1.2 数据备份</a></li><li><a href=#13-知识和技能>1.3 知识和技能</a></li><li><a href=#建议阅读>建议阅读</a></li></ul></li><li><a href=#2-获取安装映像>2 获取安装映像</a><ul><li><a href=#21-通过-bittorrent-下载>2.1 通过 BitTorrent 下载</a></li><li><a href=#22-从镜像站下载>2.2 从镜像站下载</a></li></ul></li><li><a href=#3-验证映像>3 验证映像</a><ul><li><a href=#参考资料>参考资料</a></li></ul></li><li><a href=#4-准备安装介质>4 准备安装介质</a><ul><li><a href=#参考资料-1>参考资料</a></li></ul></li><li><a href=#5-启动到-live-环境>5 启动到 live 环境</a></li><li><a href=#7-设置终端键盘布局和字体>7 设置终端键盘布局和字体</a><ul><li><a href=#71-linux-命令简介>7.1 Linux 命令简介</a></li><li><a href=#72-设置终端键盘布局>7.2 设置终端键盘布局</a></li><li><a href=#73-设置终端字体>7.3 设置终端字体</a></li></ul></li><li><a href=#8-验证启动模式>8 验证启动模式</a></li><li><a href=#9-连接到互联网>9 连接到互联网</a></li><li><a href=#10-更新系统时间>10 更新系统时间</a></li><li><a href=#11-磁盘分区>11 磁盘分区</a><ul><li><a href=#111-全新安装-arch-linux-的磁盘分区>11.1 全新安装 Arch Linux 的磁盘分区</a></li></ul></li><li><a href=#12-分区格式化>12 分区格式化</a><ul><li><a href=#121-全新安装-arch-linux-的分区格式化>12.1 全新安装 Arch Linux 的分区格式化</a></li></ul></li><li><a href=#13-挂载分区>13 挂载分区</a><ul><li><a href=#131-全新安装-arch-linux-的挂载分区>13.1 全新安装 Arch Linux 的挂载分区</a></li></ul></li><li><a href=#14-建立交换文件>14 建立交换文件</a></li><li><a href=#15-选择软件仓库镜像>15 选择软件仓库镜像</a><ul><li><a href=#151-使用-reflector>15.1 使用 reflector</a></li><li><a href=#152-手动编辑文件>15.2 手动编辑文件</a></li></ul></li><li><a href=#16-安装基础包>16 安装基础包</a></li><li><a href=#17-fstab>17 fstab</a></li><li><a href=#18-chroot>18 chroot</a></li><li><a href=#19-时区>19 时区</a></li><li><a href=#20-本地化>20 本地化</a><ul><li><a href=#201-设置-locale>20.1 设置 locale</a></li><li><a href=#202-设置终端键盘布局和字体>20.2 设置终端键盘布局和字体</a></li></ul></li><li><a href=#21-网络配置>21 网络配置</a></li><li><a href=#22-root-密码>22 root 密码</a></li><li><a href=#23-引导加载程序>23 引导加载程序</a><ul><li><a href=#231-微码>23.1 微码</a></li><li><a href=#232-安装引导加载程序针对全新安装-arch-linux>23.2 安装引导加载程序（针对全新安装 Arch Linux）</a></li></ul></li><li><a href=#24-重新启动计算机>24 重新启动计算机</a></li><li><a href=#25-安装后的工作>25 安装后的工作</a></li></ul></nav></div></details></div><div class=post-content><h2 id=0-前言>0 前言<a hidden class=anchor aria-hidden=true href=#0-前言>#</a></h2><p>Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。</p><p>本文详细地介绍了在一台 x86-64 架构的计算机中安装 Arch Linux 的过程，尽可能遵循<a href=https://wiki.archlinux.org/title/Installation_guide>官方安装指南</a>。本文共介绍三种安装方式，它们分别是：</p><ol><li>清空磁盘并安装 Arch Linux，</li><li>在虚拟机中安装 Arch Linux，</li><li>Arch Linux 和 Windows 双系统安装。</li></ol><p>为节省篇幅，本文主要介绍第一种方式，即清空磁盘并安装 Arch Linux。后两种方式的安装过程与第一种大致相同，其差异将在专门文章中详细说明。</p><p>在动手操作之前，建议您阅读文章<a href>安装 Arch Linux 之前需要知道的事情</a>，以便对该操作系统有初步的了解。</p><p>尽管本文力图做到准确、全面和及时更新，但不能保证没有错误、疏漏和过时之处。本文的目的不是替代官方安装指南，而是通过把文档式的语言转化成教程式的语言，以降低新手安装 Arch Linux 的难度，便于 Arch Linux 乃至自由软件在简体中文世界的传播。为了获取更加可靠的信息，笔者建议您阅读每节后的“建议阅读”小节，那里提供了原始信息。</p><h2 id=1-安装要求>1 安装要求<a hidden class=anchor aria-hidden=true href=#1-安装要求>#</a></h2><p>请确保您满足以下要求。</p><h3 id=11-硬件>1.1 硬件<a hidden class=anchor aria-hidden=true href=#11-硬件>#</a></h3><ol><li>计算机：一台 x86-64 架构的计算机，至少 512 MiB 内存，2 GiB 硬盘空间，可连接到互联网；本文建议至少 4 GiB 内存，100 GiB 硬盘空间，以满足日常使用需求。</li><li>安装介质：一个 U 盘，至少 2 GiB 剩余空间。</li></ol><h3 id=12-数据备份>1.2 数据备份<a hidden class=anchor aria-hidden=true href=#12-数据备份>#</a></h3><ol><li>备份计算机中的重要数据（至少包括软件列表和配置、个人文件、收藏夹和书签）；</li><li>备份安装介质（U 盘）中的全部文件。</li></ol><h3 id=13-知识和技能>1.3 知识和技能<a hidden class=anchor aria-hidden=true href=#13-知识和技能>#</a></h3><ol><li>了解 Linux 基础知识（最好安装过新手友好的发行版，例如 Ubuntu、Linux Mint 或 Deepin）；</li><li>有动手能力和意愿；</li><li>有英语读写能力，了解获取信息和寻求帮助的途径，以便遇到问题时查阅资料或在社区提问。</li></ol><blockquote><p><strong>提示</strong></p><p>如果您想了解更多知识，欢迎阅读文章<a href>安装 Arch Linux 之前需要知道的事情</a>。</p></blockquote><h3 id=建议阅读>建议阅读<a hidden class=anchor aria-hidden=true href=#建议阅读>#</a></h3><ol><li><a href=https://wiki.archlinux.org/title/Installation_guide>官方安装指南</a>描述了安装 Arch Linux 的硬件要求。</li><li><a href=https://www.archlinuxcn.org/>Arch Linux 中文社区</a>编译的<a href=https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97>简体中文版安装指南</a>可作为官方安装指南的补充。</li><li><a href=https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md>提问的智慧</a>帮助您更有效地在社区提问。</li><li><a href=https://wiki.archlinuxcn.org/wiki/Project:Arch_Linux_%E4%B8%AD%E6%96%87%E7%A4%BE%E5%8C%BA%E4%BA%A4%E6%B5%81%E7%BE%A4%E6%8C%87%E5%BC%95>Arch Linux 中文社区交流群指引</a>介绍了加入 Arch Linux 中文社区交流群的方法以及群组规则。</li></ol><h2 id=2-获取安装映像>2 获取安装映像<a hidden class=anchor aria-hidden=true href=#2-获取安装映像>#</a></h2><p>安装映像是一个 <code>.iso</code> 文件，将其写入到安装介质（如 U 盘）上，便可作为 live 系统启动。live 系统无需被安装到硬盘上即可在计算机上启动，一般用于安装操作系统（到硬盘上）或抢救操作系统。要了解 Arch Linux 提供的 live 系统中包含的软件包列表，请查看 <a href=https://geo.mirror.pkgbuild.com/iso/latest/arch/pkglist.x86_64.txt>pkglist.x86_64.txt</a>。</p><p>要获取安装映像，请前往<a href=https://archlinux.org/download/>下载页面</a>，选择一种方式，下载文件 <code>archlinux-&lt;映像发布日期>-x86_64.iso</code>。该文件每月（通常是 1 日）更新一次，请确保您下载的是最新的版本。</p><p><a href=https://archlinux.org/download/>https://archlinux.org/download/</a></p><p>建议的下载方式有以下两种：</p><ol><li>通过 BitTorrent 下载；</li><li>从镜像站下载。</li></ol><h3 id=21-通过-bittorrent-下载>2.1 通过 BitTorrent 下载<a hidden class=anchor aria-hidden=true href=#21-通过-bittorrent-下载>#</a></h3><p>如果您要通过 BitTorrent 下载，请点击下载页面中的链接 <a href=https://archlinux.org/releng/releases/2025.10.01/torrent/>Torrent for &lt;映像发布日期></a>，下载种子文件，然后用支持 BitTorrent 协议的下载工具打开该种子文件，并开始下载映像。</p><blockquote><p><strong>注意</strong></p><p>本文中的种子文件下载链接可能不是最新的，请前往下载页面获取最新的链接。</p></blockquote><h3 id=22-从镜像站下载>2.2 从镜像站下载<a hidden class=anchor aria-hidden=true href=#22-从镜像站下载>#</a></h3><p>如果您要从镜像站下载，请在下载页面中选择一个合适的镜像站，选择的首要标准是地理距离。</p><p>如果您在中国内地，建议选择以下镜像站之一。</p><ul><li><a href=https://mirrors.bfsu.edu.cn/archlinux/iso/latest/>北京外国语大学开源软件镜像站</a></li><li><a href=https://mirror.sjtu.edu.cn/archlinux/iso/latest/>上海交通大学开源软件镜像站</a></li><li><a href=https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/>清华大学开源软件镜像站</a></li><li><a href=https://mirrors.ustc.edu.cn/archlinux/iso/latest/>中国科学技术大学开源软件镜像</a></li></ul><p>如果您在境外，建议选择离您最近的镜像站，或前往官方镜像站 <a href=https://geo.mirror.pkgbuild.com/iso/latest/>pkgbuild.com</a>。</p><p>点击镜像站链接后，出现与下面类似的文件列表。</p><pre tabindex=0><code>../
arch/                                              01-Oct-2025 16:11                   -
archlinux-2025.10.01-x86_64.iso                    01-Oct-2025 16:11          1519419392
archlinux-2025.10.01-x86_64.iso.sig                01-Oct-2025 16:11                 141
archlinux-2025.10.01-x86_64.iso.torrent            01-Oct-2025 16:11               81826
archlinux-bootstrap-2025.10.01-x86_64.tar.zst      01-Oct-2025 16:11           144688823
archlinux-bootstrap-2025.10.01-x86_64.tar.zst.sig  01-Oct-2025 16:11                 141
archlinux-bootstrap-x86_64.tar.zst                 01-Oct-2025 16:11           144688823
archlinux-bootstrap-x86_64.tar.zst.sig             01-Oct-2025 16:11                 141
archlinux-x86_64.iso                               01-Oct-2025 16:11          1519419392
archlinux-x86_64.iso.sig                           01-Oct-2025 16:11                 141
b2sums.txt                                         01-Oct-2025 16:11                 654
sha256sums.txt                                     01-Oct-2025 16:11                 398
</code></pre><p>其中，文件 <code>archlinux-2025.10.01-x86_64.iso</code> 即为我们需要的安装映像，点击文件名即可开始下载。</p><h2 id=3-验证映像>3 验证映像<a hidden class=anchor aria-hidden=true href=#3-验证映像>#</a></h2><p>为确保映像文件在下载过程中没有损坏，需要计算下载文件的 SHA256 校验和，并与下载页面中给出的校验和比对。</p><p>请在 Windows 系统中，打开映像所在的文件夹，鼠标移动到文件夹空白处，按下 <code>Shift+右键</code>，再点击“在此处打开 PowerShell 窗口”。在打开的 PowerShell 窗口中，输入以下命令，并按下 <code>Enter</code> 以执行命令。</p><blockquote><p><strong>注意</strong></p><p>命令中的 <code>#</code>，表示从该字符到行末的所有文字均为注释，注释不是命令的一部分。</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>certutil</span> <span class=n>-hashfile</span> <span class=p>.\</span><span class=n>archlinux</span><span class=p>-</span><span class=mf>2024.11</span><span class=p>.</span><span class=mf>01</span><span class=n>-x86_64</span><span class=p>.</span><span class=py>iso</span> <span class=n>SHA256</span>    <span class=c># 请将“2024.11.01”替换为您下载的映像文件名中的日期。</span>
</span></span></code></pre></div><p>这个命令使用了 Windows 系统自带的 <code>certutil</code> 程序的 <code>-hashfile</code> 选项，以计算工作文件夹（<code>.\</code>）中的文件 <code>archlinux-2024.11.01-x86_64.iso</code> 的 SHA256 校验和。其输出是这样的：</p><pre tabindex=0><code></code></pre><p>请在下载页面中找到“Checksums and signatures（校验和与签名）”部分，查看其中的 SHA256 校验和。如果该值与上述命令输出的校验和相同，说明映像没有损坏；如果不同，说明映像损坏，请重新下载。</p><blockquote><p><strong>提示</strong></p><p>2024 年 11 月 ISO 映像的 SHA256 校验和是</p><pre tabindex=0><code>86bde4fa571579120190a0946d54cd2b3a8bf834ef5c95ed6f26fbb59104ea1d  archlinux-2025.10.01-x86_64.iso
</code></pre></blockquote><h3 id=参考资料>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料>#</a></h3><ol><li><a href=https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/certutil#-hashfile>certutil 程序介绍</a></li></ol><h2 id=4-准备安装介质>4 准备安装介质<a hidden class=anchor aria-hidden=true href=#4-准备安装介质>#</a></h2><blockquote><p><strong>警告</strong></p><p>继续操作将清空 U 盘中全部数据，请提前作好备份。</p></blockquote><p><a href=https://www.ventoy.net/cn/index.html>Ventoy</a> 是一个制作可启动 U 盘的开源软件。使用 Ventoy，无需反复格式化 U 盘，只需将映像复制到 U 盘中即可启动。请按以下步骤，利用 Ventoy 制作安装介质。</p><p>首先，前往 <a href=https://www.ventoy.net/cn/download.html>Ventoy 下载页面</a>，下载 <code>ventoy-1.0.99-windows.zip</code>，并核验 SHA256 校验值。</p><blockquote><p><strong>提示</strong></p><p>在 Ventoy 下载页面中直接点击文件名将会跳转到 GitHub，而 GitHub 在中国内地连接不稳定。如果无法下载，请通过以下镜像站或云存储服务器下载。</p><ol><li><a href=https://github.com/ventoy/Ventoy/releases>GitHub</a></li><li><a href=https://gitee.com/longpanda/Ventoy/releases>Gitee</a></li><li><a href=https://mirrors.nju.edu.cn/github-release/ventoy/Ventoy/>南京大学开源镜像站</a></li><li><a href=https://mirrors.sdu.edu.cn/github-release/ventoy_Ventoy/>山东大学镜像站</a></li><li><a href=https://www.lanzoui.com/b01bd54gb>蓝奏云</a></li><li><a href=https://www.123pan.com/s/rjSKVv-8YtN>123 云盘</a>（提取码：vtoy）</li><li><a href=https://pan.baidu.com/s/1UzHMzn6SToxHRYw7HR16_w>百度网盘</a>（提取码：vtoy）</li></ol></blockquote><p>其次，解压缩下载的 <code>.zip</code> 文件，并运行 <code>Ventoy2Disk.exe</code>。</p><p>然后，把您的 U 盘插入计算机，在 Ventoy 程序窗口中选择您的 U 盘，并点击“安装”。</p><p>最后，把安装映像复制到 U 盘中即可。</p><h3 id=参考资料-1>参考资料<a hidden class=anchor aria-hidden=true href=#参考资料-1>#</a></h3><ol><li><a href=https://www.ventoy.net/cn/doc_start.html>Ventoy 使用说明</a></li></ol><h2 id=5-启动到-live-环境>5 启动到 live 环境<a hidden class=anchor aria-hidden=true href=#5-启动到-live-环境>#</a></h2><p>准备工作完成之后，可以启动到 live 环境了。</p><p>请找到您电脑的启动快捷键，插入 U 盘，重启电脑，反复按该按键，直到出现启动列表，随后选择您的 U 盘。在弹出的 Ventoy 界面中，选择您刚刚下载的镜像名称项，再选择 <code>Boot in normal mode</code>。在随后弹出的 GRUB 引导界面中，选择第一项 <code>Arch Linux install medium (x86_64, UEFI)</code></p><p>耐心等待 live 系统启动，如果输出以下字符，说明 live 环境启动成功。</p><pre tabindex=0><code>Arch Linux 6.x.x-arch1-1 (tty1)

archiso login: root (automatic login)

To install Arch Linux follow the installation guide:
https://wiki.archlinux.org/title/Installation_guide

...
</code></pre><p>从现在开始，安装过程将在终端中进行。请做好准备，耐心而谨慎地键入命令。只要您按照指导一步步完成，就能走到最后的终点。</p><h2 id=7-设置终端键盘布局和字体>7 设置终端键盘布局和字体<a hidden class=anchor aria-hidden=true href=#7-设置终端键盘布局和字体>#</a></h2><h3 id=71-linux-命令简介>7.1 Linux 命令简介<a hidden class=anchor aria-hidden=true href=#71-linux-命令简介>#</a></h3><p>在安装之前需要先介绍一下 Linux 命令的语法。最简单的 Linux 命令由命令、选项和参数组成。一个命令就像一个祈使句，由谓语、状语和宾语组成，只不过语序有所变化，而且选项要前面用“-”标注。我们以祈使句“快速地吃米饭”举一个例子。在这个句子中，谓语是“吃”，状语是“快速地”，宾语是“米饭”。把这个句子写成命令的形式就是这样的</p><pre tabindex=0><code>吃 -快速地 米饭
</code></pre><p>我们列个表格以便展示二者的对应关系：</p><table><thead><tr><th style=text-align:center>命令</th><th style=text-align:center>-选项</th><th style=text-align:center>参数</th></tr></thead><tbody><tr><td style=text-align:center>谓语</td><td style=text-align:center>-状语</td><td style=text-align:center>宾语</td></tr><tr><td style=text-align:center>吃</td><td style=text-align:center>-快速地</td><td style=text-align:center>米饭</td></tr></tbody></table><p>请记住下列语法，更多的知识请参阅鸟哥私房菜。</p><pre tabindex=0><code>命令 -选项 参数
</code></pre><h3 id=72-设置终端键盘布局>7.2 设置终端键盘布局<a hidden class=anchor aria-hidden=true href=#72-设置终端键盘布局>#</a></h3><p>默认键盘布局是美式键盘，您可以使用以下命令列出可用的键盘布局。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># ls /usr/share/kbd/keymaps/**/*.map.gz</span>
</span></span></code></pre></div><p>ls 可能是 Linux 中最常用的命令。关于 Linux 常用命令的学习，请参阅鸟哥私房菜。</p><p>您可以使用 loadkeys 命令 设置键盘布局。例如，如下命令将键盘布局设置为 Dvorak 布局。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># loadkeys dvorak</span>
</span></span></code></pre></div><h3 id=73-设置终端字体>7.3 设置终端字体<a hidden class=anchor aria-hidden=true href=#73-设置终端字体>#</a></h3><p>如果您的屏幕分辨率较高，您会发现终端显示字体较小。这时需要设置终端字体，把字号调大。我们使用 setfont 命令 设置。这个命令没有选项，只需要输入命令和参数，如</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>setfont 字体名
</span></span></code></pre></div><p>分辨率为 1080p 的屏幕，建议选择字体 ter-122b，分辨率更高的屏幕，可以在 ter-124b，ter-128b，ter-132b 中选择一个，例如</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># setfont ter-132b</span>
</span></span></code></pre></div><p>建议您记住刚刚选择的字体，配置系统时会用到。</p><h2 id=8-验证启动模式>8 验证启动模式<a hidden class=anchor aria-hidden=true href=#8-验证启动模式>#</a></h2><p>本文开始时提到，您的电脑必须在 UEFI 模式下启动，现在验证您的启动模式。</p><p>请输入如下命令（注意：使用Tab键可以自动补全）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># cat /sys/firmware/efi/fw_platform_size</span>
</span></span></code></pre></div><p>如果返回 64，那么系统以 UEFI 模式启动，并且有 64 位 UEFI。如果返回 32，那么系统以 UEFI 模式启动，但是只能使用 GRUB 作为引导加载程序。如果这个文件不存在，系统可能以 BIOS 模式启动。</p><p>处于 BIOS 启动模式的读者，可以自行进入 BIOS 页面更改启动模式。如果无法更改，说明您的电脑过于老旧，本文无法指导您继续安装。请您参考其他教程，例如</p><h2 id=9-连接到互联网>9 连接到互联网<a hidden class=anchor aria-hidden=true href=#9-连接到互联网>#</a></h2><p>Arch Linux 镜像只提供一个基本的安装环境，软件包仍需要连接互联网后下载。连接互联网有多种方式，包括</p><ul><li>有线连接</li><li>WiFi 连接</li><li>手机 USB 网络共享（仅限 Android 手机）</li></ul><p>笔者建议读者优先使用有线连接和手机 USB 网络共享的方式连接互联网。</p><p>连接互联网的步骤如下：</p><ul><li>检查确保网络接口已经启用。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># ip link</span>
</span></span></code></pre></div><p>您应该在输出中看到 enp0s3 或 wlan0 之类的字样，这就是您的网络接口名称，例如</p><pre tabindex=0><code>2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000 ...
</code></pre><p>尖括号内的 <code>UP</code>，表示接口已经启用。如果没有出现 <code>UP</code>，使用如下命令启用该接口 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># ip link set &lt;网络接口名称&gt; up    # 请将“&lt;网络接口名称&gt;”替换成您的网络接口名称，如“enp0s3”或“wlan0”</span>
</span></span></code></pre></div><ul><li>使用无线连接的读者，使用 rfkill 命令确认无线网卡没有被屏蔽。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># rfkill</span>
</span></span><span class=line><span class=cl>ID TYPE      DEVICE      SOFT      HARD
</span></span><span class=line><span class=cl> <span class=m>0</span> bluetooth hci0   unblocked unblocked
</span></span><span class=line><span class=cl> <span class=m>1</span> wlan      phy0   unblocked unblocked
</span></span></code></pre></div><p>如果无线网卡被硬件屏蔽，请使用硬件开关启用它；如果被软件屏蔽，请输入如下命令启用它。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># rfkill unblock wlan</span>
</span></span></code></pre></div><ul><li>选择有线连接的读者，只需要将网线插到电脑相应接口即可连接。选择手机 USB 网络共享的读者，将手机和电脑用数据线连接，然后在手机通知栏中选择“USB 网络共享”即可连接。以下详细介绍连接 WiFi 的方法。</li></ul><ol><li>请使用 iwctl 命令 连接互联网，如下</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># iwctl</span>
</span></span><span class=line><span class=cl>NetworkConfigurationEnabled: disabled
</span></span><span class=line><span class=cl>StateDirectory: /var/lib/iwd
</span></span><span class=line><span class=cl>Version: 2.x
</span></span><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1>#</span>
</span></span></code></pre></div><p>如果您看到上述输出，说明您已经进入了 iwd 程序环境。这时读者可能会觉得陌生，因为通常的命令下达后会直接输出结果，并返回命令提示符，等待下一个命令的输入。而这个命令不同，下达之后进入了程序环境，用户只能与该程序交互，这一点请初学者牢记。关于程序工作环境的更多例子，请参阅鸟哥私房菜。若想退出 iwd 程序环境，只需要输入 quit 即可。</p><p>请继续输入命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1># device list</span>
</span></span><span class=line><span class=cl>                       Devices
</span></span><span class=line><span class=cl>------------------------------------------------------
</span></span><span class=line><span class=cl>Name   Address            Powered  Adapter  Mode
</span></span><span class=line><span class=cl>------------------------------------------------------
</span></span><span class=line><span class=cl>wlan0  xx:xx:xx:xx:xx:xx  on       phy0     station
</span></span></code></pre></div><p>请记住上述输出的设备名称（在 Name 下面），这里以 wlan0 为例，请将 wlan0 替换成您的设备名称。</p><p>继续输入命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1># station wlan0 scan  # 扫描网络，请将 wlan0 换成您的设备名称</span>
</span></span><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1># station wlan0 get-networks  # 输出扫描结果，请将 wlan0 换成您的设备名称</span>
</span></span><span class=line><span class=cl>         Available Networks
</span></span><span class=line><span class=cl>------------------------------------
</span></span><span class=line><span class=cl>Network name    Security    Signal
</span></span><span class=line><span class=cl>------------------------------------
</span></span><span class=line><span class=cl>mySSID          psk         ****
</span></span></code></pre></div><p>请记住您的网络名称（在 Network name 下面），这里以 mySSID 为例，请将 mySSID 换成您的网络名称。</p><p>继续输入命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1># station wlan0 connect &#34;mySSID&#34;  # 连接网络，请将 wlan0 换成您的设备名称，mySSID 换成您的网络名称</span>
</span></span><span class=line><span class=cl>Type the network passphrase <span class=k>for</span> mySSID psk.
</span></span><span class=line><span class=cl>Passphrase: ********  <span class=c1># 输入密码</span>
</span></span><span class=line><span class=cl><span class=o>[</span>iwd<span class=o>]</span><span class=c1># quit  # 退出 iwd 程序环境</span>
</span></span></code></pre></div><ol start=2><li>这时您应该已经连接上互联网了，请使用 ping 命令测试网络（使用 Ctrl+C 中止命令）。</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># ping archlinux.org</span>
</span></span><span class=line><span class=cl>PING archlinux.org <span class=o>(</span>95.217.163.246<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from archlinux.org <span class=o>(</span>95.217.163.246<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>47</span> <span class=nv>time</span><span class=o>=</span><span class=m>201</span> ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from archlinux.org <span class=o>(</span>95.217.163.246<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>2</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>47</span> <span class=nv>time</span><span class=o>=</span><span class=m>218</span> ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from archlinux.org <span class=o>(</span>95.217.163.246<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>3</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>47</span> <span class=nv>time</span><span class=o>=</span><span class=m>194</span> ms
</span></span><span class=line><span class=cl>^C  <span class=c1># 使用 Ctrl+C 中止命令</span>
</span></span><span class=line><span class=cl>--- archlinux.org ping statistics ---
</span></span><span class=line><span class=cl><span class=m>3</span> packets transmitted, <span class=m>3</span> received, 0% packet loss, <span class=nb>time</span> <span class=m>2001</span> ms
</span></span><span class=line><span class=cl>rtt min/avg/max/mdev <span class=o>=</span> 194.013/204.384/217.666/9.873 ms
</span></span></code></pre></div><p>如果出现上述结果，说明网络连接成功。如果无法连接 WiFi，请按照 ArchWiki 检查互联网连接。由于驱动不匹配，有些电脑可能无法连接 WiFi，只能使用有线连接或手机 USB 网络共享。</p><ol start=3><li>若要排查网络连接问题，请先确保你满足了以下要求。<ol><li>你的网络接口可见并已启用。否则请检查设备驱动－请查阅 网络配置/以太网 - Arch Linux 中文维基 或 网络配置/无线网络配置 - Arch Linux 中文维基 页面。</li><li>你已连接到网络。网线已接好或者已经连接到无线局域网。</li><li>你的网络接口拥有一个 IP 地址。</li><li>你的路由表设置正确。</li><li>你可以 ping 通一个本地 IP 地址（例如你的默认网关）。</li><li>你可以 ping 通一个公网 IP 地址（例如 9.9.9.9，即 Quad9 的 DNS 服务器）。</li><li>检查是否能解析域名（例如 archlinux.org）。</li></ol></li></ol><h2 id=10-更新系统时间>10 更新系统时间<a hidden class=anchor aria-hidden=true href=#10-更新系统时间>#</a></h2><p>在互联网连接之后，systemd-timesyncd 服务将自动校准系统时间。请输入如下命令确定时间的准确性。设置时间的目的之一是便于安装软件包时验证签名。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># timedatectl</span>
</span></span></code></pre></div><p>时间可能以 UTC 时区显示，比北京时间慢 8 小时。这是正常现象，无需调整。</p><p>如果时间不准确，请使用 date 命令手动设置时间。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># date MMDDhhmmYY  # 如 date 1231080023 可以将时间设定为 2023 年 12 月 31 日 08:00</span>
</span></span></code></pre></div><h2 id=11-磁盘分区>11 磁盘分区<a hidden class=anchor aria-hidden=true href=#11-磁盘分区>#</a></h2><blockquote><p><strong>注意</strong></p><ol><li>从未进行过磁盘分区操作的读者请先在虚拟机内练习</li><li>请您务必提前备份好重要资料</li><li>请您确保知晓命令的含义，并正确输入命令，否则有可能造成数据丢失</li></ol></blockquote><h3 id=111-全新安装-arch-linux-的磁盘分区>11.1 全新安装 Arch Linux 的磁盘分区<a hidden class=anchor aria-hidden=true href=#111-全新安装-arch-linux-的磁盘分区>#</a></h3><blockquote><p><strong>注意</strong></p><p>继续操作将清除硬盘内全部数据。如果您想保留数据和已有的 Windows 系统，请看第 11.2 节。</p></blockquote><p>磁盘分区表</p><table><thead><tr><th style=text-align:center>挂载点</th><th style=text-align:center>分区</th><th style=text-align:center>分区类型</th><th style=text-align:center>建议大小</th><th style=text-align:center>备注</th></tr></thead><tbody><tr><td style=text-align:center>/mnt/boot</td><td style=text-align:center>/dev/sda1 或/dev/nvme0n1p1</td><td style=text-align:center>EFI System</td><td style=text-align:center>512 MiB</td><td style=text-align:center>ESP 分区</td></tr><tr><td style=text-align:center>/mnt</td><td style=text-align:center>/dev/sda2 或/dev/nvme0n1p2</td><td style=text-align:center>Linux x86-64 root</td><td style=text-align:center>100 GiB（至少 50 GiB）</td><td style=text-align:center>Arch Linux 的根分区</td></tr><tr><td style=text-align:center>/mnt/home</td><td style=text-align:center>/dev/sda3 或/dev/nvme0n1p3</td><td style=text-align:center>Linux home</td><td style=text-align:center>剩余磁盘空间</td><td style=text-align:center>Arch Linux 的 home 分区</td></tr></tbody></table><p>首先使用 <code>lsblk</code> 或 <code>fdisk -l</code> 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># lsblk</span>
</span></span><span class=line><span class=cl>----
</span></span><span class=line><span class=cl>NAME           MAJ:MIN  RM    SIZE  RO  TYPE  MOUNTPOINT
</span></span><span class=line><span class=cl>loop0            7:0     <span class=m>0</span>  688.2M   <span class=m>1</span>  loop  /run/archiso/airootfs    <span class=c1># loop0 可以忽略</span>
</span></span><span class=line><span class=cl>sda              8:0     <span class=m>0</span>  931.5G   <span class=m>0</span>  disk    <span class=c1># sda 是要安装 Arch Linux 的硬盘，请记住设备名</span>
</span></span><span class=line><span class=cl>├─sda1           8:1     <span class=m>0</span>    512M   <span class=m>0</span>  part
</span></span><span class=line><span class=cl>└─sda2           8:2     <span class=m>0</span>    931G   <span class=m>0</span>  part
</span></span><span class=line><span class=cl>sdb              8:16    <span class=m>1</span>   59.8G   <span class=m>0</span>  disk    <span class=c1># sdb 是 U 盘，请忽略</span>
</span></span><span class=line><span class=cl>├─sdb1           8:17    <span class=m>1</span>   59.7G   <span class=m>0</span>  part
</span></span><span class=line><span class=cl>│   └ventoy    254:0     <span class=m>0</span>  861.3M   <span class=m>1</span>  dm    /run/archiso/bootmnt
</span></span><span class=line><span class=cl>└─sdb2           8:18    <span class=m>1</span>     32M   <span class=m>0</span>  part
</span></span></code></pre></div><p>在上面的例子中，以 rom、loop、airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。找到要进行分区的设备之后，请记住设备名（本文以 /dev/sda 为例，您的硬盘也可能是 /dev/nvme0n1）。</p><p>我们使用的分区工具是 fdisk ，首先让我们通过查看帮助，学习一下 fdisk 的用法。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># fdisk /dev/sda  # 输入 fdisk 设备名，进入 fdisk 操作环境</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Welcome to fdisk <span class=o>(</span>util-linux 2.x<span class=o>)</span>.
</span></span><span class=line><span class=cl>Changes will remain in memory only, <span class=k>until</span> you decide to write them.
</span></span><span class=line><span class=cl>Be careful before using the write command.  <span class=c1># 执行写入命令（w）之前，硬盘不会被改动</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: m  <span class=c1># 输入 m 获取帮助</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Help:
</span></span><span class=line><span class=cl>  …
</span></span><span class=line><span class=cl>  Generic
</span></span><span class=line><span class=cl>   d   delete a partition  <span class=c1># 输入 d 删除分区</span>
</span></span><span class=line><span class=cl>   n   add a new partition  <span class=c1># 输入 n 创建分区</span>
</span></span><span class=line><span class=cl>   p   print the partition table  <span class=c1># 输入 p 打印分区表</span>
</span></span><span class=line><span class=cl>   t   change a partition <span class=nb>type</span>  <span class=c1># 输入 t 改变分区类型</span>
</span></span><span class=line><span class=cl>  …
</span></span><span class=line><span class=cl>  Save <span class=p>&amp;</span> Exit
</span></span><span class=line><span class=cl>   w   write table to disk and <span class=nb>exit</span>  <span class=c1># 输入 w 写入并退出（写入后不可撤销，请谨慎使用）</span>
</span></span><span class=line><span class=cl>   q   quit without saving changes  <span class=c1># 输入 q 不保存退出</span>
</span></span><span class=line><span class=cl>  …
</span></span><span class=line><span class=cl>  Create a new label
</span></span><span class=line><span class=cl>   g   create a new empty GPT partition table  <span class=c1># 输入 g 创建 GPT 分区表</span>
</span></span><span class=line><span class=cl>  …
</span></span></code></pre></div><p>现在请输入 <code>Ctrl+C</code>，退出 fdisk 操作环境。</p><p>我们现在正式进行磁盘分区。首先需要创建 GPT 分区表；随后依次创建分区，并修改分区类型；最后保存并退出。请参考以下分区过程，按照您的分区方案进行分区。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># fdisk /dev/sda  # 请将 sda 更换为您的设备名，如 nvme0n1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Welcome to fdisk <span class=o>(</span>util-linux 2.x<span class=o>)</span>.
</span></span><span class=line><span class=cl>Changes will remain in memory only, <span class=k>until</span> you decide to write them.
</span></span><span class=line><span class=cl>Be careful before using the write command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: g  <span class=c1># 输入 g 创建新的 GPT 分区表（请勿遗忘此步，否则您的硬盘将是 MBR 格式）</span>
</span></span><span class=line><span class=cl>Created a new GPT disklabel <span class=o>(</span>GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx<span class=o>)</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: n  <span class=c1># 输入 n 创建新的分区，这个分区将是 EFI 分区</span>
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>1-128, default 1<span class=o>)</span>:  <span class=c1># 分区编号保持默认，直接按 Enter</span>
</span></span><span class=line><span class=cl>First sector <span class=o>(</span>2048-125829086, default 2048<span class=o>)</span>:  <span class=c1># 第一个扇区，保持默认</span>
</span></span><span class=line><span class=cl>Last sector, +/-sectors or +/-size<span class=o>{</span>K,M,G,T,P<span class=o>}</span> <span class=o>(</span>2048-125829086, default 125827071<span class=o>)</span>: +512M  <span class=c1># 创建 512MiB 大小的分区</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Created a new partition <span class=m>1</span> of <span class=nb>type</span> <span class=s1>&#39;Linux filesystem&#39;</span> and of size <span class=m>512</span> MiB.
</span></span><span class=line><span class=cl>Partition <span class=c1>#1 contains a vfat signature.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Do you want to remove the signature? <span class=o>[</span>Y<span class=o>]</span>es/<span class=o>[</span>N<span class=o>]</span>o: Y  <span class=c1># 清除已有的签名，如果是全新的硬盘，则没有此步</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>The signature will be removed by a write command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: t  <span class=c1># 输入 t 改变分区类型，请勿遗忘此步</span>
</span></span><span class=line><span class=cl>Selected partition <span class=m>1</span>
</span></span><span class=line><span class=cl>Partition <span class=nb>type</span> or <span class=nb>alias</span> <span class=o>(</span><span class=nb>type</span> L to list all<span class=o>)</span>: <span class=m>1</span>  <span class=c1># 输入 1 代表 EFI 类型</span>
</span></span><span class=line><span class=cl>Changed <span class=nb>type</span> of partition <span class=s1>&#39;Linux filesystem&#39;</span> to <span class=s1>&#39;EFI System&#39;</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: n  <span class=c1># 创建第二个分区，用作根分区</span>
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>2-128, default 2<span class=o>)</span>:   <span class=c1># 保持默认</span>
</span></span><span class=line><span class=cl>First sector <span class=o>(</span>1050624-125829086, default 1050624<span class=o>)</span>:   <span class=c1># 保持默认</span>
</span></span><span class=line><span class=cl>Last sector, +/-sectors or +/-size<span class=o>{</span>K,M,G,T,P<span class=o>}</span> <span class=o>(</span>1050624-125829086, default 125827071<span class=o>)</span>: +100G  <span class=c1># 创建 100 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Created a new partition <span class=m>2</span> of <span class=nb>type</span> <span class=s1>&#39;Linux filesystem&#39;</span> and of size <span class=m>100</span> GiB.
</span></span><span class=line><span class=cl>Partition <span class=c1>#2 contains a ntfs signature.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Do you want to remove the signature? <span class=o>[</span>Y<span class=o>]</span>es/<span class=o>[</span>N<span class=o>]</span>o: Y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>The signature will be removed by a write command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: t  <span class=c1># 输入 t 改变分区类型，请勿遗忘此步</span>
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>1-2, default 2<span class=o>)</span>:   <span class=c1># 保持默认</span>
</span></span><span class=line><span class=cl>Partition <span class=nb>type</span> or <span class=nb>alias</span> <span class=o>(</span><span class=nb>type</span> L to list all<span class=o>)</span>: <span class=m>23</span>  <span class=c1># 输入 23 代表 Linux root (x86-64) 类型</span>
</span></span><span class=line><span class=cl>Changed <span class=nb>type</span> of partition <span class=s1>&#39;Linux filesystem&#39;</span> to <span class=s1>&#39;Linux root (x86-64)&#39;</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: n  <span class=c1># 创建第三个分区，用作 home 分区</span>
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>3-128, default 3<span class=o>)</span>:   <span class=c1># 保持默认</span>
</span></span><span class=line><span class=cl>First sector <span class=o>(</span>42993664-125829086, default 42993664<span class=o>)</span>:   <span class=c1># 保持默认</span>
</span></span><span class=line><span class=cl>Last sector, +/-sectors or +/-size<span class=o>{</span>K,M,G,T,P<span class=o>}</span> <span class=o>(</span>42993664-125829086, default 125827071<span class=o>)</span>:   <span class=c1>#保持默认，将剩余空间全部分给 home 分区</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Created a new partition <span class=m>3</span> of <span class=nb>type</span> <span class=s1>&#39;Linux filesystem&#39;</span> and of size 39.5 GiB.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: t  <span class=c1># 输入 t 改变分区类型</span>
</span></span><span class=line><span class=cl>Partition number <span class=o>(</span>1-3, default 3<span class=o>)</span>:
</span></span><span class=line><span class=cl>Partition <span class=nb>type</span> or <span class=nb>alias</span> <span class=o>(</span><span class=nb>type</span> L to list all<span class=o>)</span>: <span class=m>42</span>  <span class=c1># 输入 42 代表 Linux home 类型</span>
</span></span><span class=line><span class=cl>Changed <span class=nb>type</span> of partition <span class=s1>&#39;Linux filesystem&#39;</span> to <span class=s1>&#39;Linux home&#39;</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: p  <span class=c1># 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出</span>
</span></span><span class=line><span class=cl>Disk /dev/sda: <span class=m>60</span> GiB, <span class=m>64424509440</span> bytes, <span class=m>125829120</span> sectors
</span></span><span class=line><span class=cl>Disk model: xxx
</span></span><span class=line><span class=cl>Units: sectors of <span class=m>1</span> * <span class=nv>512</span> <span class=o>=</span> <span class=m>512</span> bytes
</span></span><span class=line><span class=cl>Sector size <span class=o>(</span>logical/physical<span class=o>)</span>: <span class=m>512</span> bytes / <span class=m>4096</span> bytes
</span></span><span class=line><span class=cl>I/O size <span class=o>(</span>minimum/optimal<span class=o>)</span>: <span class=m>4096</span> bytes / <span class=m>4096</span> bytes
</span></span><span class=line><span class=cl>Disklabel type: gpt
</span></span><span class=line><span class=cl>Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Device        Start        End   Sectors   Size  Type
</span></span><span class=line><span class=cl>/dev/sda1      <span class=m>2048</span>    <span class=m>1050623</span>   <span class=m>1048576</span>   512M  EFI System
</span></span><span class=line><span class=cl>/dev/sda2   <span class=m>1050624</span>   <span class=m>42993663</span>  <span class=m>41943040</span>   100G  Linux root <span class=o>(</span>x86-64<span class=o>)</span>
</span></span><span class=line><span class=cl>/dev/sda3  <span class=m>42993664</span>  <span class=m>125827071</span>  <span class=m>82833408</span>  39.5G  Linux home
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Filesystem/RAID signature on partition <span class=m>1</span> will be wiped.
</span></span><span class=line><span class=cl>Filesystem/RAID signature on partition <span class=m>2</span> will be wiped.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Command <span class=o>(</span>m <span class=k>for</span> <span class=nb>help</span><span class=o>)</span>: w  <span class=c1># 输入 w 写入分区表，该操作不可恢复</span>
</span></span><span class=line><span class=cl>The partition table has been altered.
</span></span><span class=line><span class=cl>Calling ioctl<span class=o>()</span> to re-read partition table.
</span></span><span class=line><span class=cl>Syncing disks.
</span></span></code></pre></div><h2 id=12-分区格式化>12 分区格式化<a hidden class=anchor aria-hidden=true href=#12-分区格式化>#</a></h2><p>创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4、btrfs、xfs 等。建议第一次安装的读者使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。</p><h3 id=121-全新安装-arch-linux-的分区格式化>12.1 全新安装 Arch Linux 的分区格式化<a hidden class=anchor aria-hidden=true href=#121-全新安装-arch-linux-的分区格式化>#</a></h3><blockquote><p><strong>注意</strong></p><p>如果您希望 Arch Linux 与 Windows 系统共存，请直接跳到下一小节。</p></blockquote><p>使用 <code>mkfs.fat</code> 将您的 EFI 分区格式化为 FAT32 文件系统。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mkfs.fat -F 32 /dev/sda1</span>
</span></span></code></pre></div><p>使用 mkfs.ext4 将您的根分区格式化为 ext4 文件系统。请将 /dev/sda2 更换为您的 root 分区名，可能是 /dev/nvme0n1p2。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mkfs.ext4 /dev/sda2</span>
</span></span></code></pre></div><p>使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 /dev/sda3 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mkfs.ext4 /dev/sda3</span>
</span></span></code></pre></div><h2 id=13-挂载分区>13 挂载分区<a hidden class=anchor aria-hidden=true href=#13-挂载分区>#</a></h2><h3 id=131-全新安装-arch-linux-的挂载分区>13.1 全新安装 Arch Linux 的挂载分区<a hidden class=anchor aria-hidden=true href=#131-全新安装-arch-linux-的挂载分区>#</a></h3><p>首先，使用 <code>mount</code> 将根分区挂载在 <code>/mnt</code> 目录下。本文假定您的根分区是 <code>/dev/sda2</code>，您的根分区也可能是 <code>/dev/nvme0n1p2</code>，请根据实际情况作替换。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mount /dev/sda2 /mnt</span>
</span></span></code></pre></div><p>随后，使用 <code>mount --mkdir</code> 创建 <code>/mnt/boot</code> 目录，并将 EFI 分区挂载在 <code>/mnt/boot</code> 目录下。请将 <code>/dev/sda1</code> 更换为您的 EFI 分区名，可能是 <code>/dev/nvme0n1p1</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mount --mkdir /dev/sda1 /mnt/boot</span>
</span></span></code></pre></div><p>此处，也可以使用 <code>/mnt/efi</code> 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。</p><p>最后，挂载 home 分区。请将 /dev/sda5 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mount --mkdir /dev/sda3 /mnt/home</span>
</span></span></code></pre></div><h2 id=14-建立交换文件>14 建立交换文件<a hidden class=anchor aria-hidden=true href=#14-建立交换文件>#</a></h2><p>交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读。</p><p>交换文件的大小是个众说纷纭的问题。笔者参考 RedHat 文档，推荐的交换文件大小见下表。笔者使用的公式是</p><p>您可以根据您的实际情况选择交换文件的大小。如果需要休眠功能，建议交换文件接近内存大小 ，可以使用笔者的推荐大小。如果您不需要休眠功能，请适当减少交换文件大小。</p><table><thead><tr><th style=text-align:center>内存大小</th><th style=text-align:center>推荐的交换文件大小（使用休眠功能）</th><th style=text-align:center>推荐的交换文件大小（不使用休眠功能）</th></tr></thead><tbody><tr><td style=text-align:center>2 GiB</td><td style=text-align:center>4096 MiB</td><td></td></tr><tr><td style=text-align:center>4 GiB</td><td style=text-align:center>5793 MiB</td><td></td></tr><tr><td style=text-align:center>8 GiB</td><td></td><td></td></tr><tr><td style=text-align:center>16 GiB</td><td></td><td></td></tr><tr><td style=text-align:center>32 GiB</td><td></td><td></td></tr><tr><td style=text-align:center>64 GiB</td><td></td><td></td></tr></tbody></table><p>4096 MiB</p><p>5793 MiB</p><p>8192 MiB</p><p>11585 MiB</p><p>16384 MiB</p><p>23170 MiB</p><p>4096 MiB</p><p>5793 MiB</p><p>8192 MiB</p><p>8192 MiB</p><p>4096 MiB</p><p>0 MiB</p><p>建立交换文件的具体操作方法如下 。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （=8192 MiB）大小的交换文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># dd if=/dev/zero of=/mnt/swapfile bs=1M count=8192 status=progress</span>
</span></span></code></pre></div><p>如果您需要创建其他大小的交换文件，请将 <code>count=</code> 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。</p><p>然后，修改权限。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># chmod 0600 /mnt/swapfile</span>
</span></span></code></pre></div><p>最后，格式化并启用交换文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># mkswap -U clear /mnt/swapfile</span>
</span></span><span class=line><span class=cl>root@archiso ~ <span class=c1># swapon /mnt/swapfile</span>
</span></span></code></pre></div><h2 id=15-选择软件仓库镜像>15 选择软件仓库镜像<a hidden class=anchor aria-hidden=true href=#15-选择软件仓库镜像>#</a></h2><p>Linux 中的软件仓库就像手机操作系统中的应用商店，Linux 的软件包是通过软件仓库进行分发的。软件仓库镜像是软件仓库的复制品，同一个软件仓库可以在世界各地建立软件仓库镜像，以便于不同地区的用户下载。因此选择一个合适的软件仓库镜像对于您更新软件包数据库和下载软件包的速度有很大影响。</p><h3 id=151-使用-reflector>15.1 使用 reflector<a hidden class=anchor aria-hidden=true href=#151-使用-reflector>#</a></h3><p>Arch Linux 提供了一个筛选软件仓库镜像的便利工具 reflector。我们使用该工具选择软件仓库镜像。首先使用 reflector 自带的帮助学习一下该软件的用法。当您遇到陌生的命令时，使用 &ndash;help 选项查看用法是一个好主意。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># reflector --help</span>
</span></span></code></pre></div><p>请仔细阅读屏幕上打印出的内容，自学是使用 Arch Linux 的必要过程。如果您看不懂，可以参考以下总结。</p><pre tabindex=0><code>用法：
reflector -选项1 -选项2 …

选项：
--save &lt;文件路径&gt;  把镜像列表保存到给定的路径
--sort {age,rate,country,score,delay}
  以给定条件给镜像排序。
  age：服务器最后同步时间；
  rate：下载速度；
  country：国家名；
  score：“镜像状态”中的得分；
  delay：“镜像状态”中的延迟
--delay n  只返回同步延迟在 n 小时之内的镜像
-a n  只返回 n 小时内同步的镜像
-c &lt;国家&gt;
-p &lt;协议&gt;
</code></pre><p>笔者推荐使用如下命令选择镜像。此命令将为您选出位于平均同步延迟在 3 小时以内的，位于中国内地的 HTTPS 镜像，并根据速度排序。指定 <code>--completion-percent 95</code>（默认为 100）的目的是防止忽略可用的镜像。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># reflector -p https -c China --delay 3 --completion-percent 95 --sort rate --save /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><p>上述命令使用了并不稳定的测速功能，如果大量报错，也可以根据得分排序。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># reflector -p https -c China --delay 3 --completion-percent 95 --sort score --save /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><p>如果您在境外，请使用 <code>reflector --list-countries</code> 查看您所在的国家名，然后自行替换选项 <code>-c</code> 后面的内容。如果国家名包含空格，请使用两字母的国家代号，或者用引号将国家名包裹起来。</p><h3 id=152-手动编辑文件>15.2 手动编辑文件<a hidden class=anchor aria-hidden=true href=#152-手动编辑文件>#</a></h3><p>您也可以手动编辑 <code>/etc/pacman.d/mirrorlist</code>。国内知名的软件仓库镜像站有清华（TUNA）和中科大（USTC），但是笔者不推荐将它们放在第一位。因为使用者过多，服务器负载过大，影响下载速度。根据下列文章，笔者推荐北外（BFSU）镜像。该镜像由清华 TUNA 协会维护，质量速度俱佳。此外，上交（SJTUG）镜像也是不错的选择。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># nano /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><pre tabindex=0><code>文件 /etc/pacman.d/mirrorlist
-----------------------------    # 以下为文件内容
Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
</code></pre><p>如果您在国外，可以选择 pkgbuild 镜像。</p><pre tabindex=0><code>文件 /etc/pacman.d/mirrorlist
-----------------------------    # 以下为文件内容
Server = https://geo.mirror.pkgbuild.com/$repo/os/$arch
</code></pre><p>随后按下 <code>Ctrl+O</code> 保存，<code>Ctrl+X</code> 退出。</p><h2 id=16-安装基础包>16 安装基础包<a hidden class=anchor aria-hidden=true href=#16-安装基础包>#</a></h2><p>终于到了安装环节。我们使用 pacstrap 安装（元）软件包 <code>base</code>、<code>linux</code>和<code>linux-firmware</code>，它们分别是 Arch Linux 基础元软件包，linux 内核和常规硬件的固件。此外，如果您使用较新（2019 年及以后生产）的笔记本电脑，则需要安装软件包 <code>sof-firmware</code>，否则可能没有声音。</p><p>Arch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核 ，但是对于新手，只推荐使用 linux 内核。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># pacstrap -K /mnt base linux linux-firmware</span>
</span></span></code></pre></div><p>此命令需要一段时间执行。执行完毕后请检查输出，不应出现任何错误（ERROR）。如果出现，请先尝试重新执行命令。如果反复报错，可以寻求他人的帮助。</p><p>如果报告“验证软件包错误”，可以尝试以下方法，然后重新安装。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># pacman-key --init  # 初始化密钥环</span>
</span></span><span class=line><span class=cl>root@archiso ~ <span class=c1># pacman-key --populate</span>
</span></span><span class=line><span class=cl>root@archiso ~ <span class=c1># pacman -Sy archlinux-keyring  # 更新 archlinux-keyring</span>
</span></span></code></pre></div><h2 id=17-fstab>17 fstab<a hidden class=anchor aria-hidden=true href=#17-fstab>#</a></h2><p><code>fstab</code> 是一个系统文件，决定了系统启动时如何自动挂载分区。没有 fstab，系统将找不到根分区，从而无法启动。fstab 有一定的格式，我们用一个例子说明该文件的格式。</p><pre tabindex=0><code>/etc/fstab
----
# &lt;device&gt;                                &lt;dir&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;fsck&gt;
UUID=0a3407de-014b-458b-b5c1-848e92a327a3 /     ext4   noatime   0      1
UUID=f9fe0b69-a280-415d-a03a-a32752370dee none  swap   defaults  0      0
UUID=b411dc99-f0a0-4c87-9e05-184977be8539 /home ext4   noatime   0      2
</code></pre><p>第一栏：设备，描述了要被挂载的块设备，推荐使用 UUID 方式，也可以使用分区标签（label）。
第二栏：文件夹，即挂载文件夹。
第三栏：类型，即文件系统类型。
第四栏：选项，即挂载选项。
第五栏：dump，用于 dump 功能决定文件系统是否需要备份，一般填 0。
第六栏：fsck，是否在启动过程中检查文件系统，对于 ext4 格式的根分区，应该填 1，其余填 0。</p><p>Arch Linux 提供了自动生成 fstab 的工具，我们利用它直接生成。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span>
</span></span></code></pre></div><p>其中 <code>genfstab -U /mnt</code> 是以 UUID 的描述方式生成 fstab。<code>>></code> 的意思是，将输出附加到指定文件之后。</p><p>生成完成后，记得使用 <code>cat</code> 命令打印文件内容，仔细检查一遍。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># cat /mnt/etc/fstab</span>
</span></span></code></pre></div><h2 id=18-chroot>18 chroot<a hidden class=anchor aria-hidden=true href=#18-chroot>#</a></h2><p>我们使用 <code>arch-chroot</code> 脚本，切换到新安装的系统，以后的操作就可以在新安装的系统中完成了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># arch-chroot /mnt</span>
</span></span></code></pre></div><h2 id=19-时区>19 时区<a hidden class=anchor aria-hidden=true href=#19-时区>#</a></h2><p>我们设置时区的软链接。在中国内地的读者请使用上海时区，在其他地区的读者可以在输入“/usr/share/zoneinfo/”之后按下 <code>Tab</code> 查看可选的时区。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span>
</span></span></code></pre></div><p>然后，设置硬件时间。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># hwclock --systohc</span>
</span></span></code></pre></div><h2 id=20-本地化>20 本地化<a hidden class=anchor aria-hidden=true href=#20-本地化>#</a></h2><p>我们将设置 locale、终端键盘布局和字体。locale 决定了系统的语言和格式，包括终端显示哪种语言，数字、时间和货币以哪国的格式显示等等。</p><h3 id=201-设置-locale>20.1 设置 locale<a hidden class=anchor aria-hidden=true href=#201-设置-locale>#</a></h3><p>首先使用包管理器 pacman 安装两个软件包。使用 pacman 安装软件包需要利用 -S (&ndash;sync) 选项，这个选项的意思是“同步的数据库”。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># pacman -S vim terminus-font</span>
</span></span></code></pre></div><p>vim 是著名的文本编辑器，而 terminus-font 是终端字体。我们输入以下命令，利用 vim 编辑 /etc/locale.gen。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># vim /etc/locale.gen</span>
</span></span></code></pre></div><p>vim 的功能十分强大，在这里只解释用到的功能，其他功能在下一篇文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。
输入 <code>/</code>，进入搜索功能，输入 <code>en_US.UTF-8</code>，我们找到了以下一行。</p><pre tabindex=0><code>#en_US.UTF-8 UTF-8
</code></pre><p>按下 <code>Enter</code>，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。</p><pre tabindex=0><code>en_US.UTF-8 UTF-8
</code></pre><p>再一次输入 <code>/</code>，进入搜索功能，输入 <code>zh_CN.UTF-8</code>，按下 <code>Enter</code>。按方向左键，再输入 <code>x</code>，将“#”删除。</p><pre tabindex=0><code>zh_CN.UTF-8 UTF-8
</code></pre><p>随后输入 <code>:</code>，进入命令模式，输入 <code>wq</code>，按下 <code>Enter</code>，保存并退出 vim 软件环境。</p><p>接下来，输入如下命令，生成 locale。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># locale-gen</span>
</span></span></code></pre></div><p>我们再使用 vim 创建并编辑 <code>locale.conf</code>，设置 locale。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># vim /etc/locale.conf</span>
</span></span></code></pre></div><p>这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下 <code>i</code>，进入插入模式。请输入如下字符。</p><pre tabindex=0><code>LANG=en_US.UTF-8
</code></pre><p>然后按 <code>Esc</code>，退出插入模式。再输入 <code>:</code>，进入命令模式，输入<code>wq</code>，按下 <code>Enter</code>，保存并退出 vim 软件环境。</p><h3 id=202-设置终端键盘布局和字体>20.2 设置终端键盘布局和字体<a hidden class=anchor aria-hidden=true href=#202-设置终端键盘布局和字体>#</a></h3><p>我们创建并编辑 <code>vconsole.conf</code>，设置终端的默认字体。我们已经在安装开始时设置过终端字体，但是重启之后设置将失效。为了让设置永久生效，我们需要把设置写在文件中。请输入如下命令。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># vim /etc/vconsole.conf</span>
</span></span></code></pre></div><p>请用相同的方法输入如下字符。请在“KEYMAP=”后面输入您在第 7 节设置终端键盘布局时选择的键盘布局（这一行可以不设置），在“FONT=”后面输入您在第 7 节设置终端字体时选择的字体，保存并退出。</p><pre tabindex=0><code>/etc/vconsole.conf
----
FONT=ter-132b
</code></pre><h2 id=21-网络配置>21 网络配置<a hidden class=anchor aria-hidden=true href=#21-网络配置>#</a></h2><p>请编辑 <code>/etc/hostname</code> 文件，设置主机名。这将成为您计算机的名字。这篇文章为设置主机名提供了一些建议。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># vim /etc/hostname</span>
</span></span></code></pre></div><pre tabindex=0><code>/etc/hostname
----
我的主机名
</code></pre><p>然后，请安装一个网络管理器，笔者推荐使用 NetworkManager。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># pacman -S networkmanager</span>
</span></span></code></pre></div><p>NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在使用 systemd 设置 NetworkManager 开机自动启动。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># systemctl enable NetworkManager.service</span>
</span></span></code></pre></div><h2 id=22-root-密码>22 root 密码<a hidden class=anchor aria-hidden=true href=#22-root-密码>#</a></h2><p>root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码。</p><p>请设置 root 密码。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># passwd</span>
</span></span><span class=line><span class=cl>New password:    <span class=c1># 注：输入密码后不会显示“*”，这是正常现象</span>
</span></span><span class=line><span class=cl>Retype new password:
</span></span><span class=line><span class=cl>passwd: password updated successfully
</span></span></code></pre></div><h2 id=23-引导加载程序>23 引导加载程序<a hidden class=anchor aria-hidden=true href=#23-引导加载程序>#</a></h2><p>为了启动 Arch Linux，建议使用一个引导加载程序，笔者推荐使用的引导加载程序是 GRUB。</p><p>再次声明，本教程只针对 UEFI 启动模式的计算机，如果您的计算机使用 BIOS 启动模式，请参阅此教程。</p><p>关于 Arch Linux 启动的过程，参见 ArchWiki。</p><h3 id=231-微码>23.1 微码<a hidden class=anchor aria-hidden=true href=#231-微码>#</a></h3><p>根据您的 CPU 生产厂商，安装相应的微码。</p><p>请先查看您的 CPU 型号。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># cat /proc/cpuinfo | grep &#34;model name&#34;</span>
</span></span></code></pre></div><p>如果是 Intel CPU，请安装软件包 <code>intel-ucode</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># pacman -S intel-ucode</span>
</span></span></code></pre></div><p>如果是 AMD CPU，请安装软件包 <code>amd-ucode</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># pacman -S amd-ucode</span>
</span></span></code></pre></div><h3 id=232-安装引导加载程序针对全新安装-arch-linux>23.2 安装引导加载程序（针对全新安装 Arch Linux）<a hidden class=anchor aria-hidden=true href=#232-安装引导加载程序针对全新安装-arch-linux>#</a></h3><p>首先，安装必要的软件包。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># pacman -S grub efibootmgr</span>
</span></span></code></pre></div><p>然后，安装 GRUB 到计算机。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB</span>
</span></span></code></pre></div><p>如果您在挂载分区时，将 esp 分区挂载到了 /efi 或者 /boot/efi，请在 &ndash;efi-directory 选项中作相应变动。如果您完全按照本教程操作，则不用作改变。</p><p>如果输出 <code>Installation finished. No error reported.</code>，则说明安装成功，否则请立即检查错误。</p><p>最后，生成 GRUB 配置，其中 <code>-o</code> 选项将配置输出到指定的文件中。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># grub-mkconfig -o /boot/grub/grub.cfg</span>
</span></span></code></pre></div><h2 id=24-重新启动计算机>24 重新启动计算机<a hidden class=anchor aria-hidden=true href=#24-重新启动计算机>#</a></h2><p>首先，退出 chroot 环境。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@archiso ~<span class=o>]</span><span class=c1># exit</span>
</span></span></code></pre></div><p>然后，关闭交换文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># swapoff /mnt/swapfile</span>
</span></span></code></pre></div><p>随后，取消挂载 /mnt。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># umount -R /mnt</span>
</span></span></code></pre></div><p>最后，重新启动计算机。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>root@archiso ~ <span class=c1># reboot</span>
</span></span></code></pre></div><h2 id=25-安装后的工作>25 安装后的工作<a hidden class=anchor aria-hidden=true href=#25-安装后的工作>#</a></h2><p>至此，一个基本的 Arch Linux 系统已经安装完毕，现在您可以通过终端控制系统。笔者将在下一篇文章中介绍安装后的配置，包括普通账户的创建、显卡驱动和图形界面的安装，敬请阅读。</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://rosa-thomas.me/posts/2024/04/the-boy-and-the-heron/><span class=title>« 上一页</span><br><span>一起建造属于大家的白色巨塔——电影《你想活出怎样的人生》观后感</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=rosa-thomas-chen/rosa-thomas-chen.github.io data-repo-id=R_kgDOPcLOEw data-category=Announcements data-category-id=DIC_kwDOPcLOE84CuFAC data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://rosa-thomas.me/>Rosa Thomas 的博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>