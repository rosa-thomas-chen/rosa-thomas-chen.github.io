<!DOCTYPE html>
<html lang="zh" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>一份写给新手的 Arch Linux 安装教程（2025.11） | Rosa Thomas 的博客</title>
<meta name="keywords" content="Arch Linux, Linux, 自由软件">
<meta name="description" content="0 前言
Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。">
<meta name="author" content="我">
<link rel="canonical" href="https://rosa-thomas.me/zh/posts/2023/01/arch-linux-installation/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a5781257de4197b8e3d54346acdf1dd55a9ba4cb91dcace192fc1baf228c08b5.css" integrity="sha256-pXgSV95Bl7jj1UNGrN8d1VqbpMuR3KzhkvwbryKMCLU=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://rosa-thomas.me/images/cherry.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://rosa-thomas.me/images/cherry.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://rosa-thomas.me/images/cherry.png">
<link rel="apple-touch-icon" href="https://rosa-thomas.me/images/cherry.png">
<link rel="mask-icon" href="https://rosa-thomas.me/images/cherry.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://rosa-thomas.me/zh/posts/2023/01/arch-linux-installation/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
<script
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"
></script>

<script>
    MathJax = {
        tex: {
            displayMath: [
                ["\\[", "\\]"],
                ["$$", "$$"],
            ], 
            inlineMath: [["\\(", "\\)"]], 
        },
        loader: {
            load: ["ui/safe"],
        },
    };
</script>

<meta property="og:url" content="https://rosa-thomas.me/zh/posts/2023/01/arch-linux-installation/">
  <meta property="og:site_name" content="Rosa Thomas 的博客">
  <meta property="og:title" content="一份写给新手的 Arch Linux 安装教程（2025.11）">
  <meta property="og:description" content="0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-01-19T23:38:00+08:00">
    <meta property="article:modified_time" content="2023-01-19T23:38:00+08:00">
    <meta property="article:tag" content="Arch Linux">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="自由软件">
      <meta property="og:image" content="https://rosa-thomas.me/images/cherry.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://rosa-thomas.me/images/cherry.png">
<meta name="twitter:title" content="一份写给新手的 Arch Linux 安装教程（2025.11）">
<meta name="twitter:description" content="0 前言
Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://rosa-thomas.me/zh/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "一份写给新手的 Arch Linux 安装教程（2025.11）",
      "item": "https://rosa-thomas.me/zh/posts/2023/01/arch-linux-installation/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "一份写给新手的 Arch Linux 安装教程（2025.11）",
  "name": "一份写给新手的 Arch Linux 安装教程（2025.11）",
  "description": "0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。\n",
  "keywords": [
    "Arch Linux", "Linux", "自由软件"
  ],
  "articleBody": "0 前言 Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。\n本文详细地介绍了在一台 x86-64 架构的计算机中安装 Arch Linux 的过程，尽可能遵循官方安装指南。本文共介绍三种安装方式，它们分别是：\n清空硬盘并安装 Arch Linux， 在虚拟机中安装 Arch Linux， 安装 Arch Linux 并和 Windows 组成双系统。 为节省篇幅，本文主要介绍第一种方式，即清空硬盘并安装 Arch Linux。后两种方式的安装过程与第一种大致相同，其不同之处将在专门文章中详细说明。\n在动手操作之前，建议您阅读笔者的文章安装 Arch Linux 之前需要知道的事情，以便对该操作系统有初步的了解。\n尽管本文力图做到准确、全面和及时更新，但不能保证没有错误、疏漏和过时之处。本文的目的不是替代官方安装指南，而是通过把文档式的语言转化成教程式的语言，以降低新手安装 Arch Linux 的难度，便于 Arch Linux 乃至自由软件在简体中文世界的传播。为了获取更加可靠的信息，笔者建议您阅读每节后的“建议阅读”小节，那里提供了资料来源。\n1 安装要求 请确保您满足以下要求。\n1.1 硬件 计算机：一台 x86-64 架构的计算机，至少 512 MiB 内存，2 GiB 硬盘空间，可连接到互联网；本文建议至少 4 GiB 内存，100 GiB 硬盘空间，以满足日常使用需求。 安装介质：一个 U 盘，至少 2 GiB 剩余空间。 1.2 数据备份 备份计算机中的重要数据（至少包括软件列表和配置、个人文件、收藏夹和书签等）； 备份安装介质（即上述 U 盘）中的全部文件。 1.3 知识和技能 了解 Linux 基础知识（最好使用过新手友好的发行版，例如 Ubuntu、Linux Mint 或 Deepin 等）； 有动手能力和意愿； 有英语读写能力，并了解获取信息和寻求帮助的途径，以便遇到问题时查阅资料或在社区提问。 💡 提示\n如果您是第一次安装 Linux 操作系统，建议选择上述新手友好的发行版，以获得更好的体验。 如果您想了解更多知识，包括 Arch Linux 简介、如何选择发行版、如何获取信息和寻求帮助等，欢迎阅读笔者的文章安装 Arch Linux 之前需要知道的事情。 建议阅读 官方安装指南列出了安装 Arch Linux 的步骤，是本文的写作依据。如本文（或其他第三方教程）与官方安装指南有差异，一律以官方安装指南为准。 Arch Linux 中文社区翻译和编写的中文版安装指南可作为官方安装指南的补充。中文版安装指南在翻译官方安装指南的基础上，增加了若干实用提示和本地化建议，以供参考。 提问的智慧是一篇流传甚广的文章，可以帮助您更有效地在自由软件社区提问。这里给出的是该文章的简体中文版，英语原文的链接已在简体中文版的开头列出。 Arch Linux 中文社区交流群指引介绍了 Arch Linux 中文社区交流群的加入方法和群组规则。对于一名自由软件使用者而言，加入社区交流群可以更方便地获取帮助，也可以更好的感受和传递自由软件文化。虽然每个社区都不是完美的，但笔者相信社区对大多数人都能带来积极作用。 2 获取安装映像 安装映像是一个 .iso 文件，也称为映像文件，将其写入安装介质（例如 U 盘）内，便可作为启动盘在计算机上运行 live 系统。live 系统是一种无需被安装到硬盘上即可在计算机上启动的操作系统，一般用于安装操作系统（到硬盘上）或抢救操作系统。要了解 Arch Linux 提供的 live 系统中包含的软件包列表，请查看 pkglist.x86_64.txt。\n要获取安装映像，请前往下载页面，选择一种方式，下载文件 archlinux-\u003c映像发布日期\u003e-x86_64.iso。请注意，上述文件名中的 \u003c映像发布日期\u003e 应替换为具体的映像文件发布日期，例如 2025.11.01，从而实际的文件名可以是 archlinux-2025.11.01-x86_64.iso。\n💡 提示\n安装映像保持每月更新，请确保您下载的文件是最新的。\n建议的下载方式有以下两种：\n通过 BitTorrent 下载； 从镜像站下载。 2.1 通过 BitTorrent 下载 如果您要通过 BitTorrent 下载，请在上述下载页面中找到 BitTorrent Download (recommended) 部分，打开链接 Torrent for \u003c映像发布日期\u003e，例如 Torrent for 2025.11.01，下载种子（Torrent）文件。然后用支持 BitTorrent 协议的下载工具打开该种子文件，并开始下载映像文件。\n🔍 注意\n本文中的种子文件下载链接可能不是最新的，请前往下载页面获取最新的链接。\n2.2 从镜像站下载 如果您要从镜像站下载，请在上述下载页面中找到 HTTP Direct Downloads 部分，选择一个合适的镜像站，选择的首要标准是地理距离。\n如果您在中国内地，建议选择以下镜像站之一。\n北京外国语大学开源软件镜像站 清华大学开源软件镜像站 上海交通大学开源软件镜像站 中国科学技术大学开源软件镜像 如果您在境外，建议选择地理距离最近的镜像站，或选择官方镜像站 pkgbuild.com。\n打开镜像站链接后，出现如下的文件夹内容列表：\n../ arch/ 01-Nov-2025 09:50 - archlinux-2025.11.01-x86_64.iso 01-Nov-2025 09:50 1526038528 archlinux-2025.11.01-x86_64.iso.sig 01-Nov-2025 09:51 141 archlinux-2025.11.01-x86_64.iso.torrent 01-Nov-2025 09:51 82371 archlinux-bootstrap-2025.11.01-x86_64.tar.zst 01-Nov-2025 09:51 144969772 archlinux-bootstrap-2025.11.01-x86_64.tar.zst.sig 01-Nov-2025 09:51 141 archlinux-bootstrap-x86_64.tar.zst 01-Nov-2025 09:51 144969772 archlinux-bootstrap-x86_64.tar.zst.sig 01-Nov-2025 09:51 141 archlinux-x86_64.iso 01-Nov-2025 09:50 1526038528 archlinux-x86_64.iso.sig 01-Nov-2025 09:51 141 b2sums.txt 01-Nov-2025 09:51 654 sha256sums.txt 01-Nov-2025 09:51 398 其中，文件 archlinux-2025.11.01-x86_64.iso 即为所需的安装映像，点击文件名即可开始下载。\n3 验证映像 为确保安装映像在下载过程中没有损坏，需要计算下载后的映像文件的 SHA256 校验和（Checksum），并与下载页面中给出的校验和进行比对。\n请在 Windows 系统中，在映像文件所在的文件夹处打开一个 PowerShell 窗口。在 PowerShell 窗口中，执行以下命令：\ncertutil -hashfile .\\\u003c映像文件名\u003e SHA256 请注意，上述命令中的 \u003c映像文件名\u003e 应替换为具体的安装映像的文件名，例如 archlinux-2025.11.01-x86_64.iso，从而实际的命令可以是 certutil -hashfile .\\archlinux-2025.11.01-x86_64.iso SHA256。\n💡 提示\n要在一个文件夹处打开 PowerShell 窗口，请使用文件资源管理器打开该文件夹，并将鼠标移动到空白处，按下 Shift + 右键，再点击在此处打开 PowerShell 窗口选项。 要执行一条命令，请在 PowerShell 窗口中输入该命令，并按下 Enter。 在 PowerShell 窗口中，按下 Tab，可以自动补全文件名。 这个命令使用了 Windows 系统自带的 certutil 程序的 -hashfile 选项，以计算工作文件夹（.\\）中的映像文件（例如 archlinux-2024.11.01-x86_64.iso）的 SHA256 校验和，其输出如下。\n3fde01031127fb49d3fb489dd92f8d1fc0a7fc4fdfff220936031a00a7673a2e archlinux-2024.11.01-x86_64.iso 请在 Arch Linux 下载页面中找到 Checksums and signatures 部分，查看其中的 SHA256 校验和。如果该值与上述命令输出的值相同，说明映像没有损坏；如果不同，说明映像损坏，需要重新下载。\n建议阅读 Microsoft Learn 对 certutil 程序的介绍 4 准备安装介质 要在计算机上启动 live 系统，需要将下载好的安装映像写入 U 盘内，以制作 USB 启动盘。常用的 USB 启动盘制作工具有 Rufus 和 Ventoy 等。除 Ventoy 外，大多数制作工具在每次写入前都需要格式化 U 盘，将较大地影响便利性。因此本文以 Ventoy 为例进行介绍。\nVentoy 是一个制作可启动 U 盘的开源软件。使用 Ventoy 制作 USB 启动盘，无需反复格式化 U 盘，只需将 .iso 文件复制到 U 盘中即可启动它。制作 USB 启动盘的详细步骤如下：\n首先，前往 Ventoy 下载页面，下载 ventoy-\u003c版本号\u003e-windows.zip。请注意，上述文件名中的 \u003c版本号\u003e 应替换为具体的 Ventoy 版本号，如 1.1.07, 从而实际的文件名可以是 ventoy-1.1.07-windows.zip。\n💡 提示\n在上述下载页面中点击文件名将跳转到 GitHub，而 GitHub 在中国内地连接不稳定。如果无法访问，请通过以下镜像站或云存储服务器下载：\nGitHub Gitee 南京大学开源镜像站 山东大学镜像站 蓝奏云 123 云盘（提取码：vtoy） 百度网盘（提取码：vtoy） 其次，请利用本文上一节中介绍的方法，检验下载后的 .zip 文件的 SHA256 校验和。计算出该文件的校验和后，请将其与上述 Ventoy 下载页面给出的校验和进行比对。\n3e7a8db199c7e791e341e6d388d078bfc6b7a77c6f10282edf9c7b82f84f3ad4 ventoy-1.1.07-windows.zip 随后，使用解压缩程序打开该 .zip 文件，将其解压缩后，双击 Ventoy2Disk.exe 以运行该程序。\n⚠️ 警告\n下一步将清除 U 盘内全部文件，请务必提前作好备份。\n然后，将准备好的 U 盘插入计算机，在 Ventoy 程序窗口的设备选项卡中选择该 U 盘，并点击安装按钮。安装 Ventoy 后，U 盘将被分为两个分区，其中容量较大的分区可用来存放 .iso 文件。\n最后，把安装映像复制到 U 盘容量较大的分区内即可。\n💡 提示\n安装了 Ventoy 的 U 盘仍可作为普通 U 盘使用，存放个人文件并不会影响 Ventoy 的功能。\n建议阅读 Ventoy 使用说明详细介绍了使用 Ventoy 制作 USB 启动盘的步骤。 5 启动到 live 环境 准备好安装介质后，可以将计算机启动到 live 环境了。在此之前，需要对计算机进行一些设置。\n5.1 启动菜单快捷键和 BIOS 快捷键 启动菜单快捷键（Boot Menu Key）是用于在启动计算机时进入启动设备选择菜单（Boot Device Selection Menu）的快捷键。在启动设备选择菜单中，可选择从哪个设备（例如硬盘、U 盘或光驱等）启动计算机。不同制造商生产的计算机的启动菜单快捷键可能不同，其具体差异如下表所示：\n制造商 台式机 笔记本 联想（Lenovo） F12 F12 或 Fn + F12 联想（Lenovo）ThinkPad — F12 戴尔（Dell） F12 F12 惠普（HP） F9 或 Esc F9 华硕（ASUS） F8 Esc 微星（MSI） F11 F11 技嘉（Gigabyte） F12 — 宏碁（Acer） F12 F12 三星（Samsung） — F10 或 Esc 索尼（Sony） — F11 或 Esc 微软（Microsoft）Surface — 音量减 + 电源键 BIOS 快捷键是用于在启动计算机时进入 BIOS 或 UEFI 设置界面的快捷键。\n5.2 关闭安全启动 5.3 启动到 live 环境 首先，请将准备好的安装介质插入计算机，并启动该计算机，反复按启动菜单快捷键，直到出现启动设备选择菜单。\n其次，请在启动设备选择菜单中选择您的 U 盘，以运行其中的 Ventoy 程序。\n💡 提示\n要在启动设备选择菜单中辨认出您的 U 盘，可以重点检查其中包含 USB、U 盘的制造商和容量等字样的选项。\n然后，Ventoy 将列出 U 盘内存放的全部镜像文件。请在其中选择 Arch Linux 安装镜像项，再在启动模式菜单中选择 Boot in normal mode 项，以启动 Arch Linux 的 live 系统。\n随后，live 系统中的引导加载程序（例如 GRUB）将启动，请在引导加载程序的菜单中选择第一项 Arch Linux install medium (x86_64, UEFI)。\n最后，请耐心等待 live 系统启动。如果出现如下界面，则 live 系统启动成功。\nArch Linux 6.x.x-arch1-1 (tty1) archiso login: root (automatic login) To install Arch Linux follow the installation guide: https://wiki.archlinux.org/title/Installation_guide ... 💡 提示\n上述启动过程可以总结如下：\n计算机开始启动 —\u003e 选择启动设备 —\u003e Ventoy 启动 —\u003e 选择 Ventoy 将启动的安装镜像 —\u003e 选择 Ventoy 启动镜像的模式 —\u003e Arch Linux 的 live 系统开始启动 —\u003e live 系统中的引导加载程序启动 —\u003e 在引导加载程序菜单中选择启动项 —\u003e live 系统启动完成\n下面的安装步骤将在命令行界面中进行，请做好准备。只要按照指导，耐心而谨慎地输入命令，就相信您能顺利地完成安装过程。\n6 必要的介绍和提示 6.1 关于 Linux 命令语法的介绍 6.2 关于 archinstall 程序的提示 7 设置终端键盘布局和字体 7.1 Linux 命令简介 在继续之前有必要介绍一下 Linux 命令的语法。一般情况下，一条 Linux 命令由主命令、选项和参数组成。一个命令就像一个祈使句，祈使句由谓语、状语和宾语组成，三者分别对应而只不过语序有所变化，而且选项要前面用“-”标注。我们以句子“快速地吃米饭”举例。在这个句子中，谓语是“吃”，状语是“快速地”，宾语是“米饭”。将其写成命令的形式是这样的\n吃 -快速地 米饭 我们列个表格以便展示二者的对应关系：\n命令 -选项 参数 谓语 -状语 宾语 吃 -快速地 米饭 请记住下列语法，更多的知识请参阅鸟哥私房菜。\n命令 -选项 参数 7.2 设置终端键盘布局 默认键盘布局是美式键盘，您可以使用以下命令列出可用的键盘布局。\nroot@archiso ~ # ls /usr/share/kbd/keymaps/**/*.map.gz ls 可能是 Linux 中最常用的命令。关于 Linux 常用命令的学习，请参阅鸟哥私房菜。\n您可以使用 loadkeys 命令设置键盘布局。例如，如下命令将键盘布局设置为 Dvorak 布局。\nroot@archiso ~ # loadkeys dvorak 7.3 设置终端字体 如果您的屏幕分辨率较高，您将发现终端字体较小。要将终端字体设置为高分辨率字体，可使用 setfont 命令。这个命令没有选项，只需输入主命令和参数，如：\nsetfont \u003c字体名称\u003e 对于分辨率为 1080p 的屏幕，建议选择字体 ter-122b。对于分辨率更高的屏幕，建议在 ter-124b、ter-128b 和 ter-132b 中选择，例如：\nroot@archiso ~ # setfont ter-132b 💡 提示\n请记住您选择的字体名称，配置系统时将用到它。\n8 验证启动模式 本文开始时提到，您的电脑必须在 UEFI 模式下启动，现在验证您的启动模式。\n请输入如下命令（注意：使用Tab键可以自动补全）\nroot@archiso ~ # cat /sys/firmware/efi/fw_platform_size 如果输出 64，那么系统以 UEFI 模式启动，并且有 64 位 UEFI。如果输出 32，那么系统以 UEFI 模式启动，但是只能使用 GRUB 作为引导加载程序。如果输出为空，即这个文件不存在，那么系统可能以 BIOS 模式启动。\n处于 BIOS 启动模式的读者，可以自行进入 BIOS 页面更改启动模式。如果无法更改，说明您的电脑过于老旧，本文无法指导您继续安装。请您参考其他教程，例如\n9 连接到互联网 Arch Linux 镜像只提供一个基本的安装环境，软件包仍需要连接互联网后下载。连接互联网有多种方式，包括\n有线连接 手机 USB 网络共享（仅限 Android 手机） WiFi 连接 笔者建议读者优先使用有线连接和手机 USB 网络共享的方式连接互联网。\n连接互联网的步骤如下：\n检查确保网络接口已经启用。 root@archiso ~ # ip link 您应该在输出中看到 enp0s3 或 wlan0 之类的字样，这就是您的网络接口名称，例如\n2: enp0s3: mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000 ... 尖括号内的 UP，表示接口已经启用。如果没有出现 UP，使用如下命令启用该接口 。\nroot@archiso ~ # ip link set \u003c网络接口名称\u003e up # 请将“\u003c网络接口名称\u003e”替换成您的网络接口名称，如“enp0s3”或“wlan0” 使用无线连接的读者，使用 rfkill 命令确认无线网卡没有被屏蔽。 root@archiso ~ # rfkill ID TYPE DEVICE SOFT HARD 0 bluetooth hci0 unblocked unblocked 1 wlan phy0 unblocked unblocked 如果无线网卡被硬件屏蔽，请使用硬件开关启用它；如果被软件屏蔽，请输入如下命令启用它。\nroot@archiso ~ # rfkill unblock wlan 选择有线连接的读者，只需要将网线插到电脑相应接口即可连接。选择手机 USB 网络共享的读者，将手机和电脑用数据线连接，然后在手机通知栏中选择“USB 网络共享”即可连接。以下详细介绍连接 WiFi 的方法。 请使用 iwctl 命令 连接互联网，如下 root@archiso ~ # iwctl NetworkConfigurationEnabled: disabled StateDirectory: /var/lib/iwd Version: 2.x [iwd]# 如果您看到上述输出，说明您已经进入了 iwd 程序环境。这时读者可能会觉得陌生，因为通常的命令下达后会直接输出结果，并返回命令提示符，等待下一个命令的输入。而这个命令不同，下达之后进入了程序环境，用户只能与该程序交互，这一点请初学者牢记。关于程序工作环境的更多例子，请参阅鸟哥私房菜。若想退出 iwd 程序环境，只需要输入 quit 即可。\n请继续输入命令\n[iwd]# device list Devices ------------------------------------------------------ Name Address Powered Adapter Mode ------------------------------------------------------ wlan0 xx:xx:xx:xx:xx:xx on phy0 station 请记住上述输出的设备名称（在 Name 下面），这里以 wlan0 为例，请将 wlan0 替换成您的设备名称。\n继续输入命令\n注意\n命令中的 #，表示从该字符到行末的所有文字均为注释，注释不是命令的一部分。\n[iwd]# station wlan0 scan # 扫描网络，请将 wlan0 换成您的设备名称 [iwd]# station wlan0 get-networks # 输出扫描结果，请将 wlan0 换成您的设备名称 Available Networks ------------------------------------ Network name Security Signal ------------------------------------ mySSID psk **** 请记住您的网络名称（在 Network name 下面），这里以 mySSID 为例，请将 mySSID 换成您的网络名称。\n继续输入命令\n[iwd]# station wlan0 connect \"mySSID\" # 连接网络，请将 wlan0 换成您的设备名称，mySSID 换成您的网络名称 Type the network passphrase for mySSID psk. Passphrase: ******** # 输入密码 [iwd]# quit # 退出 iwd 程序环境 这时您应该已经连接上互联网了，请使用 ping 命令测试网络（使用 Ctrl+C 中止命令）。 root@archiso ~ # ping archlinux.org PING archlinux.org (95.217.163.246) 56(84) bytes of data. 64 bytes from archlinux.org (95.217.163.246): icmp_seq=1 ttl=47 time=201 ms 64 bytes from archlinux.org (95.217.163.246): icmp_seq=2 ttl=47 time=218 ms 64 bytes from archlinux.org (95.217.163.246): icmp_seq=3 ttl=47 time=194 ms ^C # 使用 Ctrl+C 中止命令 --- archlinux.org ping statistics --- 3 packets transmitted, 3 received, 0% packet loss, time 2001 ms rtt min/avg/max/mdev = 194.013/204.384/217.666/9.873 ms 如果出现上述结果，说明网络连接成功。如果无法连接 WiFi，请按照 ArchWiki 检查互联网连接。由于驱动不匹配，有些电脑可能无法连接 WiFi，只能使用有线连接或手机 USB 网络共享。\n若要排查网络连接问题，请先确保你满足了以下要求。 你的网络接口可见并已启用。否则请检查设备驱动－请查阅 网络配置/以太网 - Arch Linux 中文维基 或 网络配置/无线网络配置 - Arch Linux 中文维基 页面。 你已连接到网络。网线已接好或者已经连接到无线局域网。 你的网络接口拥有一个 IP 地址。 你的路由表设置正确。 你可以 ping 通一个本地 IP 地址（例如你的默认网关）。 你可以 ping 通一个公网 IP 地址（例如 9.9.9.9，即 Quad9 的 DNS 服务器）。 检查是否能解析域名（例如 archlinux.org）。 10 更新系统时间 在互联网连接之后，systemd-timesyncd 服务将自动校准系统时间。请输入如下命令确定时间的准确性。设置时间的目的之一是便于安装软件包时验证签名。\nroot@archiso ~ # timedatectl 时间可能以 UTC 时区显示，比北京时间慢 8 小时。这是正常现象，无需调整。\n如果时间不准确，请使用 date 命令手动设置时间。\nroot@archiso ~ # date MMDDhhmmYY # 如 date 1231080023 可以将时间设定为 2023 年 12 月 31 日 08:00 11 磁盘分区 注意\n从未进行过磁盘分区操作的读者请先在虚拟机内练习 请您务必提前备份好重要资料 请您确保知晓命令的含义，并正确输入命令，否则有可能造成数据丢失 11.1 全新安装 Arch Linux 的磁盘分区 注意\n继续操作将清除硬盘内全部数据。如果您想保留数据和已有的 Windows 系统，请看第 11.2 节。\n磁盘分区表\n挂载点 分区 分区类型 建议大小 备注 /mnt/boot /dev/sda1 或/dev/nvme0n1p1 EFI System 512 MiB ESP 分区 /mnt /dev/sda2 或/dev/nvme0n1p2 Linux x86-64 root 100 GiB（至少 50 GiB） Arch Linux 的根分区 /mnt/home /dev/sda3 或/dev/nvme0n1p3 Linux home 剩余磁盘空间 Arch Linux 的 home 分区 首先使用 lsblk 或 fdisk -l 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如\nroot@archiso ~ # lsblk ---- NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT loop0 7:0 0 688.2M 1 loop /run/archiso/airootfs # loop0 可以忽略 sda 8:0 0 931.5G 0 disk # sda 是要安装 Arch Linux 的硬盘，请记住设备名 ├─sda1 8:1 0 512M 0 part └─sda2 8:2 0 931G 0 part sdb 8:16 1 59.8G 0 disk # sdb 是 U 盘，请忽略 ├─sdb1 8:17 1 59.7G 0 part │ └ventoy 254:0 0 861.3M 1 dm /run/archiso/bootmnt └─sdb2 8:18 1 32M 0 part 在上面的例子中，以 rom、loop、airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。找到要进行分区的设备之后，请记住设备名（本文以 /dev/sda 为例，您的硬盘也可能是 /dev/nvme0n1）。\n我们使用的分区工具是 fdisk ，首先让我们通过查看帮助，学习一下 fdisk 的用法。\nroot@archiso ~ # fdisk /dev/sda # 输入 fdisk 设备名，进入 fdisk 操作环境 Welcome to fdisk (util-linux 2.x). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. # 执行写入命令（w）之前，硬盘不会被改动 Command (m for help): m # 输入 m 获取帮助 Help: … Generic d delete a partition # 输入 d 删除分区 n add a new partition # 输入 n 创建分区 p print the partition table # 输入 p 打印分区表 t change a partition type # 输入 t 改变分区类型 … Save \u0026 Exit w write table to disk and exit # 输入 w 写入并退出（写入后不可撤销，请谨慎使用） q quit without saving changes # 输入 q 不保存退出 … Create a new label g create a new empty GPT partition table # 输入 g 创建 GPT 分区表 … 现在请输入 Ctrl+C，退出 fdisk 操作环境。\n我们现在正式进行磁盘分区。首先需要创建 GPT 分区表；随后依次创建分区，并修改分区类型；最后保存并退出。请参考以下分区过程，按照您的分区方案进行分区。\nroot@archiso ~ # fdisk /dev/sda # 请将 sda 更换为您的设备名，如 nvme0n1 Welcome to fdisk (util-linux 2.x). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Command (m for help): g # 输入 g 创建新的 GPT 分区表（请勿遗忘此步，否则您的硬盘将是 MBR 格式） Created a new GPT disklabel (GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx). Command (m for help): n # 输入 n 创建新的分区，这个分区将是 EFI 分区 Partition number (1-128, default 1): # 分区编号保持默认，直接按 Enter First sector (2048-125829086, default 2048): # 第一个扇区，保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-125829086, default 125827071): +512M # 创建 512MiB 大小的分区 Created a new partition 1 of type 'Linux filesystem' and of size 512 MiB. Partition #1 contains a vfat signature. Do you want to remove the signature? [Y]es/[N]o: Y # 清除已有的签名，如果是全新的硬盘，则没有此步 The signature will be removed by a write command. Command (m for help): t # 输入 t 改变分区类型，请勿遗忘此步 Selected partition 1 Partition type or alias (type L to list all): 1 # 输入 1 代表 EFI 类型 Changed type of partition 'Linux filesystem' to 'EFI System'. Command (m for help): n # 创建第二个分区，用作根分区 Partition number (2-128, default 2): # 保持默认 First sector (1050624-125829086, default 1050624): # 保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (1050624-125829086, default 125827071): +100G # 创建 100 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小 Created a new partition 2 of type 'Linux filesystem' and of size 100 GiB. Partition #2 contains a ntfs signature. Do you want to remove the signature? [Y]es/[N]o: Y The signature will be removed by a write command. Command (m for help): t # 输入 t 改变分区类型，请勿遗忘此步 Partition number (1-2, default 2): # 保持默认 Partition type or alias (type L to list all): 23 # 输入 23 代表 Linux root (x86-64) 类型 Changed type of partition 'Linux filesystem' to 'Linux root (x86-64)'. Command (m for help): n # 创建第三个分区，用作 home 分区 Partition number (3-128, default 3): # 保持默认 First sector (42993664-125829086, default 42993664): # 保持默认 Last sector, +/-sectors or +/-size{K,M,G,T,P} (42993664-125829086, default 125827071): #保持默认，将剩余空间全部分给 home 分区 Created a new partition 3 of type 'Linux filesystem' and of size 39.5 GiB. Command (m for help): t # 输入 t 改变分区类型 Partition number (1-3, default 3): Partition type or alias (type L to list all): 42 # 输入 42 代表 Linux home 类型 Changed type of partition 'Linux filesystem' to 'Linux home'. Command (m for help): p # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出 Disk /dev/sda: 60 GiB, 64424509440 bytes, 125829120 sectors Disk model: xxx Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 4096 bytes I/O size (minimum/optimal): 4096 bytes / 4096 bytes Disklabel type: gpt Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx Device Start End Sectors Size Type /dev/sda1 2048 1050623 1048576 512M EFI System /dev/sda2 1050624 42993663 41943040 100G Linux root (x86-64) /dev/sda3 42993664 125827071 82833408 39.5G Linux home Filesystem/RAID signature on partition 1 will be wiped. Filesystem/RAID signature on partition 2 will be wiped. Command (m for help): w # 输入 w 写入分区表，该操作不可恢复 The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. 12 分区格式化 创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4、btrfs、xfs 等。建议第一次安装的读者使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。\n12.1 全新安装 Arch Linux 的分区格式化 注意\n如果您希望 Arch Linux 与 Windows 系统共存，请直接跳到下一小节。\n使用 mkfs.fat 将您的 EFI 分区格式化为 FAT32 文件系统。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。\nroot@archiso ~ # mkfs.fat -F 32 /dev/sda1 使用 mkfs.ext4 将您的根分区格式化为 ext4 文件系统。请将 /dev/sda2 更换为您的 root 分区名，可能是 /dev/nvme0n1p2。\nroot@archiso ~ # mkfs.ext4 /dev/sda2 使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 /dev/sda3 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。\nroot@archiso ~ # mkfs.ext4 /dev/sda3 13 挂载分区 13.1 全新安装 Arch Linux 的挂载分区 首先，使用 mount 将根分区挂载在 /mnt 目录下。本文假定您的根分区是 /dev/sda2，您的根分区也可能是 /dev/nvme0n1p2，请根据实际情况作替换。\nroot@archiso ~ # mount /dev/sda2 /mnt 随后，使用 mount --mkdir 创建 /mnt/boot 目录，并将 EFI 分区挂载在 /mnt/boot 目录下。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。\nroot@archiso ~ # mount --mkdir /dev/sda1 /mnt/boot 此处，也可以使用 /mnt/efi 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。\n最后，挂载 home 分区。请将 /dev/sda5 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。\nroot@archiso ~ # mount --mkdir /dev/sda3 /mnt/home 14 建立交换文件 交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读。\n交换文件的大小是个众说纷纭的问题。笔者参考 RedHat 文档，推荐的交换文件大小见下表。笔者使用的公式是\n您可以根据您的实际情况选择交换文件的大小。如果需要休眠功能，建议交换文件接近内存大小 ，可以使用笔者的推荐大小。如果您不需要休眠功能，请适当减少交换文件大小。\n内存大小 推荐的交换文件大小（使用休眠功能） 推荐的交换文件大小（不使用休眠功能） 2 GiB 4096 MiB 4 GiB 5793 MiB 8 GiB 16 GiB 32 GiB 64 GiB 4096 MiB\n5793 MiB\n8192 MiB\n11585 MiB\n16384 MiB\n23170 MiB\n4096 MiB\n5793 MiB\n8192 MiB\n8192 MiB\n4096 MiB\n0 MiB\n建立交换文件的具体操作方法如下 。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （=8192 MiB）大小的交换文件。\nroot@archiso ~ # dd if=/dev/zero of=/mnt/swapfile bs=1M count=8192 status=progress 如果您需要创建其他大小的交换文件，请将 count= 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。\n然后，修改权限。\nroot@archiso ~ # chmod 0600 /mnt/swapfile 最后，格式化并启用交换文件。\nroot@archiso ~ # mkswap -U clear /mnt/swapfile root@archiso ~ # swapon /mnt/swapfile 15 选择软件仓库镜像 Linux 中的软件仓库就像手机操作系统中的应用商店，Linux 的软件包是通过软件仓库进行分发的。软件仓库镜像是软件仓库的复制品，同一个软件仓库可以在世界各地建立软件仓库镜像，以便于不同地区的用户下载。因此选择一个合适的软件仓库镜像对于您更新软件包数据库和下载软件包的速度有很大影响。\n15.1 使用 reflector Arch Linux 提供了一个筛选软件仓库镜像的便利工具 reflector。我们使用该工具选择软件仓库镜像。首先使用 reflector 自带的帮助学习一下该软件的用法。当您遇到陌生的命令时，使用 –help 选项查看用法是一个好主意。\nroot@archiso ~ # reflector --help 请仔细阅读屏幕上打印出的内容，自学是使用 Arch Linux 的必要过程。如果您看不懂，可以参考以下总结。\n用法： reflector -选项1 -选项2 … 选项： --save \u003c文件路径\u003e 把镜像列表保存到给定的路径 --sort {age,rate,country,score,delay} 以给定条件给镜像排序。 age：服务器最后同步时间； rate：下载速度； country：国家名； score：“镜像状态”中的得分； delay：“镜像状态”中的延迟 --delay n 只返回同步延迟在 n 小时之内的镜像 -a n 只返回 n 小时内同步的镜像 -c \u003c国家\u003e -p \u003c协议\u003e 笔者推荐使用如下命令选择镜像。此命令将为您选出位于平均同步延迟在 3 小时以内的，位于中国内地的 HTTPS 镜像，并根据速度排序。指定 --completion-percent 95（默认为 100）的目的是防止忽略可用的镜像。\nroot@archiso ~ # reflector -p https -c China --delay 3 --completion-percent 95 --sort rate --save /etc/pacman.d/mirrorlist 上述命令使用了并不稳定的测速功能，如果大量报错，也可以根据得分排序。\nroot@archiso ~ # reflector -p https -c China --delay 3 --completion-percent 95 --sort score --save /etc/pacman.d/mirrorlist 如果您在境外，请使用 reflector --list-countries 查看您所在的国家名，然后自行替换选项 -c 后面的内容。如果国家名包含空格，请使用两字母的国家代号，或者用引号将国家名包裹起来。\n15.2 手动编辑文件 您也可以手动编辑 /etc/pacman.d/mirrorlist。国内知名的软件仓库镜像站有清华（TUNA）和中科大（USTC），但是笔者不推荐将它们放在第一位。因为使用者过多，服务器负载过大，影响下载速度。根据下列文章，笔者推荐北外（BFSU）镜像。该镜像由清华 TUNA 协会维护，质量速度俱佳。此外，上交（SJTUG）镜像也是不错的选择。\nroot@archiso ~ # nano /etc/pacman.d/mirrorlist 文件 /etc/pacman.d/mirrorlist ----------------------------- # 以下为文件内容 Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch 如果您在国外，可以选择 pkgbuild 镜像。\n文件 /etc/pacman.d/mirrorlist ----------------------------- # 以下为文件内容 Server = https://geo.mirror.pkgbuild.com/$repo/os/$arch 随后按下 Ctrl+O 保存，Ctrl+X 退出。\n16 安装基础包 终于到了安装环节。我们使用 pacstrap 安装（元）软件包 base、linux和linux-firmware，它们分别是 Arch Linux 基础元软件包，linux 内核和常规硬件的固件。此外，如果您使用较新（2019 年及以后生产）的笔记本电脑，则需要安装软件包 sof-firmware，否则可能没有声音。\nArch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核 ，但是对于新手，只推荐使用 linux 内核。\nroot@archiso ~ # pacstrap -K /mnt base linux linux-firmware 此命令需要一段时间执行。执行完毕后请检查输出，不应出现任何错误（ERROR）。如果出现，请先尝试重新执行命令。如果反复报错，可以寻求他人的帮助。\n如果报告“验证软件包错误”，可以尝试以下方法，然后重新安装。\nroot@archiso ~ # pacman-key --init # 初始化密钥环 root@archiso ~ # pacman-key --populate root@archiso ~ # pacman -Sy archlinux-keyring # 更新 archlinux-keyring 17 fstab fstab 是一个系统文件，决定了系统启动时如何自动挂载分区。没有 fstab，系统将找不到根分区，从而无法启动。fstab 有一定的格式，我们用一个例子说明该文件的格式。\n/etc/fstab ---- # UUID=0a3407de-014b-458b-b5c1-848e92a327a3 / ext4 noatime 0 1 UUID=f9fe0b69-a280-415d-a03a-a32752370dee none swap defaults 0 0 UUID=b411dc99-f0a0-4c87-9e05-184977be8539 /home ext4 noatime 0 2 第一栏：设备，描述了要被挂载的块设备，推荐使用 UUID 方式，也可以使用分区标签（label）。 第二栏：文件夹，即挂载文件夹。 第三栏：类型，即文件系统类型。 第四栏：选项，即挂载选项。 第五栏：dump，用于 dump 功能决定文件系统是否需要备份，一般填 0。 第六栏：fsck，是否在启动过程中检查文件系统，对于 ext4 格式的根分区，应该填 1，其余填 0。\nArch Linux 提供了自动生成 fstab 的工具，我们利用它直接生成。\nroot@archiso ~ # genfstab -U /mnt \u003e\u003e /mnt/etc/fstab 其中 genfstab -U /mnt 是以 UUID 的描述方式生成 fstab。\u003e\u003e 的意思是，将输出附加到指定文件之后。\n生成完成后，记得使用 cat 命令打印文件内容，仔细检查一遍。\nroot@archiso ~ # cat /mnt/etc/fstab 18 chroot 我们使用 arch-chroot 脚本，切换到新安装的系统，以后的操作就可以在新安装的系统中完成了。\nroot@archiso ~ # arch-chroot /mnt 19 时区 我们设置时区的软链接。在中国内地的读者请使用上海时区，在其他地区的读者可以在输入“/usr/share/zoneinfo/”之后按下 Tab 查看可选的时区。\n[root@archiso ~]# ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 然后，设置硬件时间。\n[root@archiso ~]# hwclock --systohc 20 本地化 我们将设置 locale、终端键盘布局和字体。locale 决定了系统的语言和格式，包括终端显示哪种语言，数字、时间和货币以哪国的格式显示等等。\n20.1 设置 locale 首先使用包管理器 pacman 安装两个软件包。使用 pacman 安装软件包需要利用 -S (–sync) 选项，这个选项的意思是“同步的数据库”。\n[root@archiso ~]# pacman -S vim terminus-font vim 是著名的文本编辑器，而 terminus-font 是终端字体。我们输入以下命令，利用 vim 编辑 /etc/locale.gen。\n[root@archiso ~]# vim /etc/locale.gen vim 的功能十分强大，在这里只解释用到的功能，其他功能在下一篇文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。 输入 /，进入搜索功能，输入 en_US.UTF-8，我们找到了以下一行。\n#en_US.UTF-8 UTF-8 按下 Enter，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。\nen_US.UTF-8 UTF-8 再一次输入 /，进入搜索功能，输入 zh_CN.UTF-8，按下 Enter。按方向左键，再输入 x，将“#”删除。\nzh_CN.UTF-8 UTF-8 随后输入 :，进入命令模式，输入 wq，按下 Enter，保存并退出 vim 软件环境。\n接下来，输入如下命令，生成 locale。\n[root@archiso ~]# locale-gen 我们再使用 vim 创建并编辑 locale.conf，设置 locale。\n[root@archiso ~]# vim /etc/locale.conf 这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下 i，进入插入模式。请输入如下字符。\nLANG=en_US.UTF-8 然后按 Esc，退出插入模式。再输入 :，进入命令模式，输入wq，按下 Enter，保存并退出 vim 软件环境。\n20.2 设置终端键盘布局和字体 我们创建并编辑 vconsole.conf，设置终端的默认字体。我们已经在安装开始时设置过终端字体，但是重启之后设置将失效。为了让设置永久生效，我们需要把设置写在文件中。请输入如下命令。\n[root@archiso ~]# vim /etc/vconsole.conf 请用相同的方法输入如下字符。请在“KEYMAP=”后面输入您在第 7 节设置终端键盘布局时选择的键盘布局（这一行可以不设置），在“FONT=”后面输入您在第 7 节设置终端字体时选择的字体，保存并退出。\n/etc/vconsole.conf ---- FONT=ter-132b 21 网络配置 请编辑 /etc/hostname 文件，设置主机名。这将成为您计算机的名字。这篇文章为设置主机名提供了一些建议。\n[root@archiso ~]# vim /etc/hostname /etc/hostname ---- 我的主机名 然后，请安装一个网络管理器，笔者推荐使用 NetworkManager。\n[root@archiso ~]# pacman -S networkmanager NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在使用 systemd 设置 NetworkManager 开机自动启动。\n[root@archiso ~]# systemctl enable NetworkManager.service 22 root 密码 root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码。\n请设置 root 密码。\n[root@archiso ~]# passwd New password: # 注：输入密码后不会显示“*”，这是正常现象 Retype new password: passwd: password updated successfully 23 引导加载程序 为了启动 Arch Linux，建议使用一个引导加载程序，笔者推荐使用的引导加载程序是 GRUB。\n再次声明，本教程只针对 UEFI 启动模式的计算机，如果您的计算机使用 BIOS 启动模式，请参阅此教程。\n关于 Arch Linux 启动的过程，参见 ArchWiki。\n23.1 微码 根据您的 CPU 生产厂商，安装相应的微码。\n请先查看您的 CPU 型号。\n[root@archiso ~]# cat /proc/cpuinfo | grep \"model name\" 如果是 Intel CPU，请安装软件包 intel-ucode。\n[root@archiso ~]# pacman -S intel-ucode 如果是 AMD CPU，请安装软件包 amd-ucode。\n[root@archiso ~]# pacman -S amd-ucode 23.2 安装引导加载程序（针对全新安装 Arch Linux） 首先，安装必要的软件包。\n[root@archiso ~]# pacman -S grub efibootmgr 然后，安装 GRUB 到计算机。\n[root@archiso ~]# grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB 如果您在挂载分区时，将 esp 分区挂载到了 /efi 或者 /boot/efi，请在 –efi-directory 选项中作相应变动。如果您完全按照本教程操作，则不用作改变。\n如果输出 Installation finished. No error reported.，则说明安装成功，否则请立即检查错误。\n最后，生成 GRUB 配置，其中 -o 选项将配置输出到指定的文件中。\n[root@archiso ~]# grub-mkconfig -o /boot/grub/grub.cfg 24 重新启动计算机 首先，退出 chroot 环境。\n[root@archiso ~]# exit 然后，关闭交换文件。\nroot@archiso ~ # swapoff /mnt/swapfile 随后，取消挂载 /mnt。\nroot@archiso ~ # umount -R /mnt 最后，重新启动计算机。\nroot@archiso ~ # reboot 25 安装后的工作 至此，一个基本的 Arch Linux 系统已经安装完毕，现在您可以通过终端控制系统。笔者将在下一篇文章中介绍安装后的配置，包括普通账户的创建、显卡驱动和图形界面的安装，敬请阅读。\n",
  "wordCount" : "12537",
  "inLanguage": "zh",
  "image": "https://rosa-thomas.me/images/cherry.png","datePublished": "2023-01-19T23:38:00+08:00",
  "dateModified": "2023-01-19T23:38:00+08:00",
  "author":{
    "@type": "Person",
    "name": "我"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://rosa-thomas.me/zh/posts/2023/01/arch-linux-installation/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rosa Thomas 的博客",
    "logo": {
      "@type": "ImageObject",
      "url": "https://rosa-thomas.me/images/cherry.png"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://rosa-thomas.me/zh/" accesskey="h" title="Rosa Thomas 的博客 (Alt + H)">
                <img src="https://rosa-thomas.me/images/cherry.png" alt="" aria-label="logo"
                    height="25">Rosa Thomas 的博客</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                    <ul class="lang-switch"><li>|</li>
                        <li>
                            <a href="https://rosa-thomas.me/en/" title="English"
                                aria-label="English">En</a>
                        </li>
                        <li>
                            <a href="https://rosa-thomas.me/zh-tw/" title="中文（臺灣）"
                                aria-label="中文（臺灣）">Zh-Tw</a>
                        </li>
                    </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://rosa-thomas.me/zh/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://rosa-thomas.me/zh/tags/" title="Tags">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://rosa-thomas.me/zh/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://rosa-thomas.me/zh/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://rosa-thomas.me/zh/">主页</a>&nbsp;»&nbsp;<a href="https://rosa-thomas.me/zh/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      一份写给新手的 Arch Linux 安装教程（2025.11）
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2023-01-19 23:38:00 +0800 CST'>2023-01-19</span>&nbsp;·&nbsp;<span>26 分钟</span>&nbsp;·&nbsp;<span>12537 字</span>&nbsp;·&nbsp;<span>我</span>

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#0-前言">0 前言</a></li>
    <li><a href="#1-安装要求">1 安装要求</a>
      <ul>
        <li><a href="#11-硬件">1.1 硬件</a></li>
        <li><a href="#12-数据备份">1.2 数据备份</a></li>
        <li><a href="#13-知识和技能">1.3 知识和技能</a></li>
        <li><a href="#建议阅读">建议阅读</a></li>
      </ul>
    </li>
    <li><a href="#2-获取安装映像">2 获取安装映像</a>
      <ul>
        <li><a href="#21-通过-bittorrent-下载">2.1 通过 BitTorrent 下载</a></li>
        <li><a href="#22-从镜像站下载">2.2 从镜像站下载</a></li>
      </ul>
    </li>
    <li><a href="#3-验证映像">3 验证映像</a>
      <ul>
        <li><a href="#建议阅读-1">建议阅读</a></li>
      </ul>
    </li>
    <li><a href="#4-准备安装介质">4 准备安装介质</a>
      <ul>
        <li><a href="#建议阅读-2">建议阅读</a></li>
      </ul>
    </li>
    <li><a href="#5-启动到-live-环境">5 启动到 live 环境</a>
      <ul>
        <li><a href="#51-启动菜单快捷键和-bios-快捷键">5.1 启动菜单快捷键和 BIOS 快捷键</a></li>
        <li><a href="#52-关闭安全启动">5.2 关闭安全启动</a></li>
        <li><a href="#53-启动到-live-环境">5.3 启动到 live 环境</a></li>
      </ul>
    </li>
    <li><a href="#6-必要的介绍和提示">6 必要的介绍和提示</a>
      <ul>
        <li><a href="#61-关于-linux-命令语法的介绍">6.1 关于 Linux 命令语法的介绍</a></li>
        <li><a href="#62-关于-archinstall-程序的提示">6.2 关于 archinstall 程序的提示</a></li>
      </ul>
    </li>
    <li><a href="#7-设置终端键盘布局和字体">7 设置终端键盘布局和字体</a>
      <ul>
        <li><a href="#71-linux-命令简介">7.1 Linux 命令简介</a></li>
        <li><a href="#72-设置终端键盘布局">7.2 设置终端键盘布局</a></li>
        <li><a href="#73-设置终端字体">7.3 设置终端字体</a></li>
      </ul>
    </li>
    <li><a href="#8-验证启动模式">8 验证启动模式</a></li>
    <li><a href="#9-连接到互联网">9 连接到互联网</a></li>
    <li><a href="#10-更新系统时间">10 更新系统时间</a></li>
    <li><a href="#11-磁盘分区">11 磁盘分区</a>
      <ul>
        <li><a href="#111-全新安装-arch-linux-的磁盘分区">11.1 全新安装 Arch Linux 的磁盘分区</a></li>
      </ul>
    </li>
    <li><a href="#12-分区格式化">12 分区格式化</a>
      <ul>
        <li><a href="#121-全新安装-arch-linux-的分区格式化">12.1 全新安装 Arch Linux 的分区格式化</a></li>
      </ul>
    </li>
    <li><a href="#13-挂载分区">13 挂载分区</a>
      <ul>
        <li><a href="#131-全新安装-arch-linux-的挂载分区">13.1 全新安装 Arch Linux 的挂载分区</a></li>
      </ul>
    </li>
    <li><a href="#14-建立交换文件">14 建立交换文件</a></li>
    <li><a href="#15-选择软件仓库镜像">15 选择软件仓库镜像</a>
      <ul>
        <li><a href="#151-使用-reflector">15.1 使用 reflector</a></li>
        <li><a href="#152-手动编辑文件">15.2 手动编辑文件</a></li>
      </ul>
    </li>
    <li><a href="#16-安装基础包">16 安装基础包</a></li>
    <li><a href="#17-fstab">17 fstab</a></li>
    <li><a href="#18-chroot">18 chroot</a></li>
    <li><a href="#19-时区">19 时区</a></li>
    <li><a href="#20-本地化">20 本地化</a>
      <ul>
        <li><a href="#201-设置-locale">20.1 设置 locale</a></li>
        <li><a href="#202-设置终端键盘布局和字体">20.2 设置终端键盘布局和字体</a></li>
      </ul>
    </li>
    <li><a href="#21-网络配置">21 网络配置</a></li>
    <li><a href="#22-root-密码">22 root 密码</a></li>
    <li><a href="#23-引导加载程序">23 引导加载程序</a>
      <ul>
        <li><a href="#231-微码">23.1 微码</a></li>
        <li><a href="#232-安装引导加载程序针对全新安装-arch-linux">23.2 安装引导加载程序（针对全新安装 Arch Linux）</a></li>
      </ul>
    </li>
    <li><a href="#24-重新启动计算机">24 重新启动计算机</a></li>
    <li><a href="#25-安装后的工作">25 安装后的工作</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="0-前言">0 前言<a hidden class="anchor" aria-hidden="true" href="#0-前言">#</a></h2>
<p>Arch Linux 是一个简洁而灵活的 Linux 发行版，适合有时间、有兴趣和热爱自由的用户。Arch Linux 仅提供一个简朴的安装环境，只有命令行界面，没有图形用户界面，因此用户有极大的空间以自己喜好的方式进行安装和配置。对此，虽然熟练者感到如鱼得水，但新手往往感到陌生和茫然。</p>
<p>本文详细地介绍了在一台 x86-64 架构的计算机中安装 Arch Linux 的过程，尽可能遵循<a href="https://wiki.archlinux.org/title/Installation_guide">官方安装指南</a>。本文共介绍三种安装方式，它们分别是：</p>
<ol>
<li>清空硬盘并安装 Arch Linux，</li>
<li>在虚拟机中安装 Arch Linux，</li>
<li>安装 Arch Linux 并和 Windows 组成双系统。</li>
</ol>
<p>为节省篇幅，本文主要介绍第一种方式，即清空硬盘并安装 Arch Linux。后两种方式的安装过程与第一种大致相同，其不同之处将在专门文章中详细说明。</p>
<p>在动手操作之前，建议您阅读笔者的文章<a href="">安装 Arch Linux 之前需要知道的事情</a>，以便对该操作系统有初步的了解。</p>
<p>尽管本文力图做到准确、全面和及时更新，但不能保证没有错误、疏漏和过时之处。本文的目的不是替代官方安装指南，而是通过把文档式的语言转化成教程式的语言，以降低新手安装 Arch Linux 的难度，便于 Arch Linux 乃至自由软件在简体中文世界的传播。为了获取更加可靠的信息，笔者建议您阅读每节后的“建议阅读”小节，那里提供了资料来源。</p>
<h2 id="1-安装要求">1 安装要求<a hidden class="anchor" aria-hidden="true" href="#1-安装要求">#</a></h2>
<p>请确保您满足以下要求。</p>
<h3 id="11-硬件">1.1 硬件<a hidden class="anchor" aria-hidden="true" href="#11-硬件">#</a></h3>
<ol>
<li>计算机：一台 x86-64 架构的计算机，至少 512 MiB 内存，2 GiB 硬盘空间，可连接到互联网；本文建议至少 4 GiB 内存，100 GiB 硬盘空间，以满足日常使用需求。</li>
<li>安装介质：一个 U 盘，至少 2 GiB 剩余空间。</li>
</ol>
<h3 id="12-数据备份">1.2 数据备份<a hidden class="anchor" aria-hidden="true" href="#12-数据备份">#</a></h3>
<ol>
<li>备份计算机中的重要数据（至少包括软件列表和配置、个人文件、收藏夹和书签等）；</li>
<li>备份安装介质（即上述 U 盘）中的全部文件。</li>
</ol>
<h3 id="13-知识和技能">1.3 知识和技能<a hidden class="anchor" aria-hidden="true" href="#13-知识和技能">#</a></h3>
<ol>
<li>了解 Linux 基础知识（最好使用过新手友好的发行版，例如 Ubuntu、Linux Mint 或 Deepin 等）；</li>
<li>有动手能力和意愿；</li>
<li>有英语读写能力，并了解获取信息和寻求帮助的途径，以便遇到问题时查阅资料或在社区提问。</li>
</ol>
<blockquote>
<p>💡 <strong>提示</strong></p>
<ol>
<li>如果您是第一次安装 Linux 操作系统，建议选择上述新手友好的发行版，以获得更好的体验。</li>
<li>如果您想了解更多知识，包括 Arch Linux 简介、如何选择发行版、如何获取信息和寻求帮助等，欢迎阅读笔者的文章<a href="">安装 Arch Linux 之前需要知道的事情</a>。</li>
</ol></blockquote>
<h3 id="建议阅读">建议阅读<a hidden class="anchor" aria-hidden="true" href="#建议阅读">#</a></h3>
<ol>
<li><a href="https://wiki.archlinux.org/title/Installation_guide">官方安装指南</a>列出了安装 Arch Linux 的步骤，是本文的写作依据。如本文（或其他第三方教程）与官方安装指南有差异，一律以官方安装指南为准。</li>
<li><a href="https://www.archlinuxcn.org/">Arch Linux 中文社区</a>翻译和编写的<a href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97">中文版安装指南</a>可作为官方安装指南的补充。中文版安装指南在翻译官方安装指南的基础上，增加了若干实用提示和本地化建议，以供参考。</li>
<li><a href="https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md">提问的智慧</a>是一篇流传甚广的文章，可以帮助您更有效地在自由软件社区提问。这里给出的是该文章的简体中文版，英语原文的链接已在简体中文版的开头列出。</li>
<li><a href="https://wiki.archlinuxcn.org/wiki/Project:Arch_Linux_%E4%B8%AD%E6%96%87%E7%A4%BE%E5%8C%BA%E4%BA%A4%E6%B5%81%E7%BE%A4%E6%8C%87%E5%BC%95">Arch Linux 中文社区交流群指引</a>介绍了 Arch Linux 中文社区交流群的加入方法和群组规则。对于一名自由软件使用者而言，加入社区交流群可以更方便地获取帮助，也可以更好的感受和传递自由软件文化。虽然每个社区都不是完美的，但笔者相信社区对大多数人都能带来积极作用。</li>
</ol>
<h2 id="2-获取安装映像">2 获取安装映像<a hidden class="anchor" aria-hidden="true" href="#2-获取安装映像">#</a></h2>
<p>安装映像是一个 <code>.iso</code> 文件，也称为映像文件，将其写入安装介质（例如 U 盘）内，便可作为启动盘在计算机上运行 live 系统。live 系统是一种无需被安装到硬盘上即可在计算机上启动的操作系统，一般用于安装操作系统（到硬盘上）或抢救操作系统。要了解 Arch Linux 提供的 live 系统中包含的软件包列表，请查看 <a href="https://geo.mirror.pkgbuild.com/iso/latest/arch/pkglist.x86_64.txt">pkglist.x86_64.txt</a>。</p>
<p>要获取安装映像，请前往<a href="https://archlinux.org/download/">下载页面</a>，选择一种方式，下载文件 <code>archlinux-&lt;映像发布日期&gt;-x86_64.iso</code>。请注意，上述文件名中的 <code>&lt;映像发布日期&gt;</code> 应替换为具体的映像文件发布日期，例如 <code>2025.11.01</code>，从而实际的文件名可以是 <code>archlinux-2025.11.01-x86_64.iso</code>。</p>
<blockquote>
<p>💡 <strong>提示</strong></p>
<p>安装映像保持每月更新，请确保您下载的文件是最新的。</p></blockquote>
<p>建议的下载方式有以下两种：</p>
<ol>
<li>通过 BitTorrent 下载；</li>
<li>从镜像站下载。</li>
</ol>
<h3 id="21-通过-bittorrent-下载">2.1 通过 BitTorrent 下载<a hidden class="anchor" aria-hidden="true" href="#21-通过-bittorrent-下载">#</a></h3>
<p>如果您要通过 BitTorrent 下载，请在上述下载页面中找到 <em>BitTorrent Download (recommended)</em> 部分，打开链接 <em>Torrent for &lt;映像发布日期&gt;</em>，例如 <a href="https://archlinux.org/releng/releases/2025.11.01/torrent/">Torrent for 2025.11.01</a>，下载种子（Torrent）文件。然后用支持 BitTorrent 协议的下载工具打开该种子文件，并开始下载映像文件。</p>
<blockquote>
<p>🔍 <strong>注意</strong></p>
<p>本文中的种子文件下载链接可能不是最新的，请前往下载页面获取最新的链接。</p></blockquote>
<h3 id="22-从镜像站下载">2.2 从镜像站下载<a hidden class="anchor" aria-hidden="true" href="#22-从镜像站下载">#</a></h3>
<p>如果您要从镜像站下载，请在上述下载页面中找到 <em>HTTP Direct Downloads</em> 部分，选择一个合适的镜像站，选择的首要标准是地理距离。</p>
<p>如果您在中国内地，建议选择以下镜像站之一。</p>
<ul>
<li><a href="https://mirrors.bfsu.edu.cn/archlinux/iso/latest/">北京外国语大学开源软件镜像站</a></li>
<li><a href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/">清华大学开源软件镜像站</a></li>
<li><a href="https://mirror.sjtu.edu.cn/archlinux/iso/latest/">上海交通大学开源软件镜像站</a></li>
<li><a href="https://mirrors.ustc.edu.cn/archlinux/iso/latest/">中国科学技术大学开源软件镜像</a></li>
</ul>
<p>如果您在境外，建议选择地理距离最近的镜像站，或选择官方镜像站 <a href="https://geo.mirror.pkgbuild.com/iso/latest/">pkgbuild.com</a>。</p>
<p>打开镜像站链接后，出现如下的文件夹内容列表：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">../
</span></span><span class="line"><span class="cl">arch/                                              01-Nov-2025 09:50                   -
</span></span><span class="line"><span class="cl">archlinux-2025.11.01-x86_64.iso                    01-Nov-2025 09:50          1526038528
</span></span><span class="line"><span class="cl">archlinux-2025.11.01-x86_64.iso.sig                01-Nov-2025 09:51                 141
</span></span><span class="line"><span class="cl">archlinux-2025.11.01-x86_64.iso.torrent            01-Nov-2025 09:51               82371
</span></span><span class="line"><span class="cl">archlinux-bootstrap-2025.11.01-x86_64.tar.zst      01-Nov-2025 09:51           144969772
</span></span><span class="line"><span class="cl">archlinux-bootstrap-2025.11.01-x86_64.tar.zst.sig  01-Nov-2025 09:51                 141
</span></span><span class="line"><span class="cl">archlinux-bootstrap-x86_64.tar.zst                 01-Nov-2025 09:51           144969772
</span></span><span class="line"><span class="cl">archlinux-bootstrap-x86_64.tar.zst.sig             01-Nov-2025 09:51                 141
</span></span><span class="line"><span class="cl">archlinux-x86_64.iso                               01-Nov-2025 09:50          1526038528
</span></span><span class="line"><span class="cl">archlinux-x86_64.iso.sig                           01-Nov-2025 09:51                 141
</span></span><span class="line"><span class="cl">b2sums.txt                                         01-Nov-2025 09:51                 654
</span></span><span class="line"><span class="cl">sha256sums.txt                                     01-Nov-2025 09:51                 398
</span></span></code></pre></div><p>其中，文件 <code>archlinux-2025.11.01-x86_64.iso</code> 即为所需的安装映像，点击文件名即可开始下载。</p>
<h2 id="3-验证映像">3 验证映像<a hidden class="anchor" aria-hidden="true" href="#3-验证映像">#</a></h2>
<p>为确保安装映像在下载过程中没有损坏，需要计算下载后的映像文件的 SHA256 校验和（Checksum），并与下载页面中给出的校验和进行比对。</p>
<p>请在 Windows 系统中，在映像文件所在的文件夹处打开一个 PowerShell 窗口。在 PowerShell 窗口中，执行以下命令：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="n">certutil</span> <span class="n">-hashfile</span> <span class="p">.\&lt;</span><span class="n">映像文件名</span><span class="p">&gt;</span> <span class="n">SHA256</span>
</span></span></code></pre></div><p>请注意，上述命令中的 <code>&lt;映像文件名&gt;</code> 应替换为具体的安装映像的文件名，例如 <code>archlinux-2025.11.01-x86_64.iso</code>，从而实际的命令可以是 <code>certutil -hashfile .\archlinux-2025.11.01-x86_64.iso SHA256</code>。</p>
<blockquote>
<p>💡 <strong>提示</strong></p>
<ol>
<li>要在一个文件夹处打开 PowerShell 窗口，请使用文件资源管理器打开该文件夹，并将鼠标移动到空白处，按下 <code>Shift</code> + <code>右键</code>，再点击<em>在此处打开 PowerShell 窗口</em>选项。</li>
<li>要执行一条命令，请在 PowerShell 窗口中输入该命令，并按下 <code>Enter</code>。</li>
<li>在 PowerShell 窗口中，按下 <code>Tab</code>，可以自动补全文件名。</li>
</ol></blockquote>
<p>这个命令使用了 Windows 系统自带的 certutil 程序的 <code>-hashfile</code> 选项，以计算工作文件夹（<code>.\</code>）中的映像文件（例如  <code>archlinux-2024.11.01-x86_64.iso</code>）的 SHA256 校验和，其输出如下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">3fde01031127fb49d3fb489dd92f8d1fc0a7fc4fdfff220936031a00a7673a2e  archlinux-2024.11.01-x86_64.iso
</span></span></code></pre></div><p>请在 Arch Linux <a href="https://archlinux.org/download/">下载页面</a>中找到 <em>Checksums and signatures</em> 部分，查看其中的 SHA256 校验和。如果该值与上述命令输出的值相同，说明映像没有损坏；如果不同，说明映像损坏，需要重新下载。</p>
<h3 id="建议阅读-1">建议阅读<a hidden class="anchor" aria-hidden="true" href="#建议阅读-1">#</a></h3>
<ol>
<li>Microsoft Learn <a href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/certutil">对 certutil 程序的介绍</a></li>
</ol>
<h2 id="4-准备安装介质">4 准备安装介质<a hidden class="anchor" aria-hidden="true" href="#4-准备安装介质">#</a></h2>
<p>要在计算机上启动 live 系统，需要将下载好的安装映像写入 U 盘内，以制作 USB 启动盘。常用的 USB 启动盘制作工具有 <a href="https://rufus.ie/zh/">Rufus</a> 和 <a href="https://www.ventoy.net/cn/index.html">Ventoy</a> 等。除 Ventoy 外，大多数制作工具在每次写入前都需要格式化 U 盘，将较大地影响便利性。因此本文以 Ventoy 为例进行介绍。</p>
<p>Ventoy 是一个制作可启动 U 盘的开源软件。使用 Ventoy 制作 USB 启动盘，无需反复格式化 U 盘，只需将 <code>.iso</code> 文件复制到 U 盘中即可启动它。制作 USB 启动盘的详细步骤如下：</p>
<p>首先，前往 Ventoy <a href="https://www.ventoy.net/cn/download.html">下载页面</a>，下载 <code>ventoy-&lt;版本号&gt;-windows.zip</code>。请注意，上述文件名中的 <code>&lt;版本号&gt;</code> 应替换为具体的 Ventoy 版本号，如 <code>1.1.07</code>, 从而实际的文件名可以是 <code>ventoy-1.1.07-windows.zip</code>。</p>
<blockquote>
<p>💡 <strong>提示</strong></p>
<p>在上述下载页面中点击文件名将跳转到 GitHub，而 GitHub 在中国内地连接不稳定。如果无法访问，请通过以下镜像站或云存储服务器下载：</p>
<ol>
<li><a href="https://github.com/ventoy/Ventoy/releases">GitHub</a></li>
<li><a href="https://gitee.com/longpanda/Ventoy/releases">Gitee</a></li>
<li><a href="https://mirrors.nju.edu.cn/github-release/ventoy/Ventoy/">南京大学开源镜像站</a></li>
<li><a href="https://mirrors.sdu.edu.cn/github-release/ventoy_Ventoy/">山东大学镜像站</a></li>
<li><a href="https://www.lanzoui.com/b01bd54gb">蓝奏云</a></li>
<li><a href="https://www.123pan.com/s/rjSKVv-8YtN">123 云盘</a>（提取码：vtoy）</li>
<li><a href="https://pan.baidu.com/s/1lVoctl45GpLBgG53W1W7qQ?pwd=vtoy">百度网盘</a>（提取码：vtoy）</li>
</ol></blockquote>
<p>其次，请利用本文上一节中介绍的方法，检验下载后的 <code>.zip</code> 文件的 SHA256 校验和。计算出该文件的校验和后，请将其与上述 Ventoy 下载页面给出的校验和进行比对。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">3e7a8db199c7e791e341e6d388d078bfc6b7a77c6f10282edf9c7b82f84f3ad4  ventoy-1.1.07-windows.zip
</span></span></code></pre></div><p>随后，使用解压缩程序打开该 <code>.zip</code> 文件，将其解压缩后，双击 <code>Ventoy2Disk.exe</code> 以运行该程序。</p>
<blockquote>
<p>⚠️ <strong>警告</strong></p>
<p>下一步将清除 U 盘内全部文件，请务必提前作好备份。</p></blockquote>
<p>然后，将准备好的 U 盘插入计算机，在 Ventoy 程序窗口的<em>设备</em>选项卡中选择该 U 盘，并点击<em>安装</em>按钮。安装 Ventoy 后，U 盘将被分为两个分区，其中容量较大的分区可用来存放 <code>.iso</code> 文件。</p>
<p>最后，把安装映像复制到 U 盘容量较大的分区内即可。</p>
<blockquote>
<p>💡 <strong>提示</strong></p>
<p>安装了 Ventoy 的 U 盘仍可作为普通 U 盘使用，存放个人文件并不会影响 Ventoy 的功能。</p></blockquote>
<h3 id="建议阅读-2">建议阅读<a hidden class="anchor" aria-hidden="true" href="#建议阅读-2">#</a></h3>
<ol>
<li><a href="https://www.ventoy.net/cn/doc_start.html">Ventoy 使用说明</a>详细介绍了使用 Ventoy 制作 USB 启动盘的步骤。</li>
</ol>
<h2 id="5-启动到-live-环境">5 启动到 live 环境<a hidden class="anchor" aria-hidden="true" href="#5-启动到-live-环境">#</a></h2>
<p>准备好安装介质后，可以将计算机启动到 live 环境了。在此之前，需要对计算机进行一些设置。</p>
<h3 id="51-启动菜单快捷键和-bios-快捷键">5.1 启动菜单快捷键和 BIOS 快捷键<a hidden class="anchor" aria-hidden="true" href="#51-启动菜单快捷键和-bios-快捷键">#</a></h3>
<p>启动菜单快捷键（Boot Menu Key）是用于在启动计算机时进入启动设备选择菜单（Boot Device Selection Menu）的快捷键。在启动设备选择菜单中，可选择从哪个设备（例如硬盘、U 盘或光驱等）启动计算机。不同制造商生产的计算机的启动菜单快捷键可能不同，其具体差异如下表所示：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">制造商</th>
          <th style="text-align: center">台式机</th>
          <th style="text-align: center">笔记本</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">联想（Lenovo）</td>
          <td style="text-align: center"><code>F12</code></td>
          <td style="text-align: center"><code>F12</code> 或 <code>Fn</code> + <code>F12</code></td>
      </tr>
      <tr>
          <td style="text-align: center">联想（Lenovo）ThinkPad</td>
          <td style="text-align: center">&mdash;</td>
          <td style="text-align: center"><code>F12</code></td>
      </tr>
      <tr>
          <td style="text-align: center">戴尔（Dell）</td>
          <td style="text-align: center"><code>F12</code></td>
          <td style="text-align: center"><code>F12</code></td>
      </tr>
      <tr>
          <td style="text-align: center">惠普（HP）</td>
          <td style="text-align: center"><code>F9</code> 或 <code>Esc</code></td>
          <td style="text-align: center"><code>F9</code></td>
      </tr>
      <tr>
          <td style="text-align: center">华硕（ASUS）</td>
          <td style="text-align: center"><code>F8</code></td>
          <td style="text-align: center"><code>Esc</code></td>
      </tr>
      <tr>
          <td style="text-align: center">微星（MSI）</td>
          <td style="text-align: center"><code>F11</code></td>
          <td style="text-align: center"><code>F11</code></td>
      </tr>
      <tr>
          <td style="text-align: center">技嘉（Gigabyte）</td>
          <td style="text-align: center"><code>F12</code></td>
          <td style="text-align: center">&mdash;</td>
      </tr>
      <tr>
          <td style="text-align: center">宏碁（Acer）</td>
          <td style="text-align: center"><code>F12</code></td>
          <td style="text-align: center"><code>F12</code></td>
      </tr>
      <tr>
          <td style="text-align: center">三星（Samsung）</td>
          <td style="text-align: center">&mdash;</td>
          <td style="text-align: center"><code>F10</code> 或 <code>Esc</code></td>
      </tr>
      <tr>
          <td style="text-align: center">索尼（Sony）</td>
          <td style="text-align: center">&mdash;</td>
          <td style="text-align: center"><code>F11</code> 或 <code>Esc</code></td>
      </tr>
      <tr>
          <td style="text-align: center">微软（Microsoft）Surface</td>
          <td style="text-align: center">&mdash;</td>
          <td style="text-align: center"><code>音量减</code> + <code>电源键</code></td>
      </tr>
  </tbody>
</table>
<p>BIOS 快捷键是用于在启动计算机时进入 BIOS 或 UEFI 设置界面的快捷键。</p>
<h3 id="52-关闭安全启动">5.2 关闭安全启动<a hidden class="anchor" aria-hidden="true" href="#52-关闭安全启动">#</a></h3>
<h3 id="53-启动到-live-环境">5.3 启动到 live 环境<a hidden class="anchor" aria-hidden="true" href="#53-启动到-live-环境">#</a></h3>
<p>首先，请将准备好的安装介质插入计算机，并启动该计算机，反复按启动菜单快捷键，直到出现启动设备选择菜单。</p>
<p>其次，请在启动设备选择菜单中选择您的 U 盘，以运行其中的 Ventoy 程序。</p>
<blockquote>
<p>💡 <strong>提示</strong></p>
<p>要在启动设备选择菜单中辨认出您的 U 盘，可以重点检查其中包含 <em>USB</em>、U 盘的<em>制造商</em>和<em>容量</em>等字样的选项。</p></blockquote>
<p>然后，Ventoy 将列出 U 盘内存放的全部镜像文件。请在其中选择 Arch Linux 安装镜像项，再在启动模式菜单中选择 <em>Boot in normal mode</em> 项，以启动 Arch Linux 的 live 系统。</p>
<p>随后，live 系统中的引导加载程序（例如 GRUB）将启动，请在引导加载程序的菜单中选择第一项 <em>Arch Linux install medium (x86_64, UEFI)</em>。</p>
<p>最后，请耐心等待 live 系统启动。如果出现如下界面，则 live 系统启动成功。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Arch Linux 6.x.x-arch1-1 (tty1)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">archiso login: root (automatic login)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">To install Arch Linux follow the installation guide:
</span></span><span class="line"><span class="cl">https://wiki.archlinux.org/title/Installation_guide
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><blockquote>
<p>💡 <strong>提示</strong></p>
<p>上述启动过程可以总结如下：</p>
<p>计算机开始启动 &mdash;&gt; 选择启动设备 &mdash;&gt; Ventoy 启动 &mdash;&gt; 选择 Ventoy 将启动的安装镜像 &mdash;&gt; 选择 Ventoy 启动镜像的模式 &mdash;&gt; Arch Linux 的 live 系统开始启动 &mdash;&gt; live 系统中的引导加载程序启动 &mdash;&gt; 在引导加载程序菜单中选择启动项 &mdash;&gt; live 系统启动完成</p></blockquote>
<p>下面的安装步骤将在命令行界面中进行，请做好准备。只要按照指导，耐心而谨慎地输入命令，就相信您能顺利地完成安装过程。</p>
<h2 id="6-必要的介绍和提示">6 必要的介绍和提示<a hidden class="anchor" aria-hidden="true" href="#6-必要的介绍和提示">#</a></h2>
<h3 id="61-关于-linux-命令语法的介绍">6.1 关于 Linux 命令语法的介绍<a hidden class="anchor" aria-hidden="true" href="#61-关于-linux-命令语法的介绍">#</a></h3>
<h3 id="62-关于-archinstall-程序的提示">6.2 关于 archinstall 程序的提示<a hidden class="anchor" aria-hidden="true" href="#62-关于-archinstall-程序的提示">#</a></h3>
<h2 id="7-设置终端键盘布局和字体">7 设置终端键盘布局和字体<a hidden class="anchor" aria-hidden="true" href="#7-设置终端键盘布局和字体">#</a></h2>
<h3 id="71-linux-命令简介">7.1 Linux 命令简介<a hidden class="anchor" aria-hidden="true" href="#71-linux-命令简介">#</a></h3>
<p>在继续之前有必要介绍一下 Linux 命令的语法。一般情况下，一条 Linux 命令由主命令、选项和参数组成。一个命令就像一个祈使句，祈使句由谓语、状语和宾语组成，三者分别对应而只不过语序有所变化，而且选项要前面用“-”标注。我们以句子“快速地吃米饭”举例。在这个句子中，谓语是“吃”，状语是“快速地”，宾语是“米饭”。将其写成命令的形式是这样的</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">吃 -快速地 米饭
</span></span></code></pre></div><p>我们列个表格以便展示二者的对应关系：</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">命令</th>
          <th style="text-align: center">-选项</th>
          <th style="text-align: center">参数</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">谓语</td>
          <td style="text-align: center">-状语</td>
          <td style="text-align: center">宾语</td>
      </tr>
      <tr>
          <td style="text-align: center">吃</td>
          <td style="text-align: center">-快速地</td>
          <td style="text-align: center">米饭</td>
      </tr>
  </tbody>
</table>
<p>请记住下列语法，更多的知识请参阅鸟哥私房菜。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">命令 -选项 参数
</span></span></code></pre></div><h3 id="72-设置终端键盘布局">7.2 设置终端键盘布局<a hidden class="anchor" aria-hidden="true" href="#72-设置终端键盘布局">#</a></h3>
<p>默认键盘布局是美式键盘，您可以使用以下命令列出可用的键盘布局。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@archiso ~ # ls /usr/share/kbd/keymaps/**/*.map.gz
</span></span></code></pre></div><p><code>ls</code> 可能是 Linux 中最常用的命令。关于 Linux 常用命令的学习，请参阅鸟哥私房菜。</p>
<p>您可以使用 <code>loadkeys</code> 命令设置键盘布局。例如，如下命令将键盘布局设置为 Dvorak 布局。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">root</span><span class="err">@</span><span class="n">archiso</span> <span class="o">~</span> <span class="c1"># loadkeys dvorak</span>
</span></span></code></pre></div><h3 id="73-设置终端字体">7.3 设置终端字体<a hidden class="anchor" aria-hidden="true" href="#73-设置终端字体">#</a></h3>
<p>如果您的屏幕分辨率较高，您将发现终端字体较小。要将终端字体设置为高分辨率字体，可使用 <code>setfont</code> 命令。这个命令没有选项，只需输入主命令和参数，如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">setfont &lt;字体名称&gt;
</span></span></code></pre></div><p>对于分辨率为 1080p 的屏幕，建议选择字体 ter-122b。对于分辨率更高的屏幕，建议在 <code>ter-124b</code>、<code>ter-128b</code> 和 <code>ter-132b</code> 中选择，例如：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@archiso ~ # setfont ter-132b
</span></span></code></pre></div><blockquote>
<p>💡 <strong>提示</strong></p>
<p>请记住您选择的字体名称，配置系统时将用到它。</p></blockquote>
<h2 id="8-验证启动模式">8 验证启动模式<a hidden class="anchor" aria-hidden="true" href="#8-验证启动模式">#</a></h2>
<p>本文开始时提到，您的电脑必须在 UEFI 模式下启动，现在验证您的启动模式。</p>
<p>请输入如下命令（注意：使用Tab键可以自动补全）</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># cat /sys/firmware/efi/fw_platform_size</span>
</span></span></code></pre></div><p>如果输出 <code>64</code>，那么系统以 UEFI 模式启动，并且有 64 位 UEFI。如果输出 <code>32</code>，那么系统以 UEFI 模式启动，但是只能使用 GRUB 作为引导加载程序。如果输出为空，即这个文件不存在，那么系统可能以 BIOS 模式启动。</p>
<p>处于 BIOS 启动模式的读者，可以自行进入 BIOS 页面更改启动模式。如果无法更改，说明您的电脑过于老旧，本文无法指导您继续安装。请您参考其他教程，例如</p>
<h2 id="9-连接到互联网">9 连接到互联网<a hidden class="anchor" aria-hidden="true" href="#9-连接到互联网">#</a></h2>
<p>Arch Linux 镜像只提供一个基本的安装环境，软件包仍需要连接互联网后下载。连接互联网有多种方式，包括</p>
<ol>
<li>有线连接</li>
<li>手机 USB 网络共享（仅限 Android 手机）</li>
<li>WiFi 连接</li>
</ol>
<p>笔者建议读者优先使用有线连接和手机 USB 网络共享的方式连接互联网。</p>
<p>连接互联网的步骤如下：</p>
<ul>
<li>检查确保网络接口已经启用。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># ip link</span>
</span></span></code></pre></div><p>您应该在输出中看到 enp0s3 或 wlan0 之类的字样，这就是您的网络接口名称，例如</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast master br0 state DOWN mode DEFAULT qlen 1000 ...
</span></span></code></pre></div><p>尖括号内的 <code>UP</code>，表示接口已经启用。如果没有出现 <code>UP</code>，使用如下命令启用该接口 。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># ip link set &lt;网络接口名称&gt; up    # 请将“&lt;网络接口名称&gt;”替换成您的网络接口名称，如“enp0s3”或“wlan0”</span>
</span></span></code></pre></div><ul>
<li>使用无线连接的读者，使用 rfkill 命令确认无线网卡没有被屏蔽。</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># rfkill</span>
</span></span><span class="line"><span class="cl">ID TYPE      DEVICE      SOFT      HARD
</span></span><span class="line"><span class="cl"> <span class="m">0</span> bluetooth hci0   unblocked unblocked
</span></span><span class="line"><span class="cl"> <span class="m">1</span> wlan      phy0   unblocked unblocked
</span></span></code></pre></div><p>如果无线网卡被硬件屏蔽，请使用硬件开关启用它；如果被软件屏蔽，请输入如下命令启用它。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># rfkill unblock wlan</span>
</span></span></code></pre></div><ul>
<li>选择有线连接的读者，只需要将网线插到电脑相应接口即可连接。选择手机 USB 网络共享的读者，将手机和电脑用数据线连接，然后在手机通知栏中选择“USB 网络共享”即可连接。以下详细介绍连接 WiFi 的方法。</li>
</ul>
<ol>
<li>请使用 iwctl 命令 连接互联网，如下</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># iwctl</span>
</span></span><span class="line"><span class="cl">NetworkConfigurationEnabled: disabled
</span></span><span class="line"><span class="cl">StateDirectory: /var/lib/iwd
</span></span><span class="line"><span class="cl">Version: 2.x
</span></span><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1">#</span>
</span></span></code></pre></div><p>如果您看到上述输出，说明您已经进入了 iwd 程序环境。这时读者可能会觉得陌生，因为通常的命令下达后会直接输出结果，并返回命令提示符，等待下一个命令的输入。而这个命令不同，下达之后进入了程序环境，用户只能与该程序交互，这一点请初学者牢记。关于程序工作环境的更多例子，请参阅鸟哥私房菜。若想退出 iwd 程序环境，只需要输入 quit 即可。</p>
<p>请继续输入命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># device list</span>
</span></span><span class="line"><span class="cl">                       Devices
</span></span><span class="line"><span class="cl">------------------------------------------------------
</span></span><span class="line"><span class="cl">Name   Address            Powered  Adapter  Mode
</span></span><span class="line"><span class="cl">------------------------------------------------------
</span></span><span class="line"><span class="cl">wlan0  xx:xx:xx:xx:xx:xx  on       phy0     station
</span></span></code></pre></div><p>请记住上述输出的设备名称（在 Name 下面），这里以 wlan0 为例，请将 wlan0 替换成您的设备名称。</p>
<p>继续输入命令</p>
<blockquote>
<p><strong>注意</strong></p>
<p>命令中的 <code>#</code>，表示从该字符到行末的所有文字均为注释，注释不是命令的一部分。</p></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station wlan0 scan  # 扫描网络，请将 wlan0 换成您的设备名称</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station wlan0 get-networks  # 输出扫描结果，请将 wlan0 换成您的设备名称</span>
</span></span><span class="line"><span class="cl">         Available Networks
</span></span><span class="line"><span class="cl">------------------------------------
</span></span><span class="line"><span class="cl">Network name    Security    Signal
</span></span><span class="line"><span class="cl">------------------------------------
</span></span><span class="line"><span class="cl">mySSID          psk         ****
</span></span></code></pre></div><p>请记住您的网络名称（在 Network name 下面），这里以 mySSID 为例，请将 mySSID 换成您的网络名称。</p>
<p>继续输入命令</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station wlan0 connect &#34;mySSID&#34;  # 连接网络，请将 wlan0 换成您的设备名称，mySSID 换成您的网络名称</span>
</span></span><span class="line"><span class="cl">Type the network passphrase <span class="k">for</span> mySSID psk.
</span></span><span class="line"><span class="cl">Passphrase: ********  <span class="c1"># 输入密码</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># quit  # 退出 iwd 程序环境</span>
</span></span></code></pre></div><ol start="2">
<li>这时您应该已经连接上互联网了，请使用 ping 命令测试网络（使用 Ctrl+C 中止命令）。</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># ping archlinux.org</span>
</span></span><span class="line"><span class="cl">PING archlinux.org <span class="o">(</span>95.217.163.246<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from archlinux.org <span class="o">(</span>95.217.163.246<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">47</span> <span class="nv">time</span><span class="o">=</span><span class="m">201</span> ms
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from archlinux.org <span class="o">(</span>95.217.163.246<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">47</span> <span class="nv">time</span><span class="o">=</span><span class="m">218</span> ms
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from archlinux.org <span class="o">(</span>95.217.163.246<span class="o">)</span>: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">47</span> <span class="nv">time</span><span class="o">=</span><span class="m">194</span> ms
</span></span><span class="line"><span class="cl">^C  <span class="c1"># 使用 Ctrl+C 中止命令</span>
</span></span><span class="line"><span class="cl">--- archlinux.org ping statistics ---
</span></span><span class="line"><span class="cl"><span class="m">3</span> packets transmitted, <span class="m">3</span> received, 0% packet loss, <span class="nb">time</span> <span class="m">2001</span> ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev <span class="o">=</span> 194.013/204.384/217.666/9.873 ms
</span></span></code></pre></div><p>如果出现上述结果，说明网络连接成功。如果无法连接 WiFi，请按照 ArchWiki 检查互联网连接。由于驱动不匹配，有些电脑可能无法连接 WiFi，只能使用有线连接或手机 USB 网络共享。</p>
<ol start="3">
<li>若要排查网络连接问题，请先确保你满足了以下要求。
<ol>
<li>你的网络接口可见并已启用。否则请检查设备驱动－请查阅 网络配置/以太网 - Arch Linux 中文维基 或 网络配置/无线网络配置 - Arch Linux 中文维基 页面。</li>
<li>你已连接到网络。网线已接好或者已经连接到无线局域网。</li>
<li>你的网络接口拥有一个 IP 地址。</li>
<li>你的路由表设置正确。</li>
<li>你可以 ping 通一个本地 IP 地址（例如你的默认网关）。</li>
<li>你可以 ping 通一个公网 IP 地址（例如 9.9.9.9，即 Quad9 的 DNS 服务器）。</li>
<li>检查是否能解析域名（例如 archlinux.org）。</li>
</ol>
</li>
</ol>
<h2 id="10-更新系统时间">10 更新系统时间<a hidden class="anchor" aria-hidden="true" href="#10-更新系统时间">#</a></h2>
<p>在互联网连接之后，systemd-timesyncd 服务将自动校准系统时间。请输入如下命令确定时间的准确性。设置时间的目的之一是便于安装软件包时验证签名。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># timedatectl</span>
</span></span></code></pre></div><p>时间可能以 UTC 时区显示，比北京时间慢 8 小时。这是正常现象，无需调整。</p>
<p>如果时间不准确，请使用 date 命令手动设置时间。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># date MMDDhhmmYY  # 如 date 1231080023 可以将时间设定为 2023 年 12 月 31 日 08:00</span>
</span></span></code></pre></div><h2 id="11-磁盘分区">11 磁盘分区<a hidden class="anchor" aria-hidden="true" href="#11-磁盘分区">#</a></h2>
<blockquote>
<p><strong>注意</strong></p>
<ol>
<li>从未进行过磁盘分区操作的读者请先在虚拟机内练习</li>
<li>请您务必提前备份好重要资料</li>
<li>请您确保知晓命令的含义，并正确输入命令，否则有可能造成数据丢失</li>
</ol></blockquote>
<h3 id="111-全新安装-arch-linux-的磁盘分区">11.1 全新安装 Arch Linux 的磁盘分区<a hidden class="anchor" aria-hidden="true" href="#111-全新安装-arch-linux-的磁盘分区">#</a></h3>
<blockquote>
<p><strong>注意</strong></p>
<p>继续操作将清除硬盘内全部数据。如果您想保留数据和已有的 Windows 系统，请看第 11.2 节。</p></blockquote>
<p>磁盘分区表</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">挂载点</th>
          <th style="text-align: center">分区</th>
          <th style="text-align: center">分区类型</th>
          <th style="text-align: center">建议大小</th>
          <th style="text-align: center">备注</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">/mnt/boot</td>
          <td style="text-align: center">/dev/sda1 或/dev/nvme0n1p1</td>
          <td style="text-align: center">EFI System</td>
          <td style="text-align: center">512 MiB</td>
          <td style="text-align: center">ESP 分区</td>
      </tr>
      <tr>
          <td style="text-align: center">/mnt</td>
          <td style="text-align: center">/dev/sda2 或/dev/nvme0n1p2</td>
          <td style="text-align: center">Linux x86-64 root</td>
          <td style="text-align: center">100 GiB（至少 50 GiB）</td>
          <td style="text-align: center">Arch Linux 的根分区</td>
      </tr>
      <tr>
          <td style="text-align: center">/mnt/home</td>
          <td style="text-align: center">/dev/sda3 或/dev/nvme0n1p3</td>
          <td style="text-align: center">Linux home</td>
          <td style="text-align: center">剩余磁盘空间</td>
          <td style="text-align: center">Arch Linux 的 home 分区</td>
      </tr>
  </tbody>
</table>
<p>首先使用 <code>lsblk</code> 或 <code>fdisk -l</code> 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># lsblk</span>
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl">NAME           MAJ:MIN  RM    SIZE  RO  TYPE  MOUNTPOINT
</span></span><span class="line"><span class="cl">loop0            7:0     <span class="m">0</span>  688.2M   <span class="m">1</span>  loop  /run/archiso/airootfs    <span class="c1"># loop0 可以忽略</span>
</span></span><span class="line"><span class="cl">sda              8:0     <span class="m">0</span>  931.5G   <span class="m">0</span>  disk    <span class="c1"># sda 是要安装 Arch Linux 的硬盘，请记住设备名</span>
</span></span><span class="line"><span class="cl">├─sda1           8:1     <span class="m">0</span>    512M   <span class="m">0</span>  part
</span></span><span class="line"><span class="cl">└─sda2           8:2     <span class="m">0</span>    931G   <span class="m">0</span>  part
</span></span><span class="line"><span class="cl">sdb              8:16    <span class="m">1</span>   59.8G   <span class="m">0</span>  disk    <span class="c1"># sdb 是 U 盘，请忽略</span>
</span></span><span class="line"><span class="cl">├─sdb1           8:17    <span class="m">1</span>   59.7G   <span class="m">0</span>  part
</span></span><span class="line"><span class="cl">│   └ventoy    254:0     <span class="m">0</span>  861.3M   <span class="m">1</span>  dm    /run/archiso/bootmnt
</span></span><span class="line"><span class="cl">└─sdb2           8:18    <span class="m">1</span>     32M   <span class="m">0</span>  part
</span></span></code></pre></div><p>在上面的例子中，以 rom、loop、airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。找到要进行分区的设备之后，请记住设备名（本文以 /dev/sda 为例，您的硬盘也可能是 /dev/nvme0n1）。</p>
<p>我们使用的分区工具是 fdisk ，首先让我们通过查看帮助，学习一下 fdisk 的用法。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># fdisk /dev/sda  # 输入 fdisk 设备名，进入 fdisk 操作环境</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Welcome to fdisk <span class="o">(</span>util-linux 2.x<span class="o">)</span>.
</span></span><span class="line"><span class="cl">Changes will remain in memory only, <span class="k">until</span> you decide to write them.
</span></span><span class="line"><span class="cl">Be careful before using the write command.  <span class="c1"># 执行写入命令（w）之前，硬盘不会被改动</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: m  <span class="c1"># 输入 m 获取帮助</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Help:
</span></span><span class="line"><span class="cl">  …
</span></span><span class="line"><span class="cl">  Generic
</span></span><span class="line"><span class="cl">   d   delete a partition  <span class="c1"># 输入 d 删除分区</span>
</span></span><span class="line"><span class="cl">   n   add a new partition  <span class="c1"># 输入 n 创建分区</span>
</span></span><span class="line"><span class="cl">   p   print the partition table  <span class="c1"># 输入 p 打印分区表</span>
</span></span><span class="line"><span class="cl">   t   change a partition <span class="nb">type</span>  <span class="c1"># 输入 t 改变分区类型</span>
</span></span><span class="line"><span class="cl">  …
</span></span><span class="line"><span class="cl">  Save <span class="p">&amp;</span> Exit
</span></span><span class="line"><span class="cl">   w   write table to disk and <span class="nb">exit</span>  <span class="c1"># 输入 w 写入并退出（写入后不可撤销，请谨慎使用）</span>
</span></span><span class="line"><span class="cl">   q   quit without saving changes  <span class="c1"># 输入 q 不保存退出</span>
</span></span><span class="line"><span class="cl">  …
</span></span><span class="line"><span class="cl">  Create a new label
</span></span><span class="line"><span class="cl">   g   create a new empty GPT partition table  <span class="c1"># 输入 g 创建 GPT 分区表</span>
</span></span><span class="line"><span class="cl">  …
</span></span></code></pre></div><p>现在请输入 <code>Ctrl+C</code>，退出 fdisk 操作环境。</p>
<p>我们现在正式进行磁盘分区。首先需要创建 GPT 分区表；随后依次创建分区，并修改分区类型；最后保存并退出。请参考以下分区过程，按照您的分区方案进行分区。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@archiso ~ # fdisk /dev/sda  # 请将 sda 更换为您的设备名，如 nvme0n1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Welcome to fdisk (util-linux 2.x).
</span></span><span class="line"><span class="cl">Changes will remain in memory only, until you decide to write them.
</span></span><span class="line"><span class="cl">Be careful before using the write command.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): g  # 输入 g 创建新的 GPT 分区表（请勿遗忘此步，否则您的硬盘将是 MBR 格式）
</span></span><span class="line"><span class="cl">Created a new GPT disklabel (GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): n  # 输入 n 创建新的分区，这个分区将是 EFI 分区
</span></span><span class="line"><span class="cl">Partition number (1-128, default 1):  # 分区编号保持默认，直接按 Enter
</span></span><span class="line"><span class="cl">First sector (2048-125829086, default 2048):  # 第一个扇区，保持默认
</span></span><span class="line"><span class="cl">Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-125829086, default 125827071): +512M  # 创建 512MiB 大小的分区
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Created a new partition 1 of type &#39;Linux filesystem&#39; and of size 512 MiB.
</span></span><span class="line"><span class="cl">Partition #1 contains a vfat signature.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Do you want to remove the signature? [Y]es/[N]o: Y  # 清除已有的签名，如果是全新的硬盘，则没有此步
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The signature will be removed by a write command.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步
</span></span><span class="line"><span class="cl">Selected partition 1
</span></span><span class="line"><span class="cl">Partition type or alias (type L to list all): 1  # 输入 1 代表 EFI 类型
</span></span><span class="line"><span class="cl">Changed type of partition &#39;Linux filesystem&#39; to &#39;EFI System&#39;.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): n  # 创建第二个分区，用作根分区
</span></span><span class="line"><span class="cl">Partition number (2-128, default 2):   # 保持默认
</span></span><span class="line"><span class="cl">First sector (1050624-125829086, default 1050624):   # 保持默认
</span></span><span class="line"><span class="cl">Last sector, +/-sectors or +/-size{K,M,G,T,P} (1050624-125829086, default 125827071): +100G  # 创建 100 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Created a new partition 2 of type &#39;Linux filesystem&#39; and of size 100 GiB.
</span></span><span class="line"><span class="cl">Partition #2 contains a ntfs signature.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Do you want to remove the signature? [Y]es/[N]o: Y
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">The signature will be removed by a write command.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步
</span></span><span class="line"><span class="cl">Partition number (1-2, default 2):   # 保持默认
</span></span><span class="line"><span class="cl">Partition type or alias (type L to list all): 23  # 输入 23 代表 Linux root (x86-64) 类型
</span></span><span class="line"><span class="cl">Changed type of partition &#39;Linux filesystem&#39; to &#39;Linux root (x86-64)&#39;.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): n  # 创建第三个分区，用作 home 分区
</span></span><span class="line"><span class="cl">Partition number (3-128, default 3):   # 保持默认
</span></span><span class="line"><span class="cl">First sector (42993664-125829086, default 42993664):   # 保持默认
</span></span><span class="line"><span class="cl">Last sector, +/-sectors or +/-size{K,M,G,T,P} (42993664-125829086, default 125827071):   #保持默认，将剩余空间全部分给 home 分区
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Created a new partition 3 of type &#39;Linux filesystem&#39; and of size 39.5 GiB.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): t  # 输入 t 改变分区类型
</span></span><span class="line"><span class="cl">Partition number (1-3, default 3):
</span></span><span class="line"><span class="cl">Partition type or alias (type L to list all): 42  # 输入 42 代表 Linux home 类型
</span></span><span class="line"><span class="cl">Changed type of partition &#39;Linux filesystem&#39; to &#39;Linux home&#39;.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): p  # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出
</span></span><span class="line"><span class="cl">Disk /dev/sda: 60 GiB, 64424509440 bytes, 125829120 sectors
</span></span><span class="line"><span class="cl">Disk model: xxx
</span></span><span class="line"><span class="cl">Units: sectors of 1 * 512 = 512 bytes
</span></span><span class="line"><span class="cl">Sector size (logical/physical): 512 bytes / 4096 bytes
</span></span><span class="line"><span class="cl">I/O size (minimum/optimal): 4096 bytes / 4096 bytes
</span></span><span class="line"><span class="cl">Disklabel type: gpt
</span></span><span class="line"><span class="cl">Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Device        Start        End   Sectors   Size  Type
</span></span><span class="line"><span class="cl">/dev/sda1      2048    1050623   1048576   512M  EFI System
</span></span><span class="line"><span class="cl">/dev/sda2   1050624   42993663  41943040   100G  Linux root (x86-64)
</span></span><span class="line"><span class="cl">/dev/sda3  42993664  125827071  82833408  39.5G  Linux home
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Filesystem/RAID signature on partition 1 will be wiped.
</span></span><span class="line"><span class="cl">Filesystem/RAID signature on partition 2 will be wiped.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复
</span></span><span class="line"><span class="cl">The partition table has been altered.
</span></span><span class="line"><span class="cl">Calling ioctl() to re-read partition table.
</span></span><span class="line"><span class="cl">Syncing disks.
</span></span></code></pre></div><h2 id="12-分区格式化">12 分区格式化<a hidden class="anchor" aria-hidden="true" href="#12-分区格式化">#</a></h2>
<p>创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4、btrfs、xfs 等。建议第一次安装的读者使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。</p>
<h3 id="121-全新安装-arch-linux-的分区格式化">12.1 全新安装 Arch Linux 的分区格式化<a hidden class="anchor" aria-hidden="true" href="#121-全新安装-arch-linux-的分区格式化">#</a></h3>
<blockquote>
<p><strong>注意</strong></p>
<p>如果您希望 Arch Linux 与 Windows 系统共存，请直接跳到下一小节。</p></blockquote>
<p>使用 <code>mkfs.fat</code> 将您的 EFI 分区格式化为 FAT32 文件系统。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mkfs.fat -F 32 /dev/sda1</span>
</span></span></code></pre></div><p>使用 mkfs.ext4 将您的根分区格式化为 ext4 文件系统。请将 /dev/sda2 更换为您的 root 分区名，可能是 /dev/nvme0n1p2。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mkfs.ext4 /dev/sda2</span>
</span></span></code></pre></div><p>使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 /dev/sda3 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mkfs.ext4 /dev/sda3</span>
</span></span></code></pre></div><h2 id="13-挂载分区">13 挂载分区<a hidden class="anchor" aria-hidden="true" href="#13-挂载分区">#</a></h2>
<h3 id="131-全新安装-arch-linux-的挂载分区">13.1 全新安装 Arch Linux 的挂载分区<a hidden class="anchor" aria-hidden="true" href="#131-全新安装-arch-linux-的挂载分区">#</a></h3>
<p>首先，使用 <code>mount</code> 将根分区挂载在 <code>/mnt</code> 目录下。本文假定您的根分区是 <code>/dev/sda2</code>，您的根分区也可能是 <code>/dev/nvme0n1p2</code>，请根据实际情况作替换。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mount /dev/sda2 /mnt</span>
</span></span></code></pre></div><p>随后，使用 <code>mount --mkdir</code> 创建 <code>/mnt/boot</code> 目录，并将 EFI 分区挂载在 <code>/mnt/boot</code> 目录下。请将 <code>/dev/sda1</code> 更换为您的 EFI 分区名，可能是 <code>/dev/nvme0n1p1</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mount --mkdir /dev/sda1 /mnt/boot</span>
</span></span></code></pre></div><p>此处，也可以使用 <code>/mnt/efi</code> 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。</p>
<p>最后，挂载 home 分区。请将 /dev/sda5 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mount --mkdir /dev/sda3 /mnt/home</span>
</span></span></code></pre></div><h2 id="14-建立交换文件">14 建立交换文件<a hidden class="anchor" aria-hidden="true" href="#14-建立交换文件">#</a></h2>
<p>交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读。</p>
<p>交换文件的大小是个众说纷纭的问题。笔者参考 RedHat 文档，推荐的交换文件大小见下表。笔者使用的公式是</p>
<p>您可以根据您的实际情况选择交换文件的大小。如果需要休眠功能，建议交换文件接近内存大小 ，可以使用笔者的推荐大小。如果您不需要休眠功能，请适当减少交换文件大小。</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">内存大小</th>
          <th style="text-align: center">推荐的交换文件大小（使用休眠功能）</th>
          <th style="text-align: center">推荐的交换文件大小（不使用休眠功能）</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">2 GiB</td>
          <td style="text-align: center">4096 MiB</td>
          <td></td>
      </tr>
      <tr>
          <td style="text-align: center">4 GiB</td>
          <td style="text-align: center">5793 MiB</td>
          <td></td>
      </tr>
      <tr>
          <td style="text-align: center">8 GiB</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td style="text-align: center">16 GiB</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td style="text-align: center">32 GiB</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td style="text-align: center">64 GiB</td>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<p>4096 MiB</p>
<p>5793 MiB</p>
<p>8192 MiB</p>
<p>11585 MiB</p>
<p>16384 MiB</p>
<p>23170 MiB</p>
<p>4096 MiB</p>
<p>5793 MiB</p>
<p>8192 MiB</p>
<p>8192 MiB</p>
<p>4096 MiB</p>
<p>0 MiB</p>
<p>建立交换文件的具体操作方法如下 。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （=8192 MiB）大小的交换文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># dd if=/dev/zero of=/mnt/swapfile bs=1M count=8192 status=progress</span>
</span></span></code></pre></div><p>如果您需要创建其他大小的交换文件，请将 <code>count=</code> 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。</p>
<p>然后，修改权限。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># chmod 0600 /mnt/swapfile</span>
</span></span></code></pre></div><p>最后，格式化并启用交换文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># mkswap -U clear /mnt/swapfile</span>
</span></span><span class="line"><span class="cl">root@archiso ~ <span class="c1"># swapon /mnt/swapfile</span>
</span></span></code></pre></div><h2 id="15-选择软件仓库镜像">15 选择软件仓库镜像<a hidden class="anchor" aria-hidden="true" href="#15-选择软件仓库镜像">#</a></h2>
<p>Linux 中的软件仓库就像手机操作系统中的应用商店，Linux 的软件包是通过软件仓库进行分发的。软件仓库镜像是软件仓库的复制品，同一个软件仓库可以在世界各地建立软件仓库镜像，以便于不同地区的用户下载。因此选择一个合适的软件仓库镜像对于您更新软件包数据库和下载软件包的速度有很大影响。</p>
<h3 id="151-使用-reflector">15.1 使用 reflector<a hidden class="anchor" aria-hidden="true" href="#151-使用-reflector">#</a></h3>
<p>Arch Linux 提供了一个筛选软件仓库镜像的便利工具 reflector。我们使用该工具选择软件仓库镜像。首先使用 reflector 自带的帮助学习一下该软件的用法。当您遇到陌生的命令时，使用 &ndash;help 选项查看用法是一个好主意。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># reflector --help</span>
</span></span></code></pre></div><p>请仔细阅读屏幕上打印出的内容，自学是使用 Arch Linux 的必要过程。如果您看不懂，可以参考以下总结。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">用法：
</span></span><span class="line"><span class="cl">reflector -选项1 -选项2 …
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">选项：
</span></span><span class="line"><span class="cl">--save &lt;文件路径&gt;  把镜像列表保存到给定的路径
</span></span><span class="line"><span class="cl">--sort {age,rate,country,score,delay}
</span></span><span class="line"><span class="cl">  以给定条件给镜像排序。
</span></span><span class="line"><span class="cl">  age：服务器最后同步时间；
</span></span><span class="line"><span class="cl">  rate：下载速度；
</span></span><span class="line"><span class="cl">  country：国家名；
</span></span><span class="line"><span class="cl">  score：“镜像状态”中的得分；
</span></span><span class="line"><span class="cl">  delay：“镜像状态”中的延迟
</span></span><span class="line"><span class="cl">--delay n  只返回同步延迟在 n 小时之内的镜像
</span></span><span class="line"><span class="cl">-a n  只返回 n 小时内同步的镜像
</span></span><span class="line"><span class="cl">-c &lt;国家&gt;
</span></span><span class="line"><span class="cl">-p &lt;协议&gt;
</span></span></code></pre></div><p>笔者推荐使用如下命令选择镜像。此命令将为您选出位于平均同步延迟在 3 小时以内的，位于中国内地的 HTTPS 镜像，并根据速度排序。指定 <code>--completion-percent 95</code>（默认为 100）的目的是防止忽略可用的镜像。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># reflector -p https -c China --delay 3 --completion-percent 95 --sort rate --save /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><p>上述命令使用了并不稳定的测速功能，如果大量报错，也可以根据得分排序。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># reflector -p https -c China --delay 3 --completion-percent 95 --sort score --save /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><p>如果您在境外，请使用 <code>reflector --list-countries</code> 查看您所在的国家名，然后自行替换选项 <code>-c</code> 后面的内容。如果国家名包含空格，请使用两字母的国家代号，或者用引号将国家名包裹起来。</p>
<h3 id="152-手动编辑文件">15.2 手动编辑文件<a hidden class="anchor" aria-hidden="true" href="#152-手动编辑文件">#</a></h3>
<p>您也可以手动编辑 <code>/etc/pacman.d/mirrorlist</code>。国内知名的软件仓库镜像站有清华（TUNA）和中科大（USTC），但是笔者不推荐将它们放在第一位。因为使用者过多，服务器负载过大，影响下载速度。根据下列文章，笔者推荐北外（BFSU）镜像。该镜像由清华 TUNA 协会维护，质量速度俱佳。此外，上交（SJTUG）镜像也是不错的选择。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># nano /etc/pacman.d/mirrorlist</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">文件 /etc/pacman.d/mirrorlist
</span></span><span class="line"><span class="cl">-----------------------------    # 以下为文件内容
</span></span><span class="line"><span class="cl">Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch
</span></span><span class="line"><span class="cl">Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch
</span></span><span class="line"><span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
</span></span><span class="line"><span class="cl">Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
</span></span></code></pre></div><p>如果您在国外，可以选择 pkgbuild 镜像。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">文件 /etc/pacman.d/mirrorlist
</span></span><span class="line"><span class="cl">-----------------------------    # 以下为文件内容
</span></span><span class="line"><span class="cl">Server = https://geo.mirror.pkgbuild.com/$repo/os/$arch
</span></span></code></pre></div><p>随后按下 <code>Ctrl+O</code> 保存，<code>Ctrl+X</code> 退出。</p>
<h2 id="16-安装基础包">16 安装基础包<a hidden class="anchor" aria-hidden="true" href="#16-安装基础包">#</a></h2>
<p>终于到了安装环节。我们使用 pacstrap 安装（元）软件包 <code>base</code>、<code>linux</code>和<code>linux-firmware</code>，它们分别是 Arch Linux 基础元软件包，linux 内核和常规硬件的固件。此外，如果您使用较新（2019 年及以后生产）的笔记本电脑，则需要安装软件包 <code>sof-firmware</code>，否则可能没有声音。</p>
<p>Arch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核 ，但是对于新手，只推荐使用 linux 内核。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># pacstrap -K /mnt base linux linux-firmware</span>
</span></span></code></pre></div><p>此命令需要一段时间执行。执行完毕后请检查输出，不应出现任何错误（ERROR）。如果出现，请先尝试重新执行命令。如果反复报错，可以寻求他人的帮助。</p>
<p>如果报告“验证软件包错误”，可以尝试以下方法，然后重新安装。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># pacman-key --init  # 初始化密钥环</span>
</span></span><span class="line"><span class="cl">root@archiso ~ <span class="c1"># pacman-key --populate</span>
</span></span><span class="line"><span class="cl">root@archiso ~ <span class="c1"># pacman -Sy archlinux-keyring  # 更新 archlinux-keyring</span>
</span></span></code></pre></div><h2 id="17-fstab">17 fstab<a hidden class="anchor" aria-hidden="true" href="#17-fstab">#</a></h2>
<p><code>fstab</code> 是一个系统文件，决定了系统启动时如何自动挂载分区。没有 fstab，系统将找不到根分区，从而无法启动。fstab 有一定的格式，我们用一个例子说明该文件的格式。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/etc/fstab
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl"># &lt;device&gt;                                &lt;dir&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;fsck&gt;
</span></span><span class="line"><span class="cl">UUID=0a3407de-014b-458b-b5c1-848e92a327a3 /     ext4   noatime   0      1
</span></span><span class="line"><span class="cl">UUID=f9fe0b69-a280-415d-a03a-a32752370dee none  swap   defaults  0      0
</span></span><span class="line"><span class="cl">UUID=b411dc99-f0a0-4c87-9e05-184977be8539 /home ext4   noatime   0      2
</span></span></code></pre></div><p>第一栏：设备，描述了要被挂载的块设备，推荐使用 UUID 方式，也可以使用分区标签（label）。
第二栏：文件夹，即挂载文件夹。
第三栏：类型，即文件系统类型。
第四栏：选项，即挂载选项。
第五栏：dump，用于 dump 功能决定文件系统是否需要备份，一般填 0。
第六栏：fsck，是否在启动过程中检查文件系统，对于 ext4 格式的根分区，应该填 1，其余填 0。</p>
<p>Arch Linux 提供了自动生成 fstab 的工具，我们利用它直接生成。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span>
</span></span></code></pre></div><p>其中 <code>genfstab -U /mnt</code> 是以 UUID 的描述方式生成 fstab。<code>&gt;&gt;</code> 的意思是，将输出附加到指定文件之后。</p>
<p>生成完成后，记得使用 <code>cat</code> 命令打印文件内容，仔细检查一遍。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># cat /mnt/etc/fstab</span>
</span></span></code></pre></div><h2 id="18-chroot">18 chroot<a hidden class="anchor" aria-hidden="true" href="#18-chroot">#</a></h2>
<p>我们使用 <code>arch-chroot</code> 脚本，切换到新安装的系统，以后的操作就可以在新安装的系统中完成了。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># arch-chroot /mnt</span>
</span></span></code></pre></div><h2 id="19-时区">19 时区<a hidden class="anchor" aria-hidden="true" href="#19-时区">#</a></h2>
<p>我们设置时区的软链接。在中国内地的读者请使用上海时区，在其他地区的读者可以在输入“/usr/share/zoneinfo/”之后按下 <code>Tab</code> 查看可选的时区。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span>
</span></span></code></pre></div><p>然后，设置硬件时间。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># hwclock --systohc</span>
</span></span></code></pre></div><h2 id="20-本地化">20 本地化<a hidden class="anchor" aria-hidden="true" href="#20-本地化">#</a></h2>
<p>我们将设置 locale、终端键盘布局和字体。locale 决定了系统的语言和格式，包括终端显示哪种语言，数字、时间和货币以哪国的格式显示等等。</p>
<h3 id="201-设置-locale">20.1 设置 locale<a hidden class="anchor" aria-hidden="true" href="#201-设置-locale">#</a></h3>
<p>首先使用包管理器 pacman 安装两个软件包。使用 pacman 安装软件包需要利用 -S (&ndash;sync) 选项，这个选项的意思是“同步的数据库”。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># pacman -S vim terminus-font</span>
</span></span></code></pre></div><p>vim 是著名的文本编辑器，而 terminus-font 是终端字体。我们输入以下命令，利用 vim 编辑 /etc/locale.gen。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># vim /etc/locale.gen</span>
</span></span></code></pre></div><p>vim 的功能十分强大，在这里只解释用到的功能，其他功能在下一篇文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。
输入 <code>/</code>，进入搜索功能，输入 <code>en_US.UTF-8</code>，我们找到了以下一行。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#en_US.UTF-8 UTF-8
</span></span></code></pre></div><p>按下 <code>Enter</code>，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">en_US.UTF-8 UTF-8
</span></span></code></pre></div><p>再一次输入 <code>/</code>，进入搜索功能，输入 <code>zh_CN.UTF-8</code>，按下 <code>Enter</code>。按方向左键，再输入 <code>x</code>，将“#”删除。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">zh_CN.UTF-8 UTF-8
</span></span></code></pre></div><p>随后输入 <code>:</code>，进入命令模式，输入 <code>wq</code>，按下 <code>Enter</code>，保存并退出 vim 软件环境。</p>
<p>接下来，输入如下命令，生成 locale。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># locale-gen</span>
</span></span></code></pre></div><p>我们再使用 vim 创建并编辑 <code>locale.conf</code>，设置 locale。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># vim /etc/locale.conf</span>
</span></span></code></pre></div><p>这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下 <code>i</code>，进入插入模式。请输入如下字符。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">LANG=en_US.UTF-8
</span></span></code></pre></div><p>然后按 <code>Esc</code>，退出插入模式。再输入 <code>:</code>，进入命令模式，输入<code>wq</code>，按下 <code>Enter</code>，保存并退出 vim 软件环境。</p>
<h3 id="202-设置终端键盘布局和字体">20.2 设置终端键盘布局和字体<a hidden class="anchor" aria-hidden="true" href="#202-设置终端键盘布局和字体">#</a></h3>
<p>我们创建并编辑 <code>vconsole.conf</code>，设置终端的默认字体。我们已经在安装开始时设置过终端字体，但是重启之后设置将失效。为了让设置永久生效，我们需要把设置写在文件中。请输入如下命令。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># vim /etc/vconsole.conf</span>
</span></span></code></pre></div><p>请用相同的方法输入如下字符。请在“KEYMAP=”后面输入您在第 7 节设置终端键盘布局时选择的键盘布局（这一行可以不设置），在“FONT=”后面输入您在第 7 节设置终端字体时选择的字体，保存并退出。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/etc/vconsole.conf
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl">FONT=ter-132b
</span></span></code></pre></div><h2 id="21-网络配置">21 网络配置<a hidden class="anchor" aria-hidden="true" href="#21-网络配置">#</a></h2>
<p>请编辑 <code>/etc/hostname</code> 文件，设置主机名。这将成为您计算机的名字。这篇文章为设置主机名提供了一些建议。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># vim /etc/hostname</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/etc/hostname
</span></span><span class="line"><span class="cl">----
</span></span><span class="line"><span class="cl">我的主机名
</span></span></code></pre></div><p>然后，请安装一个网络管理器，笔者推荐使用 NetworkManager。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># pacman -S networkmanager</span>
</span></span></code></pre></div><p>NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在使用 systemd 设置 NetworkManager 开机自动启动。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># systemctl enable NetworkManager.service</span>
</span></span></code></pre></div><h2 id="22-root-密码">22 root 密码<a hidden class="anchor" aria-hidden="true" href="#22-root-密码">#</a></h2>
<p>root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码。</p>
<p>请设置 root 密码。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># passwd</span>
</span></span><span class="line"><span class="cl">New password:    <span class="c1"># 注：输入密码后不会显示“*”，这是正常现象</span>
</span></span><span class="line"><span class="cl">Retype new password:
</span></span><span class="line"><span class="cl">passwd: password updated successfully
</span></span></code></pre></div><h2 id="23-引导加载程序">23 引导加载程序<a hidden class="anchor" aria-hidden="true" href="#23-引导加载程序">#</a></h2>
<p>为了启动 Arch Linux，建议使用一个引导加载程序，笔者推荐使用的引导加载程序是 GRUB。</p>
<p>再次声明，本教程只针对 UEFI 启动模式的计算机，如果您的计算机使用 BIOS 启动模式，请参阅此教程。</p>
<p>关于 Arch Linux 启动的过程，参见 ArchWiki。</p>
<h3 id="231-微码">23.1 微码<a hidden class="anchor" aria-hidden="true" href="#231-微码">#</a></h3>
<p>根据您的 CPU 生产厂商，安装相应的微码。</p>
<p>请先查看您的 CPU 型号。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># cat /proc/cpuinfo | grep &#34;model name&#34;</span>
</span></span></code></pre></div><p>如果是 Intel CPU，请安装软件包 <code>intel-ucode</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># pacman -S intel-ucode</span>
</span></span></code></pre></div><p>如果是 AMD CPU，请安装软件包 <code>amd-ucode</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># pacman -S amd-ucode</span>
</span></span></code></pre></div><h3 id="232-安装引导加载程序针对全新安装-arch-linux">23.2 安装引导加载程序（针对全新安装 Arch Linux）<a hidden class="anchor" aria-hidden="true" href="#232-安装引导加载程序针对全新安装-arch-linux">#</a></h3>
<p>首先，安装必要的软件包。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># pacman -S grub efibootmgr</span>
</span></span></code></pre></div><p>然后，安装 GRUB 到计算机。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB</span>
</span></span></code></pre></div><p>如果您在挂载分区时，将 esp 分区挂载到了 /efi 或者 /boot/efi，请在 &ndash;efi-directory 选项中作相应变动。如果您完全按照本教程操作，则不用作改变。</p>
<p>如果输出 <code>Installation finished. No error reported.</code>，则说明安装成功，否则请立即检查错误。</p>
<p>最后，生成 GRUB 配置，其中 <code>-o</code> 选项将配置输出到指定的文件中。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># grub-mkconfig -o /boot/grub/grub.cfg</span>
</span></span></code></pre></div><h2 id="24-重新启动计算机">24 重新启动计算机<a hidden class="anchor" aria-hidden="true" href="#24-重新启动计算机">#</a></h2>
<p>首先，退出 chroot 环境。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@archiso ~<span class="o">]</span><span class="c1"># exit</span>
</span></span></code></pre></div><p>然后，关闭交换文件。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># swapoff /mnt/swapfile</span>
</span></span></code></pre></div><p>随后，取消挂载 /mnt。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># umount -R /mnt</span>
</span></span></code></pre></div><p>最后，重新启动计算机。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@archiso ~ <span class="c1"># reboot</span>
</span></span></code></pre></div><h2 id="25-安装后的工作">25 安装后的工作<a hidden class="anchor" aria-hidden="true" href="#25-安装后的工作">#</a></h2>
<p>至此，一个基本的 Arch Linux 系统已经安装完毕，现在您可以通过终端控制系统。笔者将在下一篇文章中介绍安装后的配置，包括普通账户的创建、显卡驱动和图形界面的安装，敬请阅读。</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://rosa-thomas.me/zh/tags/arch-linux/">Arch Linux</a></li>
      <li><a href="https://rosa-thomas.me/zh/tags/linux/">Linux</a></li>
      <li><a href="https://rosa-thomas.me/zh/tags/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6/">自由软件</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://rosa-thomas.me/zh/posts/2024/01/katago-installation/">
    <span class="title">« 上一页</span>
    <br>
    <span>水无常形——开源围棋 AI 软件 KataGo 安装指南</span>
  </a>
</nav>

  </footer>
<script
    src="https://giscus.app/client.js"
    data-repo="rosa-thomas-chen/rosa-thomas-chen.github.io"
    data-repo-id="R_kgDOPcLOEw"
    data-category="Announcements"
    data-category-id="DIC_kwDOPcLOE84CuFAC"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="preferred_color_scheme"
    data-lang="zh"
    data-loading="lazy"
    crossorigin="anonymous"
    async
></script>


</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://rosa-thomas.me/zh/">Rosa Thomas 的博客</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
